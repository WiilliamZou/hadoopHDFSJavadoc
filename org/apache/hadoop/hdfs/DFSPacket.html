<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:53:47 EDT 2015 -->
<title>DFSPacket</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DFSPacket";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DFSPacket.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/hadoop/hdfs/DFSOutputStream.DataStreamer.ResponseProcessor.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/hadoop/hdfs/DFSUtil.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/hdfs/DFSPacket.html" target="_top">Frames</a></li>
<li><a href="DFSPacket.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs</div>
<h2 title="Class DFSPacket" class="title">Class DFSPacket</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.DFSPacket</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre> class <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.37">DFSPacket</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">DFSPacket is used by DataStreamer and DFSOutputStream.
 DFSOutputStream generates packets and then ask DatStreamer
 to send them to datanodes.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#buf">buf</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#checksumPos">checksumPos</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#checksumStart">checksumStart</a></strong></code>
<div class="block">buf is pointed into like follows:
  (C is checksum data, D is payload data)

 [_________CCCCCCCCC________________DDDDDDDDDDDDDDDD___]
           ^        ^               ^               ^
           |        checksumPos     dataStart       dataPos
           checksumStart

 Right before sending, we move the checksum data to immediately precede
 the actual data, and then insert the header into the buffer immediately
 preceding the checksum data, so we make sure to keep enough space in
 front of the checksum data to support the largest conceivable header.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#dataPos">dataPos</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#dataStart">dataStart</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#EMPTY">EMPTY</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#HEART_BEAT_SEQNO">HEART_BEAT_SEQNO</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#lastPacketInBlock">lastPacketInBlock</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#maxChunks">maxChunks</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#numChunks">numChunks</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#offsetInBlock">offsetInBlock</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#seqno">seqno</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.htrace.Span</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#span">span</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#syncBlock">syncBlock</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#traceParents">traceParents</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#traceParentsUsed">traceParentsUsed</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#DFSPacket(byte[],%20int,%20long,%20long,%20int,%20boolean)">DFSPacket</a></strong>(byte[]&nbsp;buf,
                  int&nbsp;chunksPerPkt,
                  long&nbsp;offsetInBlock,
                  long&nbsp;seqno,
                  int&nbsp;checksumSize,
                  boolean&nbsp;lastPacketInBlock)</code>
<div class="block">Create a new packet.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#addTraceParent(long)">addTraceParent</a></strong>(long&nbsp;id)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#addTraceParent(org.apache.htrace.Span)">addTraceParent</a></strong>(org.apache.htrace.Span&nbsp;span)</code>
<div class="block">Add a trace parent span for this packet.<p/>

 Trace parent spans for a packet are the trace spans responsible for
 adding data to that packet.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#checkBuffer()">checkBuffer</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#getLastByteOffsetBlock()">getLastByteOffsetBlock</a></strong>()</code>
<div class="block">get the packet's last byte's offset in the block</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#getMaxChunks()">getMaxChunks</a></strong>()</code>
<div class="block">get the maximum number of packets</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#getNumChunks()">getNumChunks</a></strong>()</code>
<div class="block">get the number of chunks this packet contains</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#getSeqno()">getSeqno</a></strong>()</code>
<div class="block">get sequence number of this packet</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#getTraceParents()">getTraceParents</a></strong>()</code>
<div class="block">Get the trace parent spans for this packet.<p/>

 Will always be non-null.<p/>

 Protected by the DFSOutputStream dataQueue lock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>org.apache.htrace.Span</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#getTraceSpan()">getTraceSpan</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#incNumChunks()">incNumChunks</a></strong>()</code>
<div class="block">increase the number of chunks by one</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#isHeartbeatPacket()">isHeartbeatPacket</a></strong>()</code>
<div class="block">Check if this packet is a heart beat packet</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#isLastPacketInBlock()">isLastPacketInBlock</a></strong>()</code>
<div class="block">check if this packet is the last packet in block</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#releaseBuffer(org.apache.hadoop.hdfs.util.ByteArrayManager)">releaseBuffer</a></strong>(<a href="../../../../org/apache/hadoop/hdfs/util/ByteArrayManager.html" title="class in org.apache.hadoop.hdfs.util">ByteArrayManager</a>&nbsp;bam)</code>
<div class="block">Release the buffer in this packet to ByteArrayManager.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#setSyncBlock(boolean)">setSyncBlock</a></strong>(boolean&nbsp;syncBlock)</code>
<div class="block">set if to sync block</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#setTraceSpan(org.apache.htrace.Span)">setTraceSpan</a></strong>(org.apache.htrace.Span&nbsp;span)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#writeChecksum(byte[],%20int,%20int)">writeChecksum</a></strong>(byte[]&nbsp;inarray,
                          int&nbsp;off,
                          int&nbsp;len)</code>
<div class="block">Write checksums to this packet</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#writeData(byte[],%20int,%20int)">writeData</a></strong>(byte[]&nbsp;inarray,
                  int&nbsp;off,
                  int&nbsp;len)</code>
<div class="block">Write data to this packet.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/DFSPacket.html#writeTo(java.io.DataOutputStream)">writeTo</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a>&nbsp;stm)</code>
<div class="block">Write the full packet, including the header, to the given output stream.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="HEART_BEAT_SEQNO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HEART_BEAT_SEQNO</h4>
<pre>public static final&nbsp;long <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.38">HEART_BEAT_SEQNO</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.hdfs.DFSPacket.HEART_BEAT_SEQNO">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="EMPTY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EMPTY</h4>
<pre>private static&nbsp;long[] <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.39">EMPTY</a></pre>
</li>
</ul>
<a name="seqno">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>seqno</h4>
<pre>private final&nbsp;long <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.40">seqno</a></pre>
</li>
</ul>
<a name="offsetInBlock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>offsetInBlock</h4>
<pre>private final&nbsp;long <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.41">offsetInBlock</a></pre>
</li>
</ul>
<a name="syncBlock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>syncBlock</h4>
<pre>private&nbsp;boolean <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.42">syncBlock</a></pre>
</li>
</ul>
<a name="numChunks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numChunks</h4>
<pre>private&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.43">numChunks</a></pre>
</li>
</ul>
<a name="maxChunks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxChunks</h4>
<pre>private final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.44">maxChunks</a></pre>
</li>
</ul>
<a name="buf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buf</h4>
<pre>private&nbsp;byte[] <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.45">buf</a></pre>
</li>
</ul>
<a name="lastPacketInBlock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastPacketInBlock</h4>
<pre>private final&nbsp;boolean <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.46">lastPacketInBlock</a></pre>
</li>
</ul>
<a name="checksumStart">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksumStart</h4>
<pre>private&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.62">checksumStart</a></pre>
<div class="block">buf is pointed into like follows:
  (C is checksum data, D is payload data)

 [_________CCCCCCCCC________________DDDDDDDDDDDDDDDD___]
           ^        ^               ^               ^
           |        checksumPos     dataStart       dataPos
           checksumStart

 Right before sending, we move the checksum data to immediately precede
 the actual data, and then insert the header into the buffer immediately
 preceding the checksum data, so we make sure to keep enough space in
 front of the checksum data to support the largest conceivable header.</div>
</li>
</ul>
<a name="checksumPos">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksumPos</h4>
<pre>private&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.63">checksumPos</a></pre>
</li>
</ul>
<a name="dataStart">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataStart</h4>
<pre>private final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.64">dataStart</a></pre>
</li>
</ul>
<a name="dataPos">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataPos</h4>
<pre>private&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.65">dataPos</a></pre>
</li>
</ul>
<a name="traceParents">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>traceParents</h4>
<pre>private&nbsp;long[] <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.66">traceParents</a></pre>
</li>
</ul>
<a name="traceParentsUsed">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>traceParentsUsed</h4>
<pre>private&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.67">traceParentsUsed</a></pre>
</li>
</ul>
<a name="span">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>span</h4>
<pre>private&nbsp;org.apache.htrace.Span <a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.68">span</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DFSPacket(byte[], int, long, long, int, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DFSPacket</h4>
<pre><a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.80">DFSPacket</a>(byte[]&nbsp;buf,
         int&nbsp;chunksPerPkt,
         long&nbsp;offsetInBlock,
         long&nbsp;seqno,
         int&nbsp;checksumSize,
         boolean&nbsp;lastPacketInBlock)</pre>
<div class="block">Create a new packet.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buf</code> - the buffer storing data and checksums</dd><dd><code>chunksPerPkt</code> - maximum number of chunks per packet.</dd><dd><code>offsetInBlock</code> - offset in bytes into the HDFS block.</dd><dd><code>seqno</code> - the sequence number of this packet</dd><dd><code>checksumSize</code> - the size of checksum</dd><dd><code>lastPacketInBlock</code> - if this is the last packet</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="writeData(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeData</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.104">writeData</a>(byte[]&nbsp;inarray,
             int&nbsp;off,
             int&nbsp;len)
         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/ClosedChannelException.html?is-external=true" title="class or interface in java.nio.channels">ClosedChannelException</a></pre>
<div class="block">Write data to this packet.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inarray</code> - input array of data</dd><dd><code>off</code> - the offset of data to write</dd><dd><code>len</code> - the length of data to write</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/ClosedChannelException.html?is-external=true" title="class or interface in java.nio.channels">ClosedChannelException</a></code></dd></dl>
</li>
</ul>
<a name="writeChecksum(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeChecksum</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.122">writeChecksum</a>(byte[]&nbsp;inarray,
                 int&nbsp;off,
                 int&nbsp;len)
             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/ClosedChannelException.html?is-external=true" title="class or interface in java.nio.channels">ClosedChannelException</a></pre>
<div class="block">Write checksums to this packet</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inarray</code> - input array of checksums</dd><dd><code>off</code> - the offset of checksums to write</dd><dd><code>len</code> - the length of checksums to write</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/ClosedChannelException.html?is-external=true" title="class or interface in java.nio.channels">ClosedChannelException</a></code></dd></dl>
</li>
</ul>
<a name="writeTo(java.io.DataOutputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeTo</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.141">writeTo</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a>&nbsp;stm)
       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Write the full packet, including the header, to the given output stream.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>stm</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="checkBuffer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkBuffer</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.184">checkBuffer</a>()
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/ClosedChannelException.html?is-external=true" title="class or interface in java.nio.channels">ClosedChannelException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/ClosedChannelException.html?is-external=true" title="class or interface in java.nio.channels">ClosedChannelException</a></code></dd></dl>
</li>
</ul>
<a name="releaseBuffer(org.apache.hadoop.hdfs.util.ByteArrayManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseBuffer</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.195">releaseBuffer</a>(<a href="../../../../org/apache/hadoop/hdfs/util/ByteArrayManager.html" title="class in org.apache.hadoop.hdfs.util">ByteArrayManager</a>&nbsp;bam)</pre>
<div class="block">Release the buffer in this packet to ByteArrayManager.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bam</code> - </dd></dl>
</li>
</ul>
<a name="getLastByteOffsetBlock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastByteOffsetBlock</h4>
<pre>long&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.205">getLastByteOffsetBlock</a>()</pre>
<div class="block">get the packet's last byte's offset in the block</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the packet's last byte's offset in the block</dd></dl>
</li>
</ul>
<a name="isHeartbeatPacket()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isHeartbeatPacket</h4>
<pre>boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.214">isHeartbeatPacket</a>()</pre>
<div class="block">Check if this packet is a heart beat packet</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the sequence number is HEART_BEAT_SEQNO</dd></dl>
</li>
</ul>
<a name="isLastPacketInBlock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLastPacketInBlock</h4>
<pre>boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.223">isLastPacketInBlock</a>()</pre>
<div class="block">check if this packet is the last packet in block</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the packet is the last packet</dd></dl>
</li>
</ul>
<a name="getSeqno()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSeqno</h4>
<pre>long&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.232">getSeqno</a>()</pre>
<div class="block">get sequence number of this packet</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the sequence number of this packet</dd></dl>
</li>
</ul>
<a name="getNumChunks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumChunks</h4>
<pre>int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.241">getNumChunks</a>()</pre>
<div class="block">get the number of chunks this packet contains</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the number of chunks in this packet</dd></dl>
</li>
</ul>
<a name="incNumChunks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incNumChunks</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.248">incNumChunks</a>()</pre>
<div class="block">increase the number of chunks by one</div>
</li>
</ul>
<a name="getMaxChunks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxChunks</h4>
<pre>int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.257">getMaxChunks</a>()</pre>
<div class="block">get the maximum number of packets</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the maximum number of packets</dd></dl>
</li>
</ul>
<a name="setSyncBlock(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSyncBlock</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.266">setSyncBlock</a>(boolean&nbsp;syncBlock)</pre>
<div class="block">set if to sync block</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>syncBlock</code> - if to sync block</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.271">toString</a>()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="addTraceParent(org.apache.htrace.Span)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTraceParent</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.287">addTraceParent</a>(org.apache.htrace.Span&nbsp;span)</pre>
<div class="block">Add a trace parent span for this packet.<p/>

 Trace parent spans for a packet are the trace spans responsible for
 adding data to that packet.  We store them as an array of longs for
 efficiency.<p/>

 Protected by the DFSOutputStream dataQueue lock.</div>
</li>
</ul>
<a name="addTraceParent(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTraceParent</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.294">addTraceParent</a>(long&nbsp;id)</pre>
</li>
</ul>
<a name="getTraceParents()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTraceParents</h4>
<pre>public&nbsp;long[]&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.311">getTraceParents</a>()</pre>
<div class="block">Get the trace parent spans for this packet.<p/>

 Will always be non-null.<p/>

 Protected by the DFSOutputStream dataQueue lock.</div>
</li>
</ul>
<a name="setTraceSpan(org.apache.htrace.Span)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTraceSpan</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.336">setTraceSpan</a>(org.apache.htrace.Span&nbsp;span)</pre>
</li>
</ul>
<a name="getTraceSpan()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getTraceSpan</h4>
<pre>public&nbsp;org.apache.htrace.Span&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/DFSPacket.html#line.340">getTraceSpan</a>()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DFSPacket.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/hadoop/hdfs/DFSOutputStream.DataStreamer.ResponseProcessor.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/hadoop/hdfs/DFSUtil.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/hdfs/DFSPacket.html" target="_top">Frames</a></li>
<li><a href="DFSPacket.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
