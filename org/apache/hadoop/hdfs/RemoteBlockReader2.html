<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:53:48 EDT 2015 -->
<title>RemoteBlockReader2</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="RemoteBlockReader2";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RemoteBlockReader2.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/hadoop/hdfs/RemotePeerFactory.html" title="interface in org.apache.hadoop.hdfs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/hdfs/RemoteBlockReader2.html" target="_top">Frames</a></li>
<li><a href="RemoteBlockReader2.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs</div>
<h2 title="Class RemoteBlockReader2" class="title">Class RemoteBlockReader2</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.RemoteBlockReader2</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.apache.hadoop.fs.ByteBufferReadable, <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
public class <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.86">RemoteBlockReader2</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></pre>
<div class="block">This is a wrapper around connection to datanode
 and understands checksum, offset etc.

 Terminology:
 <dl>
 <dt>block</dt>
   <dd>The hdfs block, typically large (~64MB).
   </dd>
 <dt>chunk</dt>
   <dd>A block is divided into chunks, each comes with a checksum.
       We want transfers to be chunk-aligned, to be able to
       verify checksums.
   </dd>
 <dt>packet</dt>
   <dd>A grouping of chunks used for transport. It contains a
       header, followed by checksum data, followed by real data.
   </dd>
 </dl>
 Please see DataNode for the RPC specification.

 This is a new implementation introduced in Hadoop 0.23 which
 is more efficient and simpler than the older BlockReader
 implementation. It should be renamed to RemoteBlockReader
 once we are confident in it.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#blockId">blockId</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#bytesNeededToFinish">bytesNeededToFinish</a></strong></code>
<div class="block">The total number of bytes we need to transfer from the DN.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#bytesPerChecksum">bytesPerChecksum</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.hadoop.util.DataChecksum</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#checksum">checksum</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#checksumBytes">checksumBytes</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#checksumSize">checksumSize</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#curDataSlice">curDataSlice</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#dataLeft">dataLeft</a></strong></code>
<div class="block">Amount of unread data in the current received packet</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#datanodeID">datanodeID</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#filename">filename</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/ReadableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">ReadableByteChannel</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#in">in</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#isLocal">isLocal</a></strong></code>
<div class="block">True if we are reading from a local DataNode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#lastSeqNo">lastSeqNo</a></strong></code>
<div class="block">offset in block of the last chunk received</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/hdfs/protocol/datatransfer/PacketReceiver.html" title="class in org.apache.hadoop.hdfs.protocol.datatransfer">PacketReceiver</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#packetReceiver">packetReceiver</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/hdfs/net/Peer.html" title="interface in org.apache.hadoop.hdfs.net">Peer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#peer">peer</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/hdfs/PeerCache.html" title="class in org.apache.hadoop.hdfs">PeerCache</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#peerCache">peerCache</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#sentStatusCode">sentStatusCode</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#skipBuf">skipBuf</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#startOffset">startOffset</a></strong></code>
<div class="block">offset in block where reader wants to actually read</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#verifyChecksum">verifyChecksum</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#RemoteBlockReader2(java.lang.String,%20java.lang.String,%20long,%20org.apache.hadoop.util.DataChecksum,%20boolean,%20long,%20long,%20long,%20org.apache.hadoop.hdfs.net.Peer,%20org.apache.hadoop.hdfs.protocol.DatanodeID,%20org.apache.hadoop.hdfs.PeerCache)">RemoteBlockReader2</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;file,
                                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                    long&nbsp;blockId,
                                    org.apache.hadoop.util.DataChecksum&nbsp;checksum,
                                    boolean&nbsp;verifyChecksum,
                                    long&nbsp;startOffset,
                                    long&nbsp;firstChunkOffset,
                                    long&nbsp;bytesToRead,
                                    <a href="../../../../org/apache/hadoop/hdfs/net/Peer.html" title="interface in org.apache.hadoop.hdfs.net">Peer</a>&nbsp;peer,
                                    <a href="../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;datanodeID,
                                    <a href="../../../../org/apache/hadoop/hdfs/PeerCache.html" title="class in org.apache.hadoop.hdfs">PeerCache</a>&nbsp;peerCache)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#available()">available</a></strong>()</code>
<div class="block">Returns an estimate of the number of bytes that can be read
 (or skipped over) from this input stream without performing
 network I/O.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#checkSuccess(org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.BlockOpResponseProto,%20org.apache.hadoop.hdfs.net.Peer,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20java.lang.String)">checkSuccess</a></strong>(org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.BlockOpResponseProto&nbsp;status,
                        <a href="../../../../org/apache/hadoop/hdfs/net/Peer.html" title="interface in org.apache.hadoop.hdfs.net">Peer</a>&nbsp;peer,
                        <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                        <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#close()">close</a></strong>()</code>
<div class="block">Close the block reader.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/apache/hadoop/hdfs/shortcircuit/ClientMmap.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ClientMmap</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#getClientMmap(java.util.EnumSet)">getClientMmap</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html?is-external=true" title="class or interface in java.util">EnumSet</a>&lt;org.apache.hadoop.fs.ReadOption&gt;&nbsp;opts)</code>
<div class="block">Get a ClientMmap object for this BlockReader.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#getFileName(java.net.InetSocketAddress,%20java.lang.String,%20long)">getFileName</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;s,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;poolId,
                      long&nbsp;blockId)</code>
<div class="block">File name to print when accessing a block directly (from servlets)</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/apache/hadoop/hdfs/net/Peer.html" title="interface in org.apache.hadoop.hdfs.net">Peer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#getPeer()">getPeer</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#isLocal()">isLocal</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#isShortCircuit()">isShortCircuit</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#newBlockReader(java.lang.String,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.security.token.Token,%20long,%20long,%20boolean,%20java.lang.String,%20org.apache.hadoop.hdfs.net.Peer,%20org.apache.hadoop.hdfs.protocol.DatanodeID,%20org.apache.hadoop.hdfs.PeerCache,%20org.apache.hadoop.hdfs.server.datanode.CachingStrategy)">newBlockReader</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;file,
                            <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                            org.apache.hadoop.security.token.Token&lt;<a href="../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenIdentifier.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenIdentifier</a>&gt;&nbsp;blockToken,
                            long&nbsp;startOffset,
                            long&nbsp;len,
                            boolean&nbsp;verifyChecksum,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;clientName,
                            <a href="../../../../org/apache/hadoop/hdfs/net/Peer.html" title="interface in org.apache.hadoop.hdfs.net">Peer</a>&nbsp;peer,
                            <a href="../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;datanodeID,
                            <a href="../../../../org/apache/hadoop/hdfs/PeerCache.html" title="class in org.apache.hadoop.hdfs">PeerCache</a>&nbsp;peerCache,
                            <a href="../../../../org/apache/hadoop/hdfs/server/datanode/CachingStrategy.html" title="class in org.apache.hadoop.hdfs.server.datanode">CachingStrategy</a>&nbsp;cachingStrategy)</code>
<div class="block">Create a new BlockReader specifically to satisfy a read.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#read(byte[],%20int,%20int)">read</a></strong>(byte[]&nbsp;buf,
        int&nbsp;off,
        int&nbsp;len)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#read(java.nio.ByteBuffer)">read</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#readAll(byte[],%20int,%20int)">readAll</a></strong>(byte[]&nbsp;buf,
              int&nbsp;offset,
              int&nbsp;len)</code>
<div class="block">Similar to <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)"><code>BlockReader.readFully(byte[], int, int)</code></a> except that it will
 not throw an exception on EOF.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#readFully(byte[],%20int,%20int)">readFully</a></strong>(byte[]&nbsp;buf,
                  int&nbsp;off,
                  int&nbsp;len)</code>
<div class="block">Read exactly the given amount of data, throwing an exception
 if EOF is reached before that amount</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#readNextPacket()">readNextPacket</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#readTrailingEmptyPacket()">readTrailingEmptyPacket</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#sendReadResult(org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.Status)">sendReadResult</a></strong>(org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.Status&nbsp;statusCode)</code>
<div class="block">When the reader reaches end of the read, it sends a status response
 (e.g.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#skip(long)">skip</a></strong>(long&nbsp;n)</code>
<div class="block">Skip the given number of bytes</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader2.html#writeReadResult(java.io.OutputStream,%20org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.Status)">writeReadResult</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</a>&nbsp;out,
                              org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.Status&nbsp;statusCode)</code>
<div class="block">Serialize the actual read result on the wire.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>static final&nbsp;org.apache.commons.logging.Log <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.88">LOG</a></pre>
</li>
</ul>
<a name="peer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>peer</h4>
<pre>private final&nbsp;<a href="../../../../org/apache/hadoop/hdfs/net/Peer.html" title="interface in org.apache.hadoop.hdfs.net">Peer</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.90">peer</a></pre>
</li>
</ul>
<a name="datanodeID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>datanodeID</h4>
<pre>private final&nbsp;<a href="../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.91">datanodeID</a></pre>
</li>
</ul>
<a name="peerCache">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>peerCache</h4>
<pre>private final&nbsp;<a href="../../../../org/apache/hadoop/hdfs/PeerCache.html" title="class in org.apache.hadoop.hdfs">PeerCache</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.92">peerCache</a></pre>
</li>
</ul>
<a name="blockId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockId</h4>
<pre>private final&nbsp;long <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.93">blockId</a></pre>
</li>
</ul>
<a name="in">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>in</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/ReadableByteChannel.html?is-external=true" title="class or interface in java.nio.channels">ReadableByteChannel</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.94">in</a></pre>
</li>
</ul>
<a name="checksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksum</h4>
<pre>private&nbsp;org.apache.hadoop.util.DataChecksum <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.95">checksum</a></pre>
</li>
</ul>
<a name="packetReceiver">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>packetReceiver</h4>
<pre>private final&nbsp;<a href="../../../../org/apache/hadoop/hdfs/protocol/datatransfer/PacketReceiver.html" title="class in org.apache.hadoop.hdfs.protocol.datatransfer">PacketReceiver</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.97">packetReceiver</a></pre>
</li>
</ul>
<a name="curDataSlice">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>curDataSlice</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.98">curDataSlice</a></pre>
</li>
</ul>
<a name="lastSeqNo">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastSeqNo</h4>
<pre>private&nbsp;long <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.101">lastSeqNo</a></pre>
<div class="block">offset in block of the last chunk received</div>
</li>
</ul>
<a name="startOffset">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startOffset</h4>
<pre>private&nbsp;long <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.104">startOffset</a></pre>
<div class="block">offset in block where reader wants to actually read</div>
</li>
</ul>
<a name="filename">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filename</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.105">filename</a></pre>
</li>
</ul>
<a name="bytesPerChecksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bytesPerChecksum</h4>
<pre>private final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.107">bytesPerChecksum</a></pre>
</li>
</ul>
<a name="checksumSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksumSize</h4>
<pre>private final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.108">checksumSize</a></pre>
</li>
</ul>
<a name="bytesNeededToFinish">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bytesNeededToFinish</h4>
<pre>private&nbsp;long <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.115">bytesNeededToFinish</a></pre>
<div class="block">The total number of bytes we need to transfer from the DN.
 This is the amount that the user has requested plus some padding
 at the beginning so that the read can begin on a chunk boundary.</div>
</li>
</ul>
<a name="isLocal">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLocal</h4>
<pre>private final&nbsp;boolean <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.120">isLocal</a></pre>
<div class="block">True if we are reading from a local DataNode.</div>
</li>
</ul>
<a name="verifyChecksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyChecksum</h4>
<pre>private final&nbsp;boolean <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.122">verifyChecksum</a></pre>
</li>
</ul>
<a name="sentStatusCode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sentStatusCode</h4>
<pre>private&nbsp;boolean <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.124">sentStatusCode</a></pre>
</li>
</ul>
<a name="skipBuf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>skipBuf</h4>
<pre>byte[] <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.126">skipBuf</a></pre>
</li>
</ul>
<a name="checksumBytes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksumBytes</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.127">checksumBytes</a></pre>
</li>
</ul>
<a name="dataLeft">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>dataLeft</h4>
<pre>int <a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.129">dataLeft</a></pre>
<div class="block">Amount of unread data in the current received packet</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RemoteBlockReader2(java.lang.String, java.lang.String, long, org.apache.hadoop.util.DataChecksum, boolean, long, long, long, org.apache.hadoop.hdfs.net.Peer, org.apache.hadoop.hdfs.protocol.DatanodeID, org.apache.hadoop.hdfs.PeerCache)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RemoteBlockReader2</h4>
<pre>protected&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.292">RemoteBlockReader2</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;file,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                  long&nbsp;blockId,
                  org.apache.hadoop.util.DataChecksum&nbsp;checksum,
                  boolean&nbsp;verifyChecksum,
                  long&nbsp;startOffset,
                  long&nbsp;firstChunkOffset,
                  long&nbsp;bytesToRead,
                  <a href="../../../../org/apache/hadoop/hdfs/net/Peer.html" title="interface in org.apache.hadoop.hdfs.net">Peer</a>&nbsp;peer,
                  <a href="../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;datanodeID,
                  <a href="../../../../org/apache/hadoop/hdfs/PeerCache.html" title="class in org.apache.hadoop.hdfs">PeerCache</a>&nbsp;peerCache)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getPeer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPeer</h4>
<pre>public&nbsp;<a href="../../../../org/apache/hadoop/hdfs/net/Peer.html" title="interface in org.apache.hadoop.hdfs.net">Peer</a>&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.132">getPeer</a>()</pre>
</li>
</ul>
<a name="read(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.137">read</a>(byte[]&nbsp;buf,
       int&nbsp;off,
       int&nbsp;len)
         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#read(byte[],%20int,%20int)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="read(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.175">read</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)
         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>read</code>&nbsp;in interface&nbsp;<code>org.apache.hadoop.fs.ByteBufferReadable</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readNextPacket()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readNextPacket</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.199">readNextPacket</a>()
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="skip(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>skip</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.258">skip</a>(long&nbsp;n)
          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#skip(long)">BlockReader</a></code></strong></div>
<div class="block">Skip the given number of bytes</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#skip(long)">skip</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readTrailingEmptyPacket()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readTrailingEmptyPacket</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.277">readTrailingEmptyPacket</a>()
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.320">close</a>()
           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#close()">BlockReader</a></code></strong></div>
<div class="block">Close the block reader.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="sendReadResult(org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.Status)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendReadResult</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.339">sendReadResult</a>(org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.Status&nbsp;statusCode)</pre>
<div class="block">When the reader reaches end of the read, it sends a status response
 (e.g. CHECKSUM_OK) to the DN. Failure to do so could lead to the DN
 closing our connection (which we will re-open), but won't affect
 data correctness.</div>
</li>
</ul>
<a name="writeReadResult(java.io.OutputStream, org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.Status)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeReadResult</h4>
<pre>static&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.354">writeReadResult</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</a>&nbsp;out,
                   org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.Status&nbsp;statusCode)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Serialize the actual read result on the wire.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getFileName(java.net.InetSocketAddress, java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFileName</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.372">getFileName</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;s,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;poolId,
                 long&nbsp;blockId)</pre>
<div class="block">File name to print when accessing a block directly (from servlets)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>s</code> - Address of the block location</dd><dd><code>poolId</code> - Block pool ID of the block</dd><dd><code>blockId</code> - Block ID of the block</dd>
<dt><span class="strong">Returns:</span></dt><dd>string that has a file name for debug purposes</dd></dl>
</li>
</ul>
<a name="readAll(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readAll</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.378">readAll</a>(byte[]&nbsp;buf,
          int&nbsp;offset,
          int&nbsp;len)
            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readAll(byte[],%20int,%20int)">BlockReader</a></code></strong></div>
<div class="block">Similar to <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)"><code>BlockReader.readFully(byte[], int, int)</code></a> except that it will
 not throw an exception on EOF. However, it differs from the simple
 <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#read(byte[],%20int,%20int)"><code>BlockReader.read(byte[], int, int)</code></a> call in that it is guaranteed to
 read the data if it is available. In other words, if this call
 does not throw an exception, then either the buffer has been
 filled or the next call will return EOF.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readAll(byte[],%20int,%20int)">readAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readFully(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFully</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.383">readFully</a>(byte[]&nbsp;buf,
             int&nbsp;off,
             int&nbsp;len)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)">BlockReader</a></code></strong></div>
<div class="block">Read exactly the given amount of data, throwing an exception
 if EOF is reached before that amount</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)">readFully</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="newBlockReader(java.lang.String, org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.security.token.Token, long, long, boolean, java.lang.String, org.apache.hadoop.hdfs.net.Peer, org.apache.hadoop.hdfs.protocol.DatanodeID, org.apache.hadoop.hdfs.PeerCache, org.apache.hadoop.hdfs.server.datanode.CachingStrategy)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newBlockReader</h4>
<pre>public static&nbsp;<a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a>&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.402">newBlockReader</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;file,
                         <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                         org.apache.hadoop.security.token.Token&lt;<a href="../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenIdentifier.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenIdentifier</a>&gt;&nbsp;blockToken,
                         long&nbsp;startOffset,
                         long&nbsp;len,
                         boolean&nbsp;verifyChecksum,
                         <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;clientName,
                         <a href="../../../../org/apache/hadoop/hdfs/net/Peer.html" title="interface in org.apache.hadoop.hdfs.net">Peer</a>&nbsp;peer,
                         <a href="../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;datanodeID,
                         <a href="../../../../org/apache/hadoop/hdfs/PeerCache.html" title="class in org.apache.hadoop.hdfs">PeerCache</a>&nbsp;peerCache,
                         <a href="../../../../org/apache/hadoop/hdfs/server/datanode/CachingStrategy.html" title="class in org.apache.hadoop.hdfs.server.datanode">CachingStrategy</a>&nbsp;cachingStrategy)
                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create a new BlockReader specifically to satisfy a read.
 This method also sends the OP_READ_BLOCK request.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>file</code> - File location</dd><dd><code>block</code> - The block object</dd><dd><code>blockToken</code> - The block token for security</dd><dd><code>startOffset</code> - The read offset, relative to block head</dd><dd><code>len</code> - The number of bytes to read</dd><dd><code>verifyChecksum</code> - Whether to verify checksum</dd><dd><code>clientName</code> - Client name</dd><dd><code>peer</code> - The Peer to use</dd><dd><code>datanodeID</code> - The DatanodeID this peer is connected to</dd>
<dt><span class="strong">Returns:</span></dt><dd>New BlockReader instance, or null on error.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="checkSuccess(org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.BlockOpResponseProto, org.apache.hadoop.hdfs.net.Peer, org.apache.hadoop.hdfs.protocol.ExtendedBlock, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkSuccess</h4>
<pre>static&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.446">checkSuccess</a>(org.apache.hadoop.hdfs.protocol.proto.DataTransferProtos.BlockOpResponseProto&nbsp;status,
                <a href="../../../../org/apache/hadoop/hdfs/net/Peer.html" title="interface in org.apache.hadoop.hdfs.net">Peer</a>&nbsp;peer,
                <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;file)
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="available()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>available</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.460">available</a>()
              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#available()">BlockReader</a></code></strong></div>
<div class="block">Returns an estimate of the number of bytes that can be read
 (or skipped over) from this input stream without performing
 network I/O.
 This may return more than what is actually present in the block.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#available()">available</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="isLocal()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLocal</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.467">isLocal</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#isLocal()">isLocal</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true only if this is a local read.</dd></dl>
</li>
</ul>
<a name="isShortCircuit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isShortCircuit</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.472">isShortCircuit</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#isShortCircuit()">isShortCircuit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true only if this is a short-circuit read.
                      All short-circuit reads are also local.</dd></dl>
</li>
</ul>
<a name="getClientMmap(java.util.EnumSet)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getClientMmap</h4>
<pre>public&nbsp;<a href="../../../../org/apache/hadoop/hdfs/shortcircuit/ClientMmap.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ClientMmap</a>&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/RemoteBlockReader2.html#line.477">getClientMmap</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html?is-external=true" title="class or interface in java.util">EnumSet</a>&lt;org.apache.hadoop.fs.ReadOption&gt;&nbsp;opts)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#getClientMmap(java.util.EnumSet)">BlockReader</a></code></strong></div>
<div class="block">Get a ClientMmap object for this BlockReader.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#getClientMmap(java.util.EnumSet)">getClientMmap</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>opts</code> - The read options to use.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The ClientMmap object, or null if mmap is not
                      supported.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RemoteBlockReader2.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/hadoop/hdfs/RemoteBlockReader.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/hadoop/hdfs/RemotePeerFactory.html" title="interface in org.apache.hadoop.hdfs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/hdfs/RemoteBlockReader2.html" target="_top">Frames</a></li>
<li><a href="RemoteBlockReader2.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
