<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:40:46 EDT 2015 -->
<title>Dispatcher.Source</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Dispatcher.Source";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Dispatcher.Source.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.PendingMove.html" title="class in org.apache.hadoop.hdfs.server.balancer"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.StorageGroupMap.html" title="class in org.apache.hadoop.hdfs.server.balancer"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html" target="_top">Frames</a></li>
<li><a href="Dispatcher.Source.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.balancer</div>
<h2 title="Class Dispatcher.Source" class="title">Class Dispatcher.Source</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html" title="class in org.apache.hadoop.hdfs.server.balancer">org.apache.hadoop.hdfs.server.balancer.Dispatcher.DDatanode.StorageGroup</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.balancer.Dispatcher.Source</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">Dispatcher.Source</span>
extends <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DDatanode.StorageGroup</a></pre>
<div class="block">A node that can be the sources of a block move</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#blocksToReceive">blocksToReceive</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#MAX_ITERATION_TIME">MAX_ITERATION_TIME</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#SOURCE_BLOCKS_MIN_SIZE">SOURCE_BLOCKS_MIN_SIZE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DBlock.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DBlock</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#srcBlocks">srcBlocks</a></strong></code>
<div class="block">Source blocks point to the objects in <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.html#globalBlocks"><code>Dispatcher.globalBlocks</code></a>
 because we want to keep one copy of a block and be aware that the
 locations are changing over time.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Task.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.Task</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#tasks">tasks</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.hadoop.hdfs.server.balancer.Dispatcher.DDatanode.StorageGroup">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.hadoop.hdfs.server.balancer.<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DDatanode.StorageGroup</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#maxSize2Move">maxSize2Move</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#storageType">storageType</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#Dispatcher.Source(org.apache.hadoop.fs.StorageType,%20long,%20org.apache.hadoop.hdfs.server.balancer.Dispatcher.DDatanode)">Dispatcher.Source</a></strong>(org.apache.hadoop.fs.StorageType&nbsp;storageType,
                 long&nbsp;maxSize2Move,
                 <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DDatanode</a>&nbsp;dn)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.PendingMove.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.PendingMove</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#addPendingMove(org.apache.hadoop.hdfs.server.balancer.Dispatcher.DBlock,%20org.apache.hadoop.hdfs.server.balancer.Dispatcher.DDatanode.StorageGroup)">addPendingMove</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DBlock.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DBlock</a>&nbsp;block,
              <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DDatanode.StorageGroup</a>&nbsp;target)</code>
<div class="block">Add a pending move</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#addTask(org.apache.hadoop.hdfs.server.balancer.Dispatcher.Task)">addTask</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Task.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.Task</a>&nbsp;task)</code>
<div class="block">Add a task</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.PendingMove.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.PendingMove</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#chooseNextMove()">chooseNextMove</a></strong>()</code>
<div class="block">Choose a move for the source.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#dispatchBlocks()">dispatchBlocks</a></strong>()</code>
<div class="block">This method iteratively does the following: it first selects a block to
 move, then sends a request to the proxy source to start the block move
 when the source's block list falls below a threshold, it asks the
 namenode for more blocks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DBlock.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DBlock</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#getBlockIterator()">getBlockIterator</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#getBlockList()">getBlockList</a></strong>()</code>
<div class="block">Fetch new blocks of this source from namenode and update this source's
 block list & <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.html#globalBlocks"><code>Dispatcher.globalBlocks</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#isGoodBlockCandidate(org.apache.hadoop.hdfs.server.balancer.Dispatcher.DBlock)">isGoodBlockCandidate</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DBlock.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DBlock</a>&nbsp;block)</code>
<div class="block">Decide if the given block is a good candidate to move or not</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#removeMovedBlocks()">removeMovedBlocks</a></strong>()</code>
<div class="block">Iterate all source's blocks to remove moved ones</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html#shouldFetchMoreBlocks()">shouldFetchMoreBlocks</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.hadoop.hdfs.server.balancer.Dispatcher.DDatanode.StorageGroup">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.hadoop.hdfs.server.balancer.<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DDatanode.StorageGroup</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#availableSizeToMove()">availableSizeToMove</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#getDatanodeInfo()">getDatanodeInfo</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#getDisplayName()">getDisplayName</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#getScheduledSize()">getScheduledSize</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#getStorageType()">getStorageType</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#hasSpaceForScheduling()">hasSpaceForScheduling</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#hasSpaceForScheduling(long)">hasSpaceForScheduling</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#incScheduledSize(long)">incScheduledSize</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#resetScheduledSize()">resetScheduledSize</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html#toString()">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="tasks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tasks</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Task.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.Task</a>&gt; tasks</pre>
</li>
</ul>
<a name="blocksToReceive">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blocksToReceive</h4>
<pre>private&nbsp;long blocksToReceive</pre>
</li>
</ul>
<a name="srcBlocks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>srcBlocks</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DBlock.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DBlock</a>&gt; srcBlocks</pre>
<div class="block">Source blocks point to the objects in <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.html#globalBlocks"><code>Dispatcher.globalBlocks</code></a>
 because we want to keep one copy of a block and be aware that the
 locations are changing over time.</div>
</li>
</ul>
<a name="SOURCE_BLOCKS_MIN_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SOURCE_BLOCKS_MIN_SIZE</h4>
<pre>private static final&nbsp;int SOURCE_BLOCKS_MIN_SIZE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.balancer.Dispatcher.Source.SOURCE_BLOCKS_MIN_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MAX_ITERATION_TIME">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MAX_ITERATION_TIME</h4>
<pre>private static final&nbsp;long MAX_ITERATION_TIME</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.balancer.Dispatcher.Source.MAX_ITERATION_TIME">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Dispatcher.Source(org.apache.hadoop.fs.StorageType, long, org.apache.hadoop.hdfs.server.balancer.Dispatcher.DDatanode)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Dispatcher.Source</h4>
<pre>private&nbsp;Dispatcher.Source(org.apache.hadoop.fs.StorageType&nbsp;storageType,
                 long&nbsp;maxSize2Move,
                 <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DDatanode</a>&nbsp;dn)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="addTask(org.apache.hadoop.hdfs.server.balancer.Dispatcher.Task)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTask</h4>
<pre>void&nbsp;addTask(<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.Task.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.Task</a>&nbsp;task)</pre>
<div class="block">Add a task</div>
</li>
</ul>
<a name="getBlockIterator()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockIterator</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DBlock.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DBlock</a>&gt;&nbsp;getBlockIterator()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>an iterator to this source's blocks</dd></dl>
</li>
</ul>
<a name="getBlockList()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockList</h4>
<pre>private&nbsp;long&nbsp;getBlockList()
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Fetch new blocks of this source from namenode and update this source's
 block list & <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.html#globalBlocks"><code>Dispatcher.globalBlocks</code></a>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the total size of the received blocks in the number of bytes.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="isGoodBlockCandidate(org.apache.hadoop.hdfs.server.balancer.Dispatcher.DBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isGoodBlockCandidate</h4>
<pre>private&nbsp;boolean&nbsp;isGoodBlockCandidate(<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DBlock.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DBlock</a>&nbsp;block)</pre>
<div class="block">Decide if the given block is a good candidate to move or not</div>
</li>
</ul>
<a name="chooseNextMove()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chooseNextMove</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.PendingMove.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.PendingMove</a>&nbsp;chooseNextMove()</pre>
<div class="block">Choose a move for the source. The block's source, target, and proxy
 are determined too. When choosing proxy and target, source &
 target throttling has been considered. They are chosen only when they
 have the capacity to support this block move. The block should be
 dispatched immediately after this method is returned.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a move that's good for the source to dispatch immediately.</dd></dl>
</li>
</ul>
<a name="addPendingMove(org.apache.hadoop.hdfs.server.balancer.Dispatcher.DBlock, org.apache.hadoop.hdfs.server.balancer.Dispatcher.DDatanode.StorageGroup)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addPendingMove</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.PendingMove.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.PendingMove</a>&nbsp;addPendingMove(<a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DBlock.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DBlock</a>&nbsp;block,
                                    <a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.DDatanode.StorageGroup.html" title="class in org.apache.hadoop.hdfs.server.balancer">Dispatcher.DDatanode.StorageGroup</a>&nbsp;target)</pre>
<div class="block">Add a pending move</div>
</li>
</ul>
<a name="removeMovedBlocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeMovedBlocks</h4>
<pre>private&nbsp;void&nbsp;removeMovedBlocks()</pre>
<div class="block">Iterate all source's blocks to remove moved ones</div>
</li>
</ul>
<a name="shouldFetchMoreBlocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldFetchMoreBlocks</h4>
<pre>private&nbsp;boolean&nbsp;shouldFetchMoreBlocks()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>if should fetch more blocks from namenode</dd></dl>
</li>
</ul>
<a name="dispatchBlocks()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>dispatchBlocks</h4>
<pre>private&nbsp;void&nbsp;dispatchBlocks()</pre>
<div class="block">This method iteratively does the following: it first selects a block to
 move, then sends a request to the proxy source to start the block move
 when the source's block list falls below a threshold, it asks the
 namenode for more blocks. It terminates when it has dispatch enough block
 move tasks or it has received enough blocks from the namenode, or the
 elapsed time of the iteration has exceeded the max time limit.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Dispatcher.Source.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.PendingMove.html" title="class in org.apache.hadoop.hdfs.server.balancer"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/balancer/Dispatcher.StorageGroupMap.html" title="class in org.apache.hadoop.hdfs.server.balancer"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/balancer/Dispatcher.Source.html" target="_top">Frames</a></li>
<li><a href="Dispatcher.Source.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
