<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:53:39 EDT 2015 -->
<title>HeartbeatManager</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="HeartbeatManager";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HeartbeatManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/FSClusterStats.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.Monitor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html" target="_top">Frames</a></li>
<li><a href="HeartbeatManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.blockmanagement</div>
<h2 title="Class HeartbeatManager" class="title">Class HeartbeatManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.blockmanagement.HeartbeatManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></dd>
</dl>
<hr>
<br>
<pre> class <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.40">HeartbeatManager</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></pre>
<div class="block">Manage the heartbeats received from datanodes.
 The datanode list and statistics are synchronized
 by the heartbeat manager lock.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.Monitor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">HeartbeatManager.Monitor</a></strong></code>
<div class="block">Periodically check heartbeat and update block key</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.Stats.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">HeartbeatManager.Stats</a></strong></code>
<div class="block">Datanode statistics.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#blockManager">blockManager</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#datanodes">datanodes</a></strong></code>
<div class="block">Stores a subset of the datanodeMap in DatanodeManager,
 containing nodes that are considered alive.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#heartbeatRecheckInterval">heartbeatRecheckInterval</a></strong></code>
<div class="block">The time period to check for expired datanodes</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.hadoop.util.Daemon</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#heartbeatThread">heartbeatThread</a></strong></code>
<div class="block">Heartbeat monitor thread</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/Namesystem.html" title="interface in org.apache.hadoop.hdfs.server.namenode">Namesystem</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#namesystem">namesystem</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.Stats.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">HeartbeatManager.Stats</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#stats">stats</a></strong></code>
<div class="block">Statistics, which are synchronized by the heartbeat manager lock.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#HeartbeatManager(org.apache.hadoop.hdfs.server.namenode.Namesystem,%20org.apache.hadoop.hdfs.server.blockmanagement.BlockManager,%20org.apache.hadoop.conf.Configuration)">HeartbeatManager</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/Namesystem.html" title="interface in org.apache.hadoop.hdfs.server.namenode">Namesystem</a>&nbsp;namesystem,
                                <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager</a>&nbsp;blockManager,
                                org.apache.hadoop.conf.Configuration&nbsp;conf)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#activate(org.apache.hadoop.conf.Configuration)">activate</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#addDatanode(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">addDatanode</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;d)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#close()">close</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getBlockPoolUsed()">getBlockPoolUsed</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getCacheCapacity()">getCacheCapacity</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getCacheUsed()">getCacheUsed</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getCapacityRemaining()">getCapacityRemaining</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>float</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getCapacityRemainingPercent()">getCapacityRemainingPercent</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getCapacityTotal()">getCapacityTotal</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getCapacityUsed()">getCapacityUsed</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getCapacityUsedNonDFS()">getCapacityUsedNonDFS</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>float</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getCapacityUsedPercent()">getCapacityUsedPercent</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getDatanodes()">getDatanodes</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getExpiredHeartbeats()">getExpiredHeartbeats</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getInServiceXceiverCount()">getInServiceXceiverCount</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getLiveDatanodeCount()">getLiveDatanodeCount</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getNumDatanodesInService()">getNumDatanodesInService</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>float</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getPercentBlockPoolUsed()">getPercentBlockPoolUsed</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getStats()">getStats</a></strong>()</code>
<div class="block">The same as <a href="../../../../../../org/apache/hadoop/hdfs/protocol/ClientProtocol.html#getStats()"><code>ClientProtocol.getStats()</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#getXceiverCount()">getXceiverCount</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#heartbeatCheck()">heartbeatCheck</a></strong>()</code>
<div class="block">Check if there are any expired heartbeats, and if so,
 whether any blocks have to be re-replicated.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#register(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">register</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;d)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#removeDatanode(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">removeDatanode</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#startDecommission(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">startDecommission</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#stopDecommission(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">stopDecommission</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#updateHeartbeat(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor,%20org.apache.hadoop.hdfs.server.protocol.StorageReport[],%20long,%20long,%20int,%20int,%20org.apache.hadoop.hdfs.server.protocol.VolumeFailureSummary)">updateHeartbeat</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/StorageReport.html" title="class in org.apache.hadoop.hdfs.server.protocol">StorageReport</a>[]&nbsp;reports,
                              long&nbsp;cacheCapacity,
                              long&nbsp;cacheUsed,
                              int&nbsp;xceiverCount,
                              int&nbsp;failedVolumes,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/VolumeFailureSummary.html" title="class in org.apache.hadoop.hdfs.server.protocol">VolumeFailureSummary</a>&nbsp;volumeFailureSummary)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>static final&nbsp;org.apache.commons.logging.Log <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.41">LOG</a></pre>
</li>
</ul>
<a name="datanodes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>datanodes</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.50">datanodes</a></pre>
<div class="block">Stores a subset of the datanodeMap in DatanodeManager,
 containing nodes that are considered alive.
 The HeartbeatMonitor periodically checks for out-dated entries,
 and removes them from the list.
 It is synchronized by the heartbeat manager lock.</div>
</li>
</ul>
<a name="stats">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stats</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.Stats.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">HeartbeatManager.Stats</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.53">stats</a></pre>
<div class="block">Statistics, which are synchronized by the heartbeat manager lock.</div>
</li>
</ul>
<a name="heartbeatRecheckInterval">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heartbeatRecheckInterval</h4>
<pre>private final&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.56">heartbeatRecheckInterval</a></pre>
<div class="block">The time period to check for expired datanodes</div>
</li>
</ul>
<a name="heartbeatThread">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heartbeatThread</h4>
<pre>private final&nbsp;org.apache.hadoop.util.Daemon <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.58">heartbeatThread</a></pre>
<div class="block">Heartbeat monitor thread</div>
</li>
</ul>
<a name="namesystem">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>namesystem</h4>
<pre>final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/Namesystem.html" title="interface in org.apache.hadoop.hdfs.server.namenode">Namesystem</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.61">namesystem</a></pre>
</li>
</ul>
<a name="blockManager">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>blockManager</h4>
<pre>final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.62">blockManager</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="HeartbeatManager(org.apache.hadoop.hdfs.server.namenode.Namesystem, org.apache.hadoop.hdfs.server.blockmanagement.BlockManager, org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HeartbeatManager</h4>
<pre><a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.64">HeartbeatManager</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/Namesystem.html" title="interface in org.apache.hadoop.hdfs.server.namenode">Namesystem</a>&nbsp;namesystem,
                <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager</a>&nbsp;blockManager,
                org.apache.hadoop.conf.Configuration&nbsp;conf)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="activate(org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>activate</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.89">activate</a>(org.apache.hadoop.conf.Configuration&nbsp;conf)</pre>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.93">close</a>()</pre>
</li>
</ul>
<a name="getLiveDatanodeCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLiveDatanodeCount</h4>
<pre>int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.102">getLiveDatanodeCount</a>()</pre>
</li>
</ul>
<a name="getCapacityTotal()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCapacityTotal</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.107">getCapacityTotal</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getCapacityTotal()">getCapacityTotal</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the total capacity</dd></dl>
</li>
</ul>
<a name="getCapacityUsed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCapacityUsed</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.112">getCapacityUsed</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getCapacityUsed()">getCapacityUsed</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the used capacity</dd></dl>
</li>
</ul>
<a name="getCapacityUsedPercent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCapacityUsedPercent</h4>
<pre>public&nbsp;float&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.117">getCapacityUsedPercent</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getCapacityUsedPercent()">getCapacityUsedPercent</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the percentage of the used capacity over the total capacity.</dd></dl>
</li>
</ul>
<a name="getCapacityRemaining()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCapacityRemaining</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.122">getCapacityRemaining</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getCapacityRemaining()">getCapacityRemaining</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the remaining capacity</dd></dl>
</li>
</ul>
<a name="getCapacityRemainingPercent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCapacityRemainingPercent</h4>
<pre>public&nbsp;float&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.127">getCapacityRemainingPercent</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getCapacityRemainingPercent()">getCapacityRemainingPercent</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the percentage of the remaining capacity over the total capacity.</dd></dl>
</li>
</ul>
<a name="getBlockPoolUsed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockPoolUsed</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.133">getBlockPoolUsed</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getBlockPoolUsed()">getBlockPoolUsed</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the block pool used.</dd></dl>
</li>
</ul>
<a name="getPercentBlockPoolUsed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPercentBlockPoolUsed</h4>
<pre>public&nbsp;float&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.138">getPercentBlockPoolUsed</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getPercentBlockPoolUsed()">getPercentBlockPoolUsed</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the percentage of the block pool used space over the total capacity.</dd></dl>
</li>
</ul>
<a name="getCapacityUsedNonDFS()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCapacityUsedNonDFS</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.143">getCapacityUsedNonDFS</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getCapacityUsedNonDFS()">getCapacityUsedNonDFS</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the total used space by data nodes for non-DFS purposes
 such as storing temporary files on the local file system</dd></dl>
</li>
</ul>
<a name="getXceiverCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getXceiverCount</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.150">getXceiverCount</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getXceiverCount()">getXceiverCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the xceiver count</dd></dl>
</li>
</ul>
<a name="getInServiceXceiverCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInServiceXceiverCount</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.155">getInServiceXceiverCount</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getInServiceXceiverCount()">getInServiceXceiverCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>average xceiver count for non-decommission(ing|ed) nodes</dd></dl>
</li>
</ul>
<a name="getNumDatanodesInService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumDatanodesInService</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.160">getNumDatanodesInService</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getNumDatanodesInService()">getNumDatanodesInService</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>number of non-decommission(ing|ed) nodes</dd></dl>
</li>
</ul>
<a name="getCacheCapacity()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCacheCapacity</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.165">getCacheCapacity</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getCacheCapacity()">getCacheCapacity</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the total cache capacity of all DataNodes</dd></dl>
</li>
</ul>
<a name="getCacheUsed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCacheUsed</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.170">getCacheUsed</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getCacheUsed()">getCacheUsed</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the total cache used by all DataNodes</dd></dl>
</li>
</ul>
<a name="getStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStats</h4>
<pre>public&nbsp;long[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.176">getStats</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getStats()">DatanodeStatistics</a></code></strong></div>
<div class="block">The same as <a href="../../../../../../org/apache/hadoop/hdfs/protocol/ClientProtocol.html#getStats()"><code>ClientProtocol.getStats()</code></a>.
 The block related entries are set to -1.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getStats()">getStats</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
</dl>
</li>
</ul>
<a name="getExpiredHeartbeats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExpiredHeartbeats</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.187">getExpiredHeartbeats</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html#getExpiredHeartbeats()">getExpiredHeartbeats</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStatistics.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStatistics</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the expired heartbeats</dd></dl>
</li>
</ul>
<a name="register(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>register</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.191">register</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;d)</pre>
</li>
</ul>
<a name="getDatanodes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDatanodes</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.200">getDatanodes</a>()</pre>
</li>
</ul>
<a name="addDatanode(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addDatanode</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.204">addDatanode</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;d)</pre>
</li>
</ul>
<a name="removeDatanode(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeDatanode</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.211">removeDatanode</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</pre>
</li>
</ul>
<a name="updateHeartbeat(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, org.apache.hadoop.hdfs.server.protocol.StorageReport[], long, long, int, int, org.apache.hadoop.hdfs.server.protocol.VolumeFailureSummary)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateHeartbeat</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.219">updateHeartbeat</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node,
                   <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/StorageReport.html" title="class in org.apache.hadoop.hdfs.server.protocol">StorageReport</a>[]&nbsp;reports,
                   long&nbsp;cacheCapacity,
                   long&nbsp;cacheUsed,
                   int&nbsp;xceiverCount,
                   int&nbsp;failedVolumes,
                   <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/VolumeFailureSummary.html" title="class in org.apache.hadoop.hdfs.server.protocol">VolumeFailureSummary</a>&nbsp;volumeFailureSummary)</pre>
</li>
</ul>
<a name="startDecommission(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startDecommission</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.229">startDecommission</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</pre>
</li>
</ul>
<a name="stopDecommission(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopDecommission</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.235">stopDecommission</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</pre>
</li>
</ul>
<a name="heartbeatCheck()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>heartbeatCheck</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html#line.267">heartbeatCheck</a>()</pre>
<div class="block">Check if there are any expired heartbeats, and if so,
 whether any blocks have to be re-replicated.
 While removing dead datanodes, make sure that only one datanode is marked
 dead at a time within the synchronized section. Otherwise, a cascading
 effect causes more datanodes to be declared dead.
 Check if there are any failed storage and if so,
 Remove all the blocks on the storage. It also covers the following less
 common scenarios. After DatanodeStorage is marked FAILED, it is still
 possible to receive IBR for this storage.
 1) DN could deliver IBR for failed storage due to its implementation.
    a) DN queues a pending IBR request.
    b) The storage of the block fails.
    c) DN first sends HB, NN will mark the storage FAILED.
    d) DN then sends the pending IBR request.
 2) SBN processes block request from pendingDNMessages.
    It is possible to have messages in pendingDNMessages that refer
    to some failed storage.
    a) SBN receives a IBR and put it in pendingDNMessages.
    b) The storage of the block fails.
    c) Edit log replay get the IBR from pendingDNMessages.
 Alternatively, we can resolve these scenarios with the following approaches.
 A. Make sure DN don't deliver IBR for failed storage.
 B. Remove all blocks in PendingDataNodeMessages for the failed storage
    when we remove all blocks from BlocksMap for that storage.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HeartbeatManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/FSClusterStats.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.Monitor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html" target="_top">Frames</a></li>
<li><a href="HeartbeatManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
