<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:53:38 EDT 2015 -->
<title>BlockManager</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BlockManager";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlockManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguousUnderConstruction.ReplicaUnderConstruction.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html" target="_top">Frames</a></li>
<li><a href="BlockManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.blockmanagement</div>
<h2 title="Class BlockManager" class="title">Class BlockManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.blockmanagement.BlockManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@InterfaceAudience.Private
public class <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.98">BlockManager</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Keeps information related to the blocks stored in the Hadoop cluster.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a></strong></code>
<div class="block">BlockToMarkCorrupt is used to build the "toCorrupt" list, which is a
 list of blocks that should be considered corrupt due to a block report.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.MisReplicationResult.html" title="enum in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.MisReplicationResult</a></strong></code>
<div class="block">A simple result enum for the result of
 <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processMisReplicatedBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)"><code>processMisReplicatedBlock(BlockInfoContiguous)</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.ReplicationMonitor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.ReplicationMonitor</a></strong></code>
<div class="block">Periodically calls computeReplicationWork().</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.ReplicationWork.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.ReplicationWork</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.StatefulBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.StatefulBlockInfo</a></strong></code>
<div class="block">StatefulBlockInfo is used to build the "toUC" list, which is a list of
 updates to the information about under-construction blocks.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.slf4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#blockLog">blockLog</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicy.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockPlacementPolicy</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#blockplacement">blockplacement</a></strong></code>
<div class="block">for block replicas placement</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#blocksInvalidateWorkPct">blocksInvalidateWorkPct</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlocksMap.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlocksMap</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#blocksMap">blocksMap</a></strong></code>
<div class="block">Mapping: Block -> { BlockCollection, datanodes, self ref }
 Updated only in response to client-sent information.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#blocksReplWorkMultiplier">blocksReplWorkMultiplier</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#blockTokenSecretManager">blockTokenSecretManager</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#checkNSRunning">checkNSRunning</a></strong></code>
<div class="block">Check whether name system is running before terminating</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#corruptReplicaBlocksCount">corruptReplicaBlocksCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/CorruptReplicasMap.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">CorruptReplicasMap</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#corruptReplicas">corruptReplicas</a></strong></code>
<div class="block">Store blocks -> datanodedescriptor(s) map of corrupt replicas</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeManager.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#datanodeManager">datanodeManager</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#defaultReplication">defaultReplication</a></strong></code>
<div class="block">Default number of replicas</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#encryptDataTransfer">encryptDataTransfer</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicLong</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#excessBlocksCount">excessBlocksCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../../../org/apache/hadoop/hdfs/util/LightWeightLinkedSet.html" title="class in org.apache.hadoop.hdfs.util">LightWeightLinkedSet</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#excessReplicateMap">excessReplicateMap</a></strong></code>
<div class="block">Maps a StorageID to the set of blocks that are "extra" for this
 DataNode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">HeartbeatManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#heartbeatManager">heartbeatManager</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/InvalidateBlocks.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">InvalidateBlocks</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#invalidateBlocks">invalidateBlocks</a></strong></code>
<div class="block">Blocks to be invalidated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.slf4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#maxCorruptFilesReturned">maxCorruptFilesReturned</a></strong></code>
<div class="block">value returned by MAX_CORRUPT_FILES_RETURNED</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#maxNumBlocksToLog">maxNumBlocksToLog</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>short</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#maxReplication">maxReplication</a></strong></code>
<div class="block">The maximum number of replicas allowed for a block</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#maxReplicationStreams">maxReplicationStreams</a></strong></code>
<div class="block">The maximum number of outgoing replication streams a given node should have
 at one time considering all but the highest priority replications needed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>short</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#minReplication">minReplication</a></strong></code>
<div class="block">Minimum copies needed or else write is disallowed</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/Namesystem.html" title="interface in org.apache.hadoop.hdfs.server.namenode">Namesystem</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#namesystem">namesystem</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/UnderReplicatedBlocks.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">UnderReplicatedBlocks</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#neededReplications">neededReplications</a></strong></code>
<div class="block">Store set of Blocks that need to be replicated 1 or more times.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#numBlocksPerIteration">numBlocksPerIteration</a></strong></code>
<div class="block">Number of blocks to process asychronously for replication queues
 initialization once aquired the namesystem lock.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/PendingDataNodeMessages.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">PendingDataNodeMessages</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#pendingDNMessages">pendingDNMessages</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#pendingReplicationBlocksCount">pendingReplicationBlocksCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/PendingReplicationBlocks.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">PendingReplicationBlocks</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#pendingReplications">pendingReplications</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#postponedMisreplicatedBlocks">postponedMisreplicatedBlocks</a></strong></code>
<div class="block">After a failover, over-replicated blocks may not be handled
 until all of the replicas have done a block report to the
 new active.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicLong</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#postponedMisreplicatedBlocksCount">postponedMisreplicatedBlocksCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#QUEUE_REASON_CORRUPT_STATE">QUEUE_REASON_CORRUPT_STATE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#QUEUE_REASON_FUTURE_GENSTAMP">QUEUE_REASON_FUTURE_GENSTAMP</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.hadoop.util.Daemon</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#replicationQueuesInitializer">replicationQueuesInitializer</a></strong></code>
<div class="block">Process replication queues asynchronously to allow namenode safemode exit
 and failover to be faster.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#replicationQueuesInitProgress">replicationQueuesInitProgress</a></strong></code>
<div class="block">Progress of the Replication queues initialisation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#replicationRecheckInterval">replicationRecheckInterval</a></strong></code>
<div class="block">replicationRecheckInterval is how often namenode checks for new replication work</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#replicationStreamsHardLimit">replicationStreamsHardLimit</a></strong></code>
<div class="block">The maximum number of outgoing replication streams a given node should have
 at one time.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) org.apache.hadoop.util.Daemon</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#replicationThread">replicationThread</a></strong></code>
<div class="block">Replication thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#scheduledReplicationBlocksCount">scheduledReplicationBlocksCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#shouldCheckForEnoughRacks">shouldCheckForEnoughRacks</a></strong></code>
<div class="block">variable to enable check for enough racks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#shouldPostponeBlocksFromFuture">shouldPostponeBlocksFromFuture</a></strong></code>
<div class="block">When running inside a Standby node, the node may receive block reports
 from datanodes before receiving the corresponding namespace edits from
 the active NameNode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#startupDelayBlockDeletionInMs">startupDelayBlockDeletionInMs</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#storagePolicySuite">storagePolicySuite</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#underReplicatedBlocksCount">underReplicatedBlocksCount</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#BlockManager(org.apache.hadoop.hdfs.server.namenode.Namesystem,%20org.apache.hadoop.conf.Configuration)">BlockManager</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/Namesystem.html" title="interface in org.apache.hadoop.hdfs.server.namenode">Namesystem</a>&nbsp;namesystem,
                        org.apache.hadoop.conf.Configuration&nbsp;conf)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#activate(org.apache.hadoop.conf.Configuration)">activate</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addBlock(org.apache.hadoop.hdfs.protocol.Block,%20java.util.List)">addBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/BlocksWithLocations.BlockWithLocations.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlocksWithLocations.BlockWithLocations</a>&gt;&nbsp;results)</code>
<div class="block">Get all valid locations of the block & add the block to results
 return the length of the added block; 0 if the block is not added</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addBlock(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.protocol.Block,%20java.lang.String)">addBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;delHint)</code>
<div class="block">The given node is reporting that it received a certain block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addBlockCollection(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection)">addBlockCollection</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block,
                                    <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addKeyUpdateCommand(java.util.List,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">addKeyUpdateCommand</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeCommand</a>&gt;&nbsp;cmds,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;nodeinfo)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addStoredBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor,%20boolean)">addStoredBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block,
                            <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                            <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;delNodeHint,
                            boolean&nbsp;logEveryBlock)</code>
<div class="block">Modify (block-->datanode) map.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addStoredBlockImmediate(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo)">addStoredBlockImmediate</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;storedBlock,
                                              <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo)</code>
<div class="block">Faster version of <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addStoredBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor,%20boolean)"><code>addStoredBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, boolean)</code></a>,
 intended for use with initial block report at startup.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addStoredBlockUnderConstruction(org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.StatefulBlockInfo,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo)">addStoredBlockUnderConstruction</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.StatefulBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.StatefulBlockInfo</a>&nbsp;ucBlock,
                                                              <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addToExcessReplicate(org.apache.hadoop.hdfs.protocol.DatanodeInfo,%20org.apache.hadoop.hdfs.protocol.Block)">addToExcessReplicate</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;dn,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addToInvalidates(org.apache.hadoop.hdfs.protocol.Block)">addToInvalidates</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</code>
<div class="block">Adds block to list of blocks which will be invalidated on all its
 datanodes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addToInvalidates(org.apache.hadoop.hdfs.protocol.Block,%20org.apache.hadoop.hdfs.protocol.DatanodeInfo)">addToInvalidates</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                <a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;datanode)</code>
<div class="block">Adds block to list of blocks which will be invalidated on specified
 datanode and log the operation</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>short</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#adjustReplication(short)">adjustReplication</a></strong>(short&nbsp;replication)</code>
<div class="block">Clamp the specified replication between the minimum and the maximum
 replication levels.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#blockHasEnoughRacks(org.apache.hadoop.hdfs.protocol.Block)">blockHasEnoughRacks</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#checkMinReplication(org.apache.hadoop.hdfs.protocol.Block)">checkMinReplication</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#checkReplicaCorrupt(org.apache.hadoop.hdfs.protocol.Block,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState,%20org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.BlockUCState,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">checkReplicaCorrupt</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;reported,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;reportedState,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;storedBlock,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.BlockUCState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.BlockUCState</a>&nbsp;ucState,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;dn)</code>
<div class="block">The next two methods test the various cases under which we must conclude
 the replica is corrupt, or under construction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#checkReplication(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection)">checkReplication</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc)</code>
<div class="block">Check replication of the blocks in the collection.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#chooseExcessReplicates(java.util.Collection,%20org.apache.hadoop.hdfs.protocol.Block,%20short,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor,%20org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy)">chooseExcessReplicates</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;&nbsp;nonExcess,
                                            <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b,
                                            short&nbsp;replication,
                                            <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;addedNode,
                                            <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;delNodeHint,
                                            <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicy.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockPlacementPolicy</a>&nbsp;replicator)</code>
<div class="block">We want "replication" replicates for the block, but we now have too many.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#chooseSourceDatanode(org.apache.hadoop.hdfs.protocol.Block,%20java.util.List,%20java.util.List,%20org.apache.hadoop.hdfs.server.blockmanagement.NumberReplicas,%20int)">chooseSourceDatanode</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&gt;&nbsp;containingNodes,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;&nbsp;nodesContainingLiveReplicas,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/NumberReplicas.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">NumberReplicas</a>&nbsp;numReplicas,
                                        int&nbsp;priority)</code>
<div class="block">Parse the data-nodes the block belongs to and choose one,
 which will be the replication source.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#chooseTarget4AdditionalDatanode(java.lang.String,%20int,%20org.apache.hadoop.net.Node,%20java.util.List,%20java.util.Set,%20long,%20byte)">chooseTarget4AdditionalDatanode</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;src,
                                                              int&nbsp;numAdditionalNodes,
                                                              org.apache.hadoop.net.Node&nbsp;clientnode,
                                                              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;&nbsp;chosen,
                                                              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludes,
                                                              long&nbsp;blocksize,
                                                              byte&nbsp;storagePolicyID)</code>
<div class="block">Choose target for getting additional datanodes for an existing pipeline.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#chooseTarget4NewBlock(java.lang.String,%20int,%20org.apache.hadoop.net.Node,%20java.util.Set,%20long,%20java.util.List,%20byte)">chooseTarget4NewBlock</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;src,
                                          int&nbsp;numOfReplicas,
                                          org.apache.hadoop.net.Node&nbsp;client,
                                          <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludedNodes,
                                          long&nbsp;blocksize,
                                          <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;favoredNodes,
                                          byte&nbsp;storagePolicyID)</code>
<div class="block">Choose target datanodes for creating a new block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#chooseTarget4WebHDFS(java.lang.String,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor,%20java.util.Set,%20long)">chooseTarget4WebHDFS</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;src,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;clientnode,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludes,
                                        long&nbsp;blocksize)</code>
<div class="block">Choose target for WebHDFS redirection.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#clear()">clear</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#clearQueues()">clearQueues</a></strong>()</code>
<div class="block">Clear all queues that hold decisions previously made by
 this NameNode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#close()">close</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#commitBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguousUnderConstruction,%20org.apache.hadoop.hdfs.protocol.Block)">commitBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguousUnderConstruction.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguousUnderConstruction</a>&nbsp;block,
                      <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;commitBlock)</code>
<div class="block">Commit a block of a file</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#commitOrCompleteLastBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection,%20org.apache.hadoop.hdfs.protocol.Block)">commitOrCompleteLastBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc,
                                                  <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;commitBlock)</code>
<div class="block">Commit the last block of the file and mark it as complete if it has
 meets the minimum replication requirement</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#completeBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection,%20org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20boolean)">completeBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc,
                          <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block,
                          boolean&nbsp;force)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#completeBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection,%20int,%20boolean)">completeBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc,
                          int&nbsp;blkIndex,
                          boolean&nbsp;force)</code>
<div class="block">Convert a specified block of the file to a complete block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#computeDatanodeWork()">computeDatanodeWork</a></strong>()</code>
<div class="block">Compute block replication and block invalidation work that can be scheduled
 on data-nodes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#computeInvalidateWork(int)">computeInvalidateWork</a></strong>(int&nbsp;nodesToProcess)</code>
<div class="block">Schedule blocks for deletion at datanodes</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#computeReplicationWork(int)">computeReplicationWork</a></strong>(int&nbsp;blocksToProcess)</code>
<div class="block">Scan blocks in <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#neededReplications"><code>neededReplications</code></a> and assign replication
 work to data-nodes they belong to.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#computeReplicationWorkForBlocks(java.util.List)">computeReplicationWorkForBlocks</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&gt;&nbsp;blocksToReplicate)</code>
<div class="block">Replicate a set of blocks</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#convertLastBlockToUnderConstruction(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection,%20long)">convertLastBlockToUnderConstruction</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc,
                                                                      long&nbsp;bytesToRemove)</code>
<div class="block">Convert the last block of the file to an under construction block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#countLiveNodes(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)">countLiveNodes</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;b)</code>
<div class="block">Simpler, faster form of <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#countNodes(org.apache.hadoop.hdfs.protocol.Block)"><code>countNodes(Block)</code></a> that only returns the number
 of live nodes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/NumberReplicas.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">NumberReplicas</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#countNodes(org.apache.hadoop.hdfs.protocol.Block)">countNodes</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</code>
<div class="block">Return the number of nodes hosting a given block, grouped
 by the state of those replicas.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#createBlockTokenSecretManager(org.apache.hadoop.conf.Configuration)">createBlockTokenSecretManager</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#createLocatedBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous[],%20long,%20org.apache.hadoop.hdfs.security.token.block.BlockTokenSecretManager.AccessMode)">createLocatedBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>[]&nbsp;blocks,
                                    long&nbsp;endPos,
                                    <a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.AccessMode.html" title="enum in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager.AccessMode</a>&nbsp;mode)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#createLocatedBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20long)">createLocatedBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;blk,
                                    long&nbsp;pos)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#createLocatedBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20long,%20org.apache.hadoop.hdfs.security.token.block.BlockTokenSecretManager.AccessMode)">createLocatedBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;blk,
                                    long&nbsp;pos,
                                    <a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.AccessMode.html" title="enum in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager.AccessMode</a>&nbsp;mode)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#createLocatedBlockList(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous[],%20long,%20long,%20int,%20org.apache.hadoop.hdfs.security.token.block.BlockTokenSecretManager.AccessMode)">createLocatedBlockList</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>[]&nbsp;blocks,
                                            long&nbsp;offset,
                                            long&nbsp;length,
                                            int&nbsp;nrBlocksToReturn,
                                            <a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.AccessMode.html" title="enum in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager.AccessMode</a>&nbsp;mode)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlocks.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlocks</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#createLocatedBlocks(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous[],%20long,%20boolean,%20long,%20long,%20boolean,%20boolean,%20org.apache.hadoop.fs.FileEncryptionInfo)">createLocatedBlocks</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>[]&nbsp;blocks,
                                      long&nbsp;fileSizeExcludeBlocksUnderConstruction,
                                      boolean&nbsp;isFileUnderConstruction,
                                      long&nbsp;offset,
                                      long&nbsp;length,
                                      boolean&nbsp;needBlockToken,
                                      boolean&nbsp;inSnapshot,
                                      org.apache.hadoop.fs.FileEncryptionInfo&nbsp;feInfo)</code>
<div class="block">Create a LocatedBlocks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#dumpBlockMeta(org.apache.hadoop.hdfs.protocol.Block,%20java.io.PrintWriter)">dumpBlockMeta</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html?is-external=true" title="class or interface in java.io">PrintWriter</a>&nbsp;out)</code>
<div class="block">Dump the metadata for the given block in a human-readable
 form.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#enableRMTerminationForTesting()">enableRMTerminationForTesting</a></strong>()</code>
<div class="block">Allow silent termination of replication monitor for testing</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#findAndMarkBlockAsCorrupt(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.hdfs.protocol.DatanodeInfo,%20java.lang.String,%20java.lang.String)">findAndMarkBlockAsCorrupt</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;blk,
                                                  <a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;dn,
                                                  <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageID,
                                                  <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;reason)</code>
<div class="block">Mark the block belonging to datanode as corrupt</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#forceCompleteBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection,%20org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguousUnderConstruction)">forceCompleteBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc,
                                    <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguousUnderConstruction.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguousUnderConstruction</a>&nbsp;block)</code>
<div class="block">Force the given block in the given file to be marked as complete,
 regardless of whether enough replicas are present.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/DataEncryptionKey.html" title="class in org.apache.hadoop.hdfs.security.token.block">DataEncryptionKey</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#generateDataEncryptionKey()">generateDataEncryptionKey</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getActiveBlockCount()">getActiveBlockCount</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getBlockCollection(org.apache.hadoop.hdfs.protocol.Block)">getBlockCollection</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/ExportedBlockKeys.html" title="class in org.apache.hadoop.hdfs.security.token.block">ExportedBlockKeys</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getBlockKeys()">getBlockKeys</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicy.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockPlacementPolicy</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getBlockPlacementPolicy()">getBlockPlacementPolicy</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/BlocksWithLocations.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlocksWithLocations</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getBlocks(org.apache.hadoop.hdfs.protocol.DatanodeID,%20long)">getBlocks</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;datanode,
                  long&nbsp;size)</code>
<div class="block">return a list of blocks & their locations on <code>datanode</code> whose
 total size is <code>size</code></div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/BlocksWithLocations.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlocksWithLocations</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getBlocksWithLocations(org.apache.hadoop.hdfs.protocol.DatanodeID,%20long)">getBlocksWithLocations</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;datanode,
                                            long&nbsp;size)</code>
<div class="block">Get all blocks with location information from a datanode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getBlockTokenSecretManager()">getBlockTokenSecretManager</a></strong>()</code>
<div class="block">get the BlockTokenSecretManager</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getCapacity()">getCapacity</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getCorruptReason(org.apache.hadoop.hdfs.protocol.Block,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">getCorruptReason</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</code>
<div class="block">Get reason for certain corrupted replicas for a given block and a given dn.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getCorruptReplicaBlockIds(int,%20java.lang.Long)">getCorruptReplicaBlockIds</a></strong>(int&nbsp;numExpectedBlocks,
                                                  <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;startingBlockId)</code>
<div class="block">Return a range of corrupt replica block ids.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getCorruptReplicaBlockIterator()">getCorruptReplicaBlockIterator</a></strong>()</code>
<div class="block">Return an iterator over the set of blocks for which there are no replicas.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getCorruptReplicaBlocksCount()">getCorruptReplicaBlocksCount</a></strong>()</code>
<div class="block">Used by metrics</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getCorruptReplicas(org.apache.hadoop.hdfs.protocol.Block)">getCorruptReplicas</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</code>
<div class="block">Get the replicas which are corrupt for a given block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getDatanodeDescriptors(java.util.List)">getDatanodeDescriptors</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;nodes)</code>
<div class="block">Get list of datanode descriptors for given list of nodes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeManager.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getDatanodeManager()">getDatanodeManager</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getExcessBlocksCount()">getExcessBlocksCount</a></strong>()</code>
<div class="block">Used by metrics</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getMaxReplicationStreams()">getMaxReplicationStreams</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getMissingBlocksCount()">getMissingBlocksCount</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getMissingReplOneBlocksCount()">getMissingReplOneBlocksCount</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getPendingDataNodeMessageCount()">getPendingDataNodeMessageCount</a></strong>()</code>
<div class="block">Used by metrics</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getPendingDeletionBlocksCount()">getPendingDeletionBlocksCount</a></strong>()</code>
<div class="block">Used by metrics</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getPendingReplicationBlocksCount()">getPendingReplicationBlocksCount</a></strong>()</code>
<div class="block">Used by metrics</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getPostponedMisreplicatedBlocksCount()">getPostponedMisreplicatedBlocksCount</a></strong>()</code>
<div class="block">Used by metrics</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getReplication(org.apache.hadoop.hdfs.protocol.Block)">getReplication</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getReplicationQueuesInitProgress()">getReplicationQueuesInitProgress</a></strong>()</code>
<div class="block">Get the progress of the Replication queues initialisation</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getScheduledReplicationBlocksCount()">getScheduledReplicationBlocksCount</a></strong>()</code>
<div class="block">Used by metrics</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getStartupDelayBlockDeletionInMs()">getStartupDelayBlockDeletionInMs</a></strong>()</code>
<div class="block">Used by metrics</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockStoragePolicy.html" title="class in org.apache.hadoop.hdfs.protocol">BlockStoragePolicy</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getStoragePolicies()">getStoragePolicies</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockStoragePolicy.html" title="class in org.apache.hadoop.hdfs.protocol">BlockStoragePolicy</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getStoragePolicy(byte)">getStoragePolicy</a></strong>(byte&nbsp;policyId)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockStoragePolicy.html" title="class in org.apache.hadoop.hdfs.protocol">BlockStoragePolicy</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getStoragePolicy(java.lang.String)">getStoragePolicy</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;policyName)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getStoragePolicySuite()">getStoragePolicySuite</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getStorages(org.apache.hadoop.hdfs.protocol.Block)">getStorages</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getStorages(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)">getStorages</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getStoredBlock(org.apache.hadoop.hdfs.protocol.Block)">getStoredBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getTotalBlocks()">getTotalBlocks</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getUnderReplicatedBlocksCount()">getUnderReplicatedBlocksCount</a></strong>()</code>
<div class="block">Used by metrics</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getUnderReplicatedNotMissingBlocks()">getUnderReplicatedNotMissingBlocks</a></strong>()</code>
<div class="block">Return number of under-replicated but not missing blocks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#getValidLocations(org.apache.hadoop.hdfs.protocol.Block)">getValidLocations</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</code>
<div class="block">Get all valid locations of the block</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#invalidateBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.BlockToMarkCorrupt,%20org.apache.hadoop.hdfs.protocol.DatanodeInfo)">invalidateBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a>&nbsp;b,
                              <a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;dn)</code>
<div class="block">Invalidates the given block on the given datanode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#invalidateCorruptReplicas(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)">invalidateCorruptReplicas</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;blk)</code>
<div class="block">Invalidate corrupt replicas.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#invalidateWorkForOneNode(org.apache.hadoop.hdfs.protocol.DatanodeInfo)">invalidateWorkForOneNode</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;dn)</code>
<div class="block">Get blocks to invalidate for <i>nodeId</i>
 in <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#invalidateBlocks"><code>invalidateBlocks</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#isBlockTokenEnabled()">isBlockTokenEnabled</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#isBlockUnderConstruction(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.BlockUCState,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState)">isBlockUnderConstruction</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;storedBlock,
                                                <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.BlockUCState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.BlockUCState</a>&nbsp;ucState,
                                                <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;reportedState)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#isNeededReplication(org.apache.hadoop.hdfs.protocol.Block,%20int,%20int)">isNeededReplication</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b,
                                      int&nbsp;expected,
                                      int&nbsp;current)</code>
<div class="block">A block needs replication if the number of replicas is less than expected
 or if it does not have enough racks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#isNodeHealthyForDecommission(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">isNodeHealthyForDecommission</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</code>
<div class="block">Returns whether a node can be safely decommissioned based on its 
 liveness.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#isSufficientlyReplicated(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)">isSufficientlyReplicated</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;b)</code>
<div class="block">Check if a block is replicated to at least the minimum replication.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#logAddStoredBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">logAddStoredBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;storedBlock,
                                  <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#markBlockAsCorrupt(org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.BlockToMarkCorrupt,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">markBlockAsCorrupt</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a>&nbsp;b,
                                    <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                                    <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#markBlockReplicasAsCorrupt(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20long,%20long,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo[])">markBlockReplicasAsCorrupt</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block,
                                                    long&nbsp;oldGenerationStamp,
                                                    long&nbsp;oldNumBytes,
                                                    <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>[]&nbsp;newStorages)</code>
<div class="block">Mark block replicas as corrupt except those on the storages in 
 newStorages list.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#metaSave(java.io.PrintWriter)">metaSave</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html?is-external=true" title="class or interface in java.io">PrintWriter</a>&nbsp;out)</code>
<div class="block">Dump meta data to out.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#numCorruptReplicas(org.apache.hadoop.hdfs.protocol.Block)">numCorruptReplicas</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#numOfUnderReplicatedBlocks()">numOfUnderReplicatedBlocks</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#postponeBlock(org.apache.hadoop.hdfs.protocol.Block)">postponeBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;blk)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processAllPendingDNMessages()">processAllPendingDNMessages</a></strong>()</code>
<div class="block">Process any remaining queued datanode messages after entering
 active state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processAndHandleReportedBlock(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.protocol.Block,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">processAndHandleReportedBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                                                          <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                                          <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;reportedState,
                                                          <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;delHintNode)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processFirstBlockReport(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.protocol.BlockListAsLongs)">processFirstBlockReport</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                                              <a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&nbsp;report)</code>
<div class="block">processFirstBlockReport is intended only for processing "initial" block
 reports, the first block report received from a DN after it registers.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processIncrementalBlockReport(org.apache.hadoop.hdfs.protocol.DatanodeID,%20org.apache.hadoop.hdfs.server.protocol.StorageReceivedDeletedBlocks)">processIncrementalBlockReport</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;nodeID,
                                                          <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/StorageReceivedDeletedBlocks.html" title="class in org.apache.hadoop.hdfs.server.protocol">StorageReceivedDeletedBlocks</a>&nbsp;srdb)</code>
<div class="block">The given node is reporting incremental information about some blocks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.MisReplicationResult.html" title="enum in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.MisReplicationResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processMisReplicatedBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)">processMisReplicatedBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block)</code>
<div class="block">Process a single possibly misreplicated block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processMisReplicatedBlocks()">processMisReplicatedBlocks</a></strong>()</code>
<div class="block">For each block in the name-node verify whether it belongs to any file,
 over or under replicated.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processMisReplicatesAsync()">processMisReplicatesAsync</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processOverReplicatedBlock(org.apache.hadoop.hdfs.protocol.Block,%20short,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">processOverReplicatedBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                                    short&nbsp;replication,
                                                    <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;addedNode,
                                                    <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;delNodeHint)</code>
<div class="block">Find how many of the containing nodes are "extra", if any.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processOverReplicatedBlocksOnReCommission(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">processOverReplicatedBlocksOnReCommission</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;srcNode)</code>
<div class="block">On stopping decommission, check if the node has excess replicas.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processPendingReplications()">processPendingReplications</a></strong>()</code>
<div class="block">If there were any replication requests that timed out, reap them
 and put them back into the neededReplication queue</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processQueuedMessages(java.lang.Iterable)">processQueuedMessages</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/PendingDataNodeMessages.ReportedBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">PendingDataNodeMessages.ReportedBlockInfo</a>&gt;&nbsp;rbis)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processQueuedMessagesForBlock(org.apache.hadoop.hdfs.protocol.Block)">processQueuedMessagesForBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</code>
<div class="block">Try to process any messages that were previously queued for the given
 block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processReport(org.apache.hadoop.hdfs.protocol.DatanodeID,%20org.apache.hadoop.hdfs.server.protocol.DatanodeStorage,%20org.apache.hadoop.hdfs.protocol.BlockListAsLongs,%20org.apache.hadoop.hdfs.server.protocol.BlockReportContext,%20boolean)">processReport</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;nodeID,
                          <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>&nbsp;storage,
                          <a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&nbsp;newReport,
                          <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/BlockReportContext.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlockReportContext</a>&nbsp;context,
                          boolean&nbsp;lastStorageInRpc)</code>
<div class="block">The given storage is reporting all its blocks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processReport(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.protocol.BlockListAsLongs)">processReport</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                          <a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&nbsp;report)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#processReportedBlock(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.protocol.Block,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState,%20java.util.Collection,%20java.util.Collection,%20java.util.Collection,%20java.util.Collection)">processReportedBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;reportedState,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&gt;&nbsp;toAdd,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&nbsp;toInvalidate,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a>&gt;&nbsp;toCorrupt,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.StatefulBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.StatefulBlockInfo</a>&gt;&nbsp;toUC)</code>
<div class="block">Process a block replica reported by the data-node.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#queueReportedBlock(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.protocol.Block,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState,%20java.lang.String)">queueReportedBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                                    <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                    <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;reportedState,
                                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;reason)</code>
<div class="block">Queue the given reported block for later processing in the
 standby node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#removeBlock(org.apache.hadoop.hdfs.protocol.Block)">removeBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#removeBlockFromMap(org.apache.hadoop.hdfs.protocol.Block)">removeBlockFromMap</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#removeBlocksAssociatedTo(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">removeBlocksAssociatedTo</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</code>
<div class="block">Remove the blocks associated to the given datanode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#removeBlocksAssociatedTo(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo)">removeBlocksAssociatedTo</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo)</code>
<div class="block">Remove the blocks associated to the given DatanodeStorageInfo.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#removeFromInvalidates(org.apache.hadoop.hdfs.protocol.DatanodeInfo)">removeFromInvalidates</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;datanode)</code>
<div class="block">Remove all block invalidation tasks under this datanode UUID;
 used when a datanode registers with a new UUID and the old one
 is wiped.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#removeStoredBlock(org.apache.hadoop.hdfs.protocol.Block,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">removeStoredBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                  <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</code>
<div class="block">Modify (block-->datanode) map.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#removeZombieReplicas(org.apache.hadoop.hdfs.server.protocol.BlockReportContext,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo)">removeZombieReplicas</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/BlockReportContext.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlockReportContext</a>&nbsp;context,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;zombie)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#reportDiff(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.protocol.BlockListAsLongs,%20java.util.Collection,%20java.util.Collection,%20java.util.Collection,%20java.util.Collection,%20java.util.Collection)">reportDiff</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                    <a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&nbsp;newReport,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&gt;&nbsp;toAdd,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&nbsp;toRemove,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&nbsp;toInvalidate,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a>&gt;&nbsp;toCorrupt,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.StatefulBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.StatefulBlockInfo</a>&gt;&nbsp;toUC)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#rescanPostponedMisreplicatedBlocks()">rescanPostponedMisreplicatedBlocks</a></strong>()</code>
<div class="block">Rescan the list of blocks which were previously postponed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#setBlockPlacementPolicy(org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy)">setBlockPlacementPolicy</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicy.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockPlacementPolicy</a>&nbsp;newpolicy)</code>
<div class="block">Set BlockPlacementPolicy</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#setBlockPoolId(java.lang.String)">setBlockPoolId</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;blockPoolId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#setBlockToken(org.apache.hadoop.hdfs.protocol.LocatedBlock,%20org.apache.hadoop.hdfs.security.token.block.BlockTokenSecretManager.AccessMode)">setBlockToken</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a>&nbsp;b,
                          <a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.AccessMode.html" title="enum in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager.AccessMode</a>&nbsp;mode)</code>
<div class="block">Generate a block token for the located block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#setPostponeBlocksFromFuture(boolean)">setPostponeBlocksFromFuture</a></strong>(boolean&nbsp;postpone)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#setReplication(short,%20short,%20java.lang.String,%20org.apache.hadoop.hdfs.protocol.Block...)">setReplication</a></strong>(short&nbsp;oldRepl,
                            short&nbsp;newRepl,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;src,
                            <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>...&nbsp;blocks)</code>
<div class="block">Set replication for the blocks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#shouldUpdateBlockKey(long)">shouldUpdateBlockKey</a></strong>(long&nbsp;updateTime)</code>
<div class="block">Should the access keys be updated?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#shutdown()">shutdown</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#stopReplicationInitializer()">stopReplicationInitializer</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#updateNeededReplications(org.apache.hadoop.hdfs.protocol.Block,%20int,%20int)">updateNeededReplications</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                                int&nbsp;curReplicasDelta,
                                                int&nbsp;expectedReplicasDelta)</code>
<div class="block">updates a block in under replication queue</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#updateState()">updateState</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#useDelHint(boolean,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20java.util.List,%20java.util.List)">useDelHint</a></strong>(boolean&nbsp;isFirst,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;delHint,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;added,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;&nbsp;moreThan1Racks,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.StorageType&gt;&nbsp;excessTypes)</code>
<div class="block">Check if we can use delHint</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#verifyReplication(java.lang.String,%20short,%20java.lang.String)">verifyReplication</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;src,
                                  short&nbsp;replication,
                                  <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;clientName)</code>
<div class="block">Check whether the replication parameter is within the range
 determined by system configuration.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>public static final&nbsp;org.slf4j.Logger <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.100">LOG</a></pre>
</li>
</ul>
<a name="blockLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockLog</h4>
<pre>public static final&nbsp;org.slf4j.Logger <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.101">blockLog</a></pre>
</li>
</ul>
<a name="QUEUE_REASON_CORRUPT_STATE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>QUEUE_REASON_CORRUPT_STATE</h4>
<pre>private static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.103">QUEUE_REASON_CORRUPT_STATE</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.QUEUE_REASON_CORRUPT_STATE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="QUEUE_REASON_FUTURE_GENSTAMP">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>QUEUE_REASON_FUTURE_GENSTAMP</h4>
<pre>private static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.106">QUEUE_REASON_FUTURE_GENSTAMP</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.QUEUE_REASON_FUTURE_GENSTAMP">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="namesystem">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>namesystem</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/Namesystem.html" title="interface in org.apache.hadoop.hdfs.server.namenode">Namesystem</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.109">namesystem</a></pre>
</li>
</ul>
<a name="datanodeManager">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>datanodeManager</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeManager.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeManager</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.111">datanodeManager</a></pre>
</li>
</ul>
<a name="heartbeatManager">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heartbeatManager</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">HeartbeatManager</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.112">heartbeatManager</a></pre>
</li>
</ul>
<a name="blockTokenSecretManager">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockTokenSecretManager</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.113">blockTokenSecretManager</a></pre>
</li>
</ul>
<a name="pendingDNMessages">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pendingDNMessages</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/PendingDataNodeMessages.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">PendingDataNodeMessages</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.115">pendingDNMessages</a></pre>
</li>
</ul>
<a name="pendingReplicationBlocksCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pendingReplicationBlocksCount</h4>
<pre>private volatile&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.118">pendingReplicationBlocksCount</a></pre>
</li>
</ul>
<a name="corruptReplicaBlocksCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>corruptReplicaBlocksCount</h4>
<pre>private volatile&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.119">corruptReplicaBlocksCount</a></pre>
</li>
</ul>
<a name="underReplicatedBlocksCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>underReplicatedBlocksCount</h4>
<pre>private volatile&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.120">underReplicatedBlocksCount</a></pre>
</li>
</ul>
<a name="scheduledReplicationBlocksCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduledReplicationBlocksCount</h4>
<pre>private volatile&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.121">scheduledReplicationBlocksCount</a></pre>
</li>
</ul>
<a name="excessBlocksCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>excessBlocksCount</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicLong</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.122">excessBlocksCount</a></pre>
</li>
</ul>
<a name="postponedMisreplicatedBlocksCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postponedMisreplicatedBlocksCount</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicLong</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.123">postponedMisreplicatedBlocksCount</a></pre>
</li>
</ul>
<a name="startupDelayBlockDeletionInMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startupDelayBlockDeletionInMs</h4>
<pre>private final&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.124">startupDelayBlockDeletionInMs</a></pre>
</li>
</ul>
<a name="replicationRecheckInterval">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicationRecheckInterval</h4>
<pre>private final&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.164">replicationRecheckInterval</a></pre>
<div class="block">replicationRecheckInterval is how often namenode checks for new replication work</div>
</li>
</ul>
<a name="blocksMap">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blocksMap</h4>
<pre>final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlocksMap.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlocksMap</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.170">blocksMap</a></pre>
<div class="block">Mapping: Block -> { BlockCollection, datanodes, self ref }
 Updated only in response to client-sent information.</div>
</li>
</ul>
<a name="replicationThread">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicationThread</h4>
<pre>final&nbsp;org.apache.hadoop.util.Daemon <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.173">replicationThread</a></pre>
<div class="block">Replication thread.</div>
</li>
</ul>
<a name="corruptReplicas">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>corruptReplicas</h4>
<pre>final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/CorruptReplicasMap.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">CorruptReplicasMap</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.176">corruptReplicas</a></pre>
<div class="block">Store blocks -> datanodedescriptor(s) map of corrupt replicas</div>
</li>
</ul>
<a name="invalidateBlocks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>invalidateBlocks</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/InvalidateBlocks.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">InvalidateBlocks</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.179">invalidateBlocks</a></pre>
<div class="block">Blocks to be invalidated.</div>
</li>
</ul>
<a name="postponedMisreplicatedBlocks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postponedMisreplicatedBlocks</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.188">postponedMisreplicatedBlocks</a></pre>
<div class="block">After a failover, over-replicated blocks may not be handled
 until all of the replicas have done a block report to the
 new active. This is to make sure that this NameNode has been
 notified of all block deletions that might have been pending
 when the failover happened.</div>
</li>
</ul>
<a name="excessReplicateMap">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>excessReplicateMap</h4>
<pre>public final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../../../org/apache/hadoop/hdfs/util/LightWeightLinkedSet.html" title="class in org.apache.hadoop.hdfs.util">LightWeightLinkedSet</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&gt; <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.194">excessReplicateMap</a></pre>
<div class="block">Maps a StorageID to the set of blocks that are "extra" for this
 DataNode. We'll eventually remove these extras.</div>
</li>
</ul>
<a name="neededReplications">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>neededReplications</h4>
<pre>public final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/UnderReplicatedBlocks.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">UnderReplicatedBlocks</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.201">neededReplications</a></pre>
<div class="block">Store set of Blocks that need to be replicated 1 or more times.
 We also store pending replication-orders.</div>
</li>
</ul>
<a name="pendingReplications">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pendingReplications</h4>
<pre>final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/PendingReplicationBlocks.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">PendingReplicationBlocks</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.204">pendingReplications</a></pre>
</li>
</ul>
<a name="maxReplication">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxReplication</h4>
<pre>public final&nbsp;short <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.207">maxReplication</a></pre>
<div class="block">The maximum number of replicas allowed for a block</div>
</li>
</ul>
<a name="maxReplicationStreams">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxReplicationStreams</h4>
<pre>int <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.212">maxReplicationStreams</a></pre>
<div class="block">The maximum number of outgoing replication streams a given node should have
 at one time considering all but the highest priority replications needed.</div>
</li>
</ul>
<a name="replicationStreamsHardLimit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicationStreamsHardLimit</h4>
<pre>int <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.217">replicationStreamsHardLimit</a></pre>
<div class="block">The maximum number of outgoing replication streams a given node should have
 at one time.</div>
</li>
</ul>
<a name="minReplication">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>minReplication</h4>
<pre>public final&nbsp;short <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.219">minReplication</a></pre>
<div class="block">Minimum copies needed or else write is disallowed</div>
</li>
</ul>
<a name="defaultReplication">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defaultReplication</h4>
<pre>public final&nbsp;int <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.221">defaultReplication</a></pre>
<div class="block">Default number of replicas</div>
</li>
</ul>
<a name="maxCorruptFilesReturned">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxCorruptFilesReturned</h4>
<pre>final&nbsp;int <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.223">maxCorruptFilesReturned</a></pre>
<div class="block">value returned by MAX_CORRUPT_FILES_RETURNED</div>
</li>
</ul>
<a name="blocksInvalidateWorkPct">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blocksInvalidateWorkPct</h4>
<pre>final&nbsp;float <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.225">blocksInvalidateWorkPct</a></pre>
</li>
</ul>
<a name="blocksReplWorkMultiplier">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blocksReplWorkMultiplier</h4>
<pre>final&nbsp;int <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.226">blocksReplWorkMultiplier</a></pre>
</li>
</ul>
<a name="shouldCheckForEnoughRacks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldCheckForEnoughRacks</h4>
<pre>final&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.229">shouldCheckForEnoughRacks</a></pre>
<div class="block">variable to enable check for enough racks</div>
</li>
</ul>
<a name="encryptDataTransfer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encryptDataTransfer</h4>
<pre>final&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.232">encryptDataTransfer</a></pre>
</li>
</ul>
<a name="maxNumBlocksToLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxNumBlocksToLog</h4>
<pre>private final&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.235">maxNumBlocksToLog</a></pre>
</li>
</ul>
<a name="shouldPostponeBlocksFromFuture">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldPostponeBlocksFromFuture</h4>
<pre>private&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.243">shouldPostponeBlocksFromFuture</a></pre>
<div class="block">When running inside a Standby node, the node may receive block reports
 from datanodes before receiving the corresponding namespace edits from
 the active NameNode. Thus, it will postpone them for later processing,
 instead of marking the blocks as corrupt.</div>
</li>
</ul>
<a name="replicationQueuesInitializer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicationQueuesInitializer</h4>
<pre>private&nbsp;org.apache.hadoop.util.Daemon <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.249">replicationQueuesInitializer</a></pre>
<div class="block">Process replication queues asynchronously to allow namenode safemode exit
 and failover to be faster. HDFS-5496</div>
</li>
</ul>
<a name="numBlocksPerIteration">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numBlocksPerIteration</h4>
<pre>private&nbsp;int <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.255">numBlocksPerIteration</a></pre>
<div class="block">Number of blocks to process asychronously for replication queues
 initialization once aquired the namesystem lock. Remaining blocks will be
 processed again after aquiring lock again.</div>
</li>
</ul>
<a name="replicationQueuesInitProgress">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicationQueuesInitProgress</h4>
<pre>private&nbsp;double <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.259">replicationQueuesInitProgress</a></pre>
<div class="block">Progress of the Replication queues initialisation.</div>
</li>
</ul>
<a name="blockplacement">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockplacement</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicy.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockPlacementPolicy</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.262">blockplacement</a></pre>
<div class="block">for block replicas placement</div>
</li>
</ul>
<a name="storagePolicySuite">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storagePolicySuite</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.263">storagePolicySuite</a></pre>
</li>
</ul>
<a name="checkNSRunning">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>checkNSRunning</h4>
<pre>private&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.266">checkNSRunning</a></pre>
<div class="block">Check whether name system is running before terminating</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BlockManager(org.apache.hadoop.hdfs.server.namenode.Namesystem, org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BlockManager</h4>
<pre>public&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.268">BlockManager</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/Namesystem.html" title="interface in org.apache.hadoop.hdfs.server.namenode">Namesystem</a>&nbsp;namesystem,
            org.apache.hadoop.conf.Configuration&nbsp;conf)
             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getPendingReplicationBlocksCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPendingReplicationBlocksCount</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.127">getPendingReplicationBlocksCount</a>()</pre>
<div class="block">Used by metrics</div>
</li>
</ul>
<a name="getUnderReplicatedBlocksCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUnderReplicatedBlocksCount</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.131">getUnderReplicatedBlocksCount</a>()</pre>
<div class="block">Used by metrics</div>
</li>
</ul>
<a name="getCorruptReplicaBlocksCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCorruptReplicaBlocksCount</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.135">getCorruptReplicaBlocksCount</a>()</pre>
<div class="block">Used by metrics</div>
</li>
</ul>
<a name="getScheduledReplicationBlocksCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getScheduledReplicationBlocksCount</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.139">getScheduledReplicationBlocksCount</a>()</pre>
<div class="block">Used by metrics</div>
</li>
</ul>
<a name="getPendingDeletionBlocksCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPendingDeletionBlocksCount</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.143">getPendingDeletionBlocksCount</a>()</pre>
<div class="block">Used by metrics</div>
</li>
</ul>
<a name="getStartupDelayBlockDeletionInMs()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStartupDelayBlockDeletionInMs</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.147">getStartupDelayBlockDeletionInMs</a>()</pre>
<div class="block">Used by metrics</div>
</li>
</ul>
<a name="getExcessBlocksCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExcessBlocksCount</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.151">getExcessBlocksCount</a>()</pre>
<div class="block">Used by metrics</div>
</li>
</ul>
<a name="getPostponedMisreplicatedBlocksCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPostponedMisreplicatedBlocksCount</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.155">getPostponedMisreplicatedBlocksCount</a>()</pre>
<div class="block">Used by metrics</div>
</li>
</ul>
<a name="getPendingDataNodeMessageCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPendingDataNodeMessageCount</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.159">getPendingDataNodeMessageCount</a>()</pre>
<div class="block">Used by metrics</div>
</li>
</ul>
<a name="createBlockTokenSecretManager(org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBlockTokenSecretManager</h4>
<pre>private static&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.360">createBlockTokenSecretManager</a>(org.apache.hadoop.conf.Configuration&nbsp;conf)</pre>
</li>
</ul>
<a name="getStoragePolicy(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoragePolicy</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockStoragePolicy.html" title="class in org.apache.hadoop.hdfs.protocol">BlockStoragePolicy</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.407">getStoragePolicy</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;policyName)</pre>
</li>
</ul>
<a name="getStoragePolicy(byte)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoragePolicy</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockStoragePolicy.html" title="class in org.apache.hadoop.hdfs.protocol">BlockStoragePolicy</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.411">getStoragePolicy</a>(byte&nbsp;policyId)</pre>
</li>
</ul>
<a name="getStoragePolicies()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoragePolicies</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockStoragePolicy.html" title="class in org.apache.hadoop.hdfs.protocol">BlockStoragePolicy</a>[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.415">getStoragePolicies</a>()</pre>
</li>
</ul>
<a name="setBlockPoolId(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBlockPoolId</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.419">setBlockPoolId</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;blockPoolId)</pre>
</li>
</ul>
<a name="getStoragePolicySuite()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoragePolicySuite</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.425">getStoragePolicySuite</a>()</pre>
</li>
</ul>
<a name="getBlockTokenSecretManager()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockTokenSecretManager</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.431">getBlockTokenSecretManager</a>()</pre>
<div class="block">get the BlockTokenSecretManager</div>
</li>
</ul>
<a name="enableRMTerminationForTesting()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableRMTerminationForTesting</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.437">enableRMTerminationForTesting</a>()</pre>
<div class="block">Allow silent termination of replication monitor for testing</div>
</li>
</ul>
<a name="isBlockTokenEnabled()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBlockTokenEnabled</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.441">isBlockTokenEnabled</a>()</pre>
</li>
</ul>
<a name="shouldUpdateBlockKey(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldUpdateBlockKey</h4>
<pre>boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.446">shouldUpdateBlockKey</a>(long&nbsp;updateTime)
                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Should the access keys be updated?</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="activate(org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>activate</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.451">activate</a>(org.apache.hadoop.conf.Configuration&nbsp;conf)</pre>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.457">close</a>()</pre>
</li>
</ul>
<a name="getDatanodeManager()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDatanodeManager</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeManager.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeManager</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.469">getDatanodeManager</a>()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the datanodeManager</dd></dl>
</li>
</ul>
<a name="getBlockPlacementPolicy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockPlacementPolicy</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicy.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockPlacementPolicy</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.474">getBlockPlacementPolicy</a>()</pre>
</li>
</ul>
<a name="setBlockPlacementPolicy(org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBlockPlacementPolicy</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.479">setBlockPlacementPolicy</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicy.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockPlacementPolicy</a>&nbsp;newpolicy)</pre>
<div class="block">Set BlockPlacementPolicy</div>
</li>
</ul>
<a name="metaSave(java.io.PrintWriter)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>metaSave</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.487">metaSave</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html?is-external=true" title="class or interface in java.io">PrintWriter</a>&nbsp;out)</pre>
<div class="block">Dump meta data to out.</div>
</li>
</ul>
<a name="dumpBlockMeta(org.apache.hadoop.hdfs.protocol.Block, java.io.PrintWriter)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpBlockMeta</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.525">dumpBlockMeta</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html?is-external=true" title="class or interface in java.io">PrintWriter</a>&nbsp;out)</pre>
<div class="block">Dump the metadata for the given block in a human-readable
 form.</div>
</li>
</ul>
<a name="getMaxReplicationStreams()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxReplicationStreams</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.578">getMaxReplicationStreams</a>()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>maxReplicationStreams</dd></dl>
</li>
</ul>
<a name="checkMinReplication(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkMinReplication</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.585">checkMinReplication</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the block has minimum replicas</dd></dl>
</li>
</ul>
<a name="commitBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguousUnderConstruction, org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitBlock</h4>
<pre>private static&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.598">commitBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguousUnderConstruction.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguousUnderConstruction</a>&nbsp;block,
                  <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;commitBlock)
                            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Commit a block of a file</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>block</code> - block to be committed</dd><dd><code>commitBlock</code> - - contains client reported block length and generation</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the block is changed to committed state.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the block does not have at least a minimal number
 of replicas reported from data-nodes.</dd></dl>
</li>
</ul>
<a name="commitOrCompleteLastBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection, org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitOrCompleteLastBlock</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.620">commitOrCompleteLastBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc,
                                <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;commitBlock)
                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Commit the last block of the file and mark it as complete if it has
 meets the minimum replication requirement</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bc</code> - block collection</dd><dd><code>commitBlock</code> - - contains client reported block length and generation</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the last block is changed to committed state.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the block does not have at least a minimal number
 of replicas reported from data-nodes.</dd></dl>
</li>
</ul>
<a name="completeBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection, int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>completeBlock</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.644">completeBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc,
                                int&nbsp;blkIndex,
                                boolean&nbsp;force)
                                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Convert a specified block of the file to a complete block.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bc</code> - file</dd><dd><code>blkIndex</code> - block index in the file</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the block does not have at least a minimal number
 of replicas reported from data-nodes.</dd></dl>
</li>
</ul>
<a name="completeBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection, org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>completeBlock</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.678">completeBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc,
                                <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block,
                                boolean&nbsp;force)
                                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="forceCompleteBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection, org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguousUnderConstruction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceCompleteBlock</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.693">forceCompleteBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc,
                                     <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguousUnderConstruction.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguousUnderConstruction</a>&nbsp;block)
                                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Force the given block in the given file to be marked as complete,
 regardless of whether enough replicas are present. This is necessary
 when tailing edit logs as a Standby.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="convertLastBlockToUnderConstruction(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>convertLastBlockToUnderConstruction</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.714">convertLastBlockToUnderConstruction</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc,
                                               long&nbsp;bytesToRemove)
                                                 throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Convert the last block of the file to an under construction block.<p>
 The block is converted only if the file has blocks and the last one
 is a partial block (its size is less than the preferred block size).
 The converted block is returned to the client.
 The client uses the returned block locations to form the data pipeline
 for this block.<br>
 The methods returns null if there is no partial block at the end.
 The client is supposed to allocate a new block with the next call.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bc</code> - file</dd><dd><code>bytesToRemove</code> - num of bytes to remove from block</dd>
<dt><span class="strong">Returns:</span></dt><dd>the last block locations if the block is partial or null otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getValidLocations(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getValidLocations</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.756">getValidLocations</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</pre>
<div class="block">Get all valid locations of the block</div>
</li>
</ul>
<a name="createLocatedBlockList(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous[], long, long, int, org.apache.hadoop.hdfs.security.token.block.BlockTokenSecretManager.AccessMode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLocatedBlockList</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.768">createLocatedBlockList</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>[]&nbsp;blocks,
                                        long&nbsp;offset,
                                        long&nbsp;length,
                                        int&nbsp;nrBlocksToReturn,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.AccessMode.html" title="enum in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager.AccessMode</a>&nbsp;mode)
                                           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createLocatedBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous[], long, org.apache.hadoop.hdfs.security.token.block.BlockTokenSecretManager.AccessMode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLocatedBlock</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.799">createLocatedBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>[]&nbsp;blocks,
                              long&nbsp;endPos,
                              <a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.AccessMode.html" title="enum in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager.AccessMode</a>&nbsp;mode)
                                 throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createLocatedBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, long, org.apache.hadoop.hdfs.security.token.block.BlockTokenSecretManager.AccessMode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLocatedBlock</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.815">createLocatedBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;blk,
                              long&nbsp;pos,
                              <a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.AccessMode.html" title="enum in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager.AccessMode</a>&nbsp;mode)
                                 throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createLocatedBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLocatedBlock</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.825">createLocatedBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;blk,
                              long&nbsp;pos)
                                 throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>a LocatedBlock for the given block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createLocatedBlocks(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous[], long, boolean, long, long, boolean, boolean, org.apache.hadoop.fs.FileEncryptionInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLocatedBlocks</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlocks.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlocks</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.873">createLocatedBlocks</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>[]&nbsp;blocks,
                                long&nbsp;fileSizeExcludeBlocksUnderConstruction,
                                boolean&nbsp;isFileUnderConstruction,
                                long&nbsp;offset,
                                long&nbsp;length,
                                boolean&nbsp;needBlockToken,
                                boolean&nbsp;inSnapshot,
                                org.apache.hadoop.fs.FileEncryptionInfo&nbsp;feInfo)
                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create a LocatedBlocks.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockKeys()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockKeys</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/ExportedBlockKeys.html" title="class in org.apache.hadoop.hdfs.security.token.block">ExportedBlockKeys</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.914">getBlockKeys</a>()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>current access keys.</dd></dl>
</li>
</ul>
<a name="setBlockToken(org.apache.hadoop.hdfs.protocol.LocatedBlock, org.apache.hadoop.hdfs.security.token.block.BlockTokenSecretManager.AccessMode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBlockToken</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.920">setBlockToken</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/LocatedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">LocatedBlock</a>&nbsp;b,
                 <a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenSecretManager.AccessMode.html" title="enum in org.apache.hadoop.hdfs.security.token.block">BlockTokenSecretManager.AccessMode</a>&nbsp;mode)
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Generate a block token for the located block.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="addKeyUpdateCommand(java.util.List, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addKeyUpdateCommand</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.930">addKeyUpdateCommand</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeCommand</a>&gt;&nbsp;cmds,
                       <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;nodeinfo)</pre>
</li>
</ul>
<a name="generateDataEncryptionKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateDataEncryptionKey</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/security/token/block/DataEncryptionKey.html" title="class in org.apache.hadoop.hdfs.security.token.block">DataEncryptionKey</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.939">generateDataEncryptionKey</a>()</pre>
</li>
</ul>
<a name="adjustReplication(short)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>adjustReplication</h4>
<pre>public&nbsp;short&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.951">adjustReplication</a>(short&nbsp;replication)</pre>
<div class="block">Clamp the specified replication between the minimum and the maximum
 replication levels.</div>
</li>
</ul>
<a name="verifyReplication(java.lang.String, short, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyReplication</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.960">verifyReplication</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;src,
                     short&nbsp;replication,
                     <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;clientName)
                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Check whether the replication parameter is within the range
 determined by system configuration.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="isSufficientlyReplicated(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSufficientlyReplicated</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.985">isSufficientlyReplicated</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;b)</pre>
<div class="block">Check if a block is replicated to at least the minimum replication.</div>
</li>
</ul>
<a name="getBlocks(org.apache.hadoop.hdfs.protocol.DatanodeID, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlocks</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/BlocksWithLocations.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlocksWithLocations</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.999">getBlocks</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;datanode,
                            long&nbsp;size)
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">return a list of blocks & their locations on <code>datanode</code> whose
 total size is <code>size</code></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>datanode</code> - on which blocks are located</dd><dd><code>size</code> - total size of blocks</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlocksWithLocations(org.apache.hadoop.hdfs.protocol.DatanodeID, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlocksWithLocations</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/BlocksWithLocations.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlocksWithLocations</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1012">getBlocksWithLocations</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;datanode,
                                         long&nbsp;size)
                                            throws <a href="../../../../../../org/apache/hadoop/hdfs/protocol/UnregisteredNodeException.html" title="class in org.apache.hadoop.hdfs.protocol">UnregisteredNodeException</a></pre>
<div class="block">Get all blocks with location information from a datanode.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/protocol/UnregisteredNodeException.html" title="class in org.apache.hadoop.hdfs.protocol">UnregisteredNodeException</a></code></dd></dl>
</li>
</ul>
<a name="removeBlocksAssociatedTo(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeBlocksAssociatedTo</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1055">removeBlocksAssociatedTo</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</pre>
<div class="block">Remove the blocks associated to the given datanode.</div>
</li>
</ul>
<a name="removeBlocksAssociatedTo(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeBlocksAssociatedTo</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1068">removeBlocksAssociatedTo</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo)</pre>
<div class="block">Remove the blocks associated to the given DatanodeStorageInfo.</div>
</li>
</ul>
<a name="addToInvalidates(org.apache.hadoop.hdfs.protocol.Block, org.apache.hadoop.hdfs.protocol.DatanodeInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToInvalidates</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1084">addToInvalidates</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                    <a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;datanode)</pre>
<div class="block">Adds block to list of blocks which will be invalidated on specified
 datanode and log the operation</div>
</li>
</ul>
<a name="addToInvalidates(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToInvalidates</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1095">addToInvalidates</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</pre>
<div class="block">Adds block to list of blocks which will be invalidated on all its
 datanodes.</div>
</li>
</ul>
<a name="removeFromInvalidates(org.apache.hadoop.hdfs.protocol.DatanodeInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeFromInvalidates</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1115">removeFromInvalidates</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;datanode)</pre>
<div class="block">Remove all block invalidation tasks under this datanode UUID;
 used when a datanode registers with a new UUID and the old one
 is wiped.</div>
</li>
</ul>
<a name="findAndMarkBlockAsCorrupt(org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.hdfs.protocol.DatanodeInfo, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findAndMarkBlockAsCorrupt</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1130">findAndMarkBlockAsCorrupt</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;blk,
                             <a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;dn,
                             <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageID,
                             <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;reason)
                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Mark the block belonging to datanode as corrupt</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blk</code> - Block to be marked as corrupt</dd><dd><code>dn</code> - Datanode which holds the corrupt replica</dd><dd><code>storageID</code> - if known, null otherwise.</dd><dd><code>reason</code> - a textual reason why the block should be marked corrupt,
 for logging purposes</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="markBlockAsCorrupt(org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.BlockToMarkCorrupt, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markBlockAsCorrupt</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1162">markBlockAsCorrupt</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a>&nbsp;b,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)
                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - </dd><dd><code>storageInfo</code> - storage that contains the block, if known. null otherwise.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="invalidateBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.BlockToMarkCorrupt, org.apache.hadoop.hdfs.protocol.DatanodeInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>invalidateBlock</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1214">invalidateBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a>&nbsp;b,
                      <a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;dn)
                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Invalidates the given block on the given datanode.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the block was successfully invalidated and no longer
 present in the BlocksMap</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="setPostponeBlocksFromFuture(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPostponeBlocksFromFuture</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1247">setPostponeBlocksFromFuture</a>(boolean&nbsp;postpone)</pre>
</li>
</ul>
<a name="postponeBlock(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postponeBlock</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1252">postponeBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;blk)</pre>
</li>
</ul>
<a name="updateState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateState</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1259">updateState</a>()</pre>
</li>
</ul>
<a name="getUnderReplicatedNotMissingBlocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUnderReplicatedNotMissingBlocks</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1266">getUnderReplicatedNotMissingBlocks</a>()</pre>
<div class="block">Return number of under-replicated but not missing blocks</div>
</li>
</ul>
<a name="computeInvalidateWork(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeInvalidateWork</h4>
<pre>int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1275">computeInvalidateWork</a>(int&nbsp;nodesToProcess)</pre>
<div class="block">Schedule blocks for deletion at datanodes</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>nodesToProcess</code> - number of datanodes to schedule deletion work</dd>
<dt><span class="strong">Returns:</span></dt><dd>total number of block for deletion</dd></dl>
</li>
</ul>
<a name="computeReplicationWork(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeReplicationWork</h4>
<pre>int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1303">computeReplicationWork</a>(int&nbsp;blocksToProcess)</pre>
<div class="block">Scan blocks in <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#neededReplications"><code>neededReplications</code></a> and assign replication
 work to data-nodes they belong to.

 The number of process blocks equals either twice the number of live
 data-nodes or the number of under-replicated blocks whichever is less.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>number of blocks scheduled for replication during this iteration.</dd></dl>
</li>
</ul>
<a name="computeReplicationWorkForBlocks(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeReplicationWorkForBlocks</h4>
<pre>int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1322">computeReplicationWorkForBlocks</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&gt;&nbsp;blocksToReplicate)</pre>
<div class="block">Replicate a set of blocks</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blocksToReplicate</code> - blocks to be replicated, for each priority</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of blocks scheduled for replication</dd></dl>
</li>
</ul>
<a name="chooseTarget4WebHDFS(java.lang.String, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, java.util.Set, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chooseTarget4WebHDFS</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1508">chooseTarget4WebHDFS</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;src,
                                         <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;clientnode,
                                         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludes,
                                         long&nbsp;blocksize)</pre>
<div class="block">Choose target for WebHDFS redirection.</div>
</li>
</ul>
<a name="chooseTarget4AdditionalDatanode(java.lang.String, int, org.apache.hadoop.net.Node, java.util.List, java.util.Set, long, byte)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chooseTarget4AdditionalDatanode</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1516">chooseTarget4AdditionalDatanode</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;src,
                                                    int&nbsp;numAdditionalNodes,
                                                    org.apache.hadoop.net.Node&nbsp;clientnode,
                                                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;&nbsp;chosen,
                                                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludes,
                                                    long&nbsp;blocksize,
                                                    byte&nbsp;storagePolicyID)</pre>
<div class="block">Choose target for getting additional datanodes for an existing pipeline.</div>
</li>
</ul>
<a name="chooseTarget4NewBlock(java.lang.String, int, org.apache.hadoop.net.Node, java.util.Set, long, java.util.List, byte)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chooseTarget4NewBlock</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1537">chooseTarget4NewBlock</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;src,
                                          int&nbsp;numOfReplicas,
                                          org.apache.hadoop.net.Node&nbsp;client,
                                          <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;org.apache.hadoop.net.Node&gt;&nbsp;excludedNodes,
                                          long&nbsp;blocksize,
                                          <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;favoredNodes,
                                          byte&nbsp;storagePolicyID)
                                            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Choose target datanodes for creating a new block.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the number of targets < minimum replication.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicy.html#chooseTarget(java.lang.String,%20int,%20org.apache.hadoop.net.Node,%20java.util.Set,%20long,%20java.util.List,%20org.apache.hadoop.hdfs.protocol.BlockStoragePolicy)"><code>BlockPlacementPolicy.chooseTarget(String, int, Node,
      Set, long, List, BlockStoragePolicy)</code></a></dd></dl>
</li>
</ul>
<a name="getDatanodeDescriptors(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDatanodeDescriptors</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1565">getDatanodeDescriptors</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;nodes)</pre>
<div class="block">Get list of datanode descriptors for given list of nodes. Nodes are
 hostaddress:port or just hostaddress.</div>
</li>
</ul>
<a name="chooseSourceDatanode(org.apache.hadoop.hdfs.protocol.Block, java.util.List, java.util.List, org.apache.hadoop.hdfs.server.blockmanagement.NumberReplicas, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chooseSourceDatanode</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1609">chooseSourceDatanode</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                      <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&gt;&nbsp;containingNodes,
                                      <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;&nbsp;nodesContainingLiveReplicas,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/NumberReplicas.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">NumberReplicas</a>&nbsp;numReplicas,
                                      int&nbsp;priority)</pre>
<div class="block">Parse the data-nodes the block belongs to and choose one,
 which will be the replication source.

 We prefer nodes that are in DECOMMISSION_INPROGRESS state to other nodes
 since the former do not have write traffic and hence are less busy.
 We do not use already decommissioned nodes as a source.
 Otherwise we choose a random node among those that did not reach their
 replication limits.  However, if the replication is of the highest priority
 and all nodes have reached their replication limits, we will choose a
 random node despite the replication limit.

 In addition form a list of all nodes containing the block
 and calculate its replication numbers.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>block</code> - Block for which a replication source is needed</dd><dd><code>containingNodes</code> - List to be populated with nodes found to contain the 
                        given block</dd><dd><code>nodesContainingLiveReplicas</code> - List to be populated with nodes found to
                                    contain live replicas of the given block</dd><dd><code>numReplicas</code> - NumberReplicas instance to be initialized with the 
                                   counts of live, corrupt, excess, and
                                   decommissioned replicas of the given
                                   block.</dd><dd><code>priority</code> - integer representing replication priority of the given
                 block</dd>
<dt><span class="strong">Returns:</span></dt><dd>the DatanodeDescriptor of the chosen node from which to replicate
         the given block</dd></dl>
</li>
</ul>
<a name="processPendingReplications()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processPendingReplications</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1680">processPendingReplications</a>()</pre>
<div class="block">If there were any replication requests that timed out, reap them
 and put them back into the neededReplication queue</div>
</li>
</ul>
<a name="processReport(org.apache.hadoop.hdfs.protocol.DatanodeID, org.apache.hadoop.hdfs.server.protocol.DatanodeStorage, org.apache.hadoop.hdfs.protocol.BlockListAsLongs, org.apache.hadoop.hdfs.server.protocol.BlockReportContext, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processReport</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1775">processReport</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;nodeID,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>&nbsp;storage,
                    <a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&nbsp;newReport,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/BlockReportContext.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlockReportContext</a>&nbsp;context,
                    boolean&nbsp;lastStorageInRpc)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">The given storage is reporting all its blocks.
 Update the (storage-->block list) and (block-->storage list) maps.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if all known storages of the given DN have finished reporting.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="removeZombieReplicas(org.apache.hadoop.hdfs.server.protocol.BlockReportContext, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeZombieReplicas</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1864">removeZombieReplicas</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/BlockReportContext.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlockReportContext</a>&nbsp;context,
                        <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;zombie)</pre>
</li>
</ul>
<a name="rescanPostponedMisreplicatedBlocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rescanPostponedMisreplicatedBlocks</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1893">rescanPostponedMisreplicatedBlocks</a>()</pre>
<div class="block">Rescan the list of blocks which were previously postponed.</div>
</li>
</ul>
<a name="processReport(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.protocol.BlockListAsLongs)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processReport</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.1964">processReport</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                              <a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&nbsp;report)
                                 throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="markBlockReplicasAsCorrupt(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, long, long, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markBlockReplicasAsCorrupt</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2010">markBlockReplicasAsCorrupt</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block,
                              long&nbsp;oldGenerationStamp,
                              long&nbsp;oldNumBytes,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>[]&nbsp;newStorages)
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Mark block replicas as corrupt except those on the storages in 
 newStorages list.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="processFirstBlockReport(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.protocol.BlockListAsLongs)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processFirstBlockReport</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2057">processFirstBlockReport</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                           <a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&nbsp;report)
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">processFirstBlockReport is intended only for processing "initial" block
 reports, the first block report received from a DN after it registers.
 It just adds all the valid replicas to the datanode, without calculating 
 a toRemove list (since there won't be any).  It also silently discards 
 any invalid blocks, thereby deferring their processing until 
 the next block report.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>storageInfo</code> - - DatanodeStorageInfo that sent the report</dd><dd><code>report</code> - - the initial block report, to be processed</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="reportDiff(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.protocol.BlockListAsLongs, java.util.Collection, java.util.Collection, java.util.Collection, java.util.Collection, java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reportDiff</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2117">reportDiff</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
              <a href="../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&nbsp;newReport,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&gt;&nbsp;toAdd,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&nbsp;toRemove,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&nbsp;toInvalidate,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a>&gt;&nbsp;toCorrupt,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.StatefulBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.StatefulBlockInfo</a>&gt;&nbsp;toUC)</pre>
</li>
</ul>
<a name="processReportedBlock(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.protocol.Block, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState, java.util.Collection, java.util.Collection, java.util.Collection, java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processReportedBlock</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2190">processReportedBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                                       <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                       <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;reportedState,
                                       <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&gt;&nbsp;toAdd,
                                       <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&nbsp;toInvalidate,
                                       <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a>&gt;&nbsp;toCorrupt,
                                       <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.StatefulBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.StatefulBlockInfo</a>&gt;&nbsp;toUC)</pre>
<div class="block">Process a block replica reported by the data-node.
 No side effects except adding to the passed-in Collections.
 
 <ol>
 <li>If the block is not known to the system (not in blocksMap) then the
 data-node should be notified to invalidate this block.</li>
 <li>If the reported replica is valid that is has the same generation stamp
 and length as recorded on the name-node, then the replica location should
 be added to the name-node.</li>
 <li>If the reported replica is not valid, then it is marked as corrupt,
 which triggers replication of the existing valid replicas.
 Corrupt replicas are removed from the system when the block
 is fully replicated.</li>
 <li>If the reported replica is for a block currently marked "under
 construction" in the NN, then it should be added to the 
 BlockInfoUnderConstruction's list of replicas.</li>
 </ol></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>storageInfo</code> - DatanodeStorageInfo that sent the report.</dd><dd><code>block</code> - reported block replica</dd><dd><code>reportedState</code> - reported replica state</dd><dd><code>toAdd</code> - add to DatanodeDescriptor</dd><dd><code>toInvalidate</code> - missing blocks (not in the blocks map)
        should be removed from the data-node</dd><dd><code>toCorrupt</code> - replicas with unexpected length or generation stamp;
        add to corrupt replicas</dd><dd><code>toUC</code> - replicas of blocks currently under construction</dd>
<dt><span class="strong">Returns:</span></dt><dd>the up-to-date stored block, if it should be kept.
         Otherwise, null.</dd></dl>
</li>
</ul>
<a name="queueReportedBlock(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.protocol.Block, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queueReportedBlock</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2278">queueReportedBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                      <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;reportedState,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;reason)</pre>
<div class="block">Queue the given reported block for later processing in the
 standby node. @see PendingDataNodeMessages.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reason</code> - a textual reason to report in the debug logs</dd></dl>
</li>
</ul>
<a name="processQueuedMessagesForBlock(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processQueuedMessagesForBlock</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2296">processQueuedMessagesForBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)
                                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Try to process any messages that were previously queued for the given
 block. This is called from FSEditLogLoader whenever a block's state
 in the namespace has changed or a new block has been created.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="processQueuedMessages(java.lang.Iterable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processQueuedMessages</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2305">processQueuedMessages</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/PendingDataNodeMessages.ReportedBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">PendingDataNodeMessages.ReportedBlockInfo</a>&gt;&nbsp;rbis)
                            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="processAllPendingDNMessages()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processAllPendingDNMessages</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2322">processAllPendingDNMessages</a>()
                                 throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Process any remaining queued datanode messages after entering
 active state. At this point they will not be re-queued since
 we are the definitive master node and thus should be up-to-date
 with the namespace information.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="checkReplicaCorrupt(org.apache.hadoop.hdfs.protocol.Block, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState, org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.BlockUCState, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkReplicaCorrupt</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.BlockToMarkCorrupt</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2344">checkReplicaCorrupt</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;reported,
                                                  <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;reportedState,
                                                  <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;storedBlock,
                                                  <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.BlockUCState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.BlockUCState</a>&nbsp;ucState,
                                                  <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;dn)</pre>
<div class="block">The next two methods test the various cases under which we must conclude
 the replica is corrupt, or under construction.  These are laid out
 as switch statements, on the theory that it is easier to understand
 the combinatorics of reportedState and ucState that way.  It should be
 at least as efficient as boolean expressions.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a BlockToMarkCorrupt object, or null if the replica is not corrupt</dd></dl>
</li>
</ul>
<a name="isBlockUnderConstruction(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.BlockUCState, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBlockUnderConstruction</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2419">isBlockUnderConstruction</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;storedBlock,
                               <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.BlockUCState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.BlockUCState</a>&nbsp;ucState,
                               <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;reportedState)</pre>
</li>
</ul>
<a name="addStoredBlockUnderConstruction(org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.StatefulBlockInfo, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addStoredBlockUnderConstruction</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2440">addStoredBlockUnderConstruction</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.StatefulBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.StatefulBlockInfo</a>&nbsp;ucBlock,
                                   <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo)
                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="addStoredBlockImmediate(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addStoredBlockImmediate</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2463">addStoredBlockImmediate</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;storedBlock,
                           <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo)
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Faster version of <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#addStoredBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo,%20org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor,%20boolean)"><code>addStoredBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, boolean)</code></a>,
 intended for use with initial block report at startup. If not in startup
 safe mode, will call standard addStoredBlock(). Assumes this method is
 called "immediately" so there is no need to refresh the storedBlock from
 blocksMap. Doesn't handle underReplication/overReplication, or worry about
 pendingReplications or corruptReplicas, because it's in startup safe mode.
 Doesn't log every block, because there are typically millions of them.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="addStoredBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addStoredBlock</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2495">addStoredBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block,
                   <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                   <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;delNodeHint,
                   boolean&nbsp;logEveryBlock)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Modify (block-->datanode) map. Remove block from set of
 needed replications if this takes care of the problem.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the block that is stored in blockMap.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="logAddStoredBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logAddStoredBlock</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2599">logAddStoredBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;storedBlock,
                     <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</pre>
</li>
</ul>
<a name="invalidateCorruptReplicas(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>invalidateCorruptReplicas</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2627">invalidateCorruptReplicas</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;blk)</pre>
<div class="block">Invalidate corrupt replicas.
 <p>
 This will remove the replicas from the block's location list,
 add them to <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#invalidateBlocks"><code>invalidateBlocks</code></a> so that they could be further
 deleted from the respective data-nodes,
 and remove the block from corruptReplicasMap.
 <p>
 This method should be called when the block has sufficient
 number of live replicas.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blk</code> - Block whose corrupt replicas need to be invalidated</dd></dl>
</li>
</ul>
<a name="processMisReplicatedBlocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processMisReplicatedBlocks</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2657">processMisReplicatedBlocks</a>()</pre>
<div class="block">For each block in the name-node verify whether it belongs to any file,
 over or under replicated. Place it into the respective queue.</div>
</li>
</ul>
<a name="stopReplicationInitializer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopReplicationInitializer</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2681">stopReplicationInitializer</a>()</pre>
</li>
</ul>
<a name="processMisReplicatesAsync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processMisReplicatesAsync</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2702">processMisReplicatesAsync</a>()
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="getReplicationQueuesInitProgress()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicationQueuesInitProgress</h4>
<pre>public&nbsp;double&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2784">getReplicationQueuesInitProgress</a>()</pre>
<div class="block">Get the progress of the Replication queues initialisation</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Returns values between 0 and 1 for the progress.</dd></dl>
</li>
</ul>
<a name="processMisReplicatedBlock(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processMisReplicatedBlock</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.MisReplicationResult.html" title="enum in org.apache.hadoop.hdfs.server.blockmanagement">BlockManager.MisReplicationResult</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2793">processMisReplicatedBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block)</pre>
<div class="block">Process a single possibly misreplicated block. This adds it to the
 appropriate queues if necessary, and returns a result code indicating
 what happened with it.</div>
</li>
</ul>
<a name="setReplication(short, short, java.lang.String, org.apache.hadoop.hdfs.protocol.Block...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setReplication</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2836">setReplication</a>(short&nbsp;oldRepl,
                  short&nbsp;newRepl,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;src,
                  <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>...&nbsp;blocks)</pre>
<div class="block">Set replication for the blocks.</div>
</li>
</ul>
<a name="processOverReplicatedBlock(org.apache.hadoop.hdfs.protocol.Block, short, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processOverReplicatedBlock</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2865">processOverReplicatedBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                              short&nbsp;replication,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;addedNode,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;delNodeHint)</pre>
<div class="block">Find how many of the containing nodes are "extra", if any.
 If there are any extras, call chooseExcessReplicates() to
 mark them in the excessReplicateMap.</div>
</li>
</ul>
<a name="chooseExcessReplicates(java.util.Collection, org.apache.hadoop.hdfs.protocol.Block, short, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor, org.apache.hadoop.hdfs.server.blockmanagement.BlockPlacementPolicy)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chooseExcessReplicates</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2916">chooseExcessReplicates</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;&nbsp;nonExcess,
                          <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b,
                          short&nbsp;replication,
                          <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;addedNode,
                          <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;delNodeHint,
                          <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicy.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockPlacementPolicy</a>&nbsp;replicator)</pre>
<div class="block">We want "replication" replicates for the block, but we now have too many.  
 In this method, copy enough nodes from 'srcNodes' into 'dstNodes' such that:

 srcNodes.size() - dstNodes.size() == replication

 We pick node that make sure that replicas are spread across racks and
 also try hard to pick one with least free space.
 The algorithm is first to pick a node with least free space from nodes
 that are on a rack holding more than one replicas of the block.
 So removing such a replica won't remove a rack. 
 If no such a node is available,
 then pick a node with least free space</div>
</li>
</ul>
<a name="useDelHint(boolean, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, java.util.List, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>useDelHint</h4>
<pre>static&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.2981">useDelHint</a>(boolean&nbsp;isFirst,
                 <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;delHint,
                 <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;added,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;&nbsp;moreThan1Racks,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.StorageType&gt;&nbsp;excessTypes)</pre>
<div class="block">Check if we can use delHint</div>
</li>
</ul>
<a name="addToExcessReplicate(org.apache.hadoop.hdfs.protocol.DatanodeInfo, org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToExcessReplicate</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3001">addToExcessReplicate</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;dn,
                        <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</pre>
</li>
</ul>
<a name="removeStoredBlock(org.apache.hadoop.hdfs.protocol.Block, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeStoredBlock</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3019">removeStoredBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                     <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</pre>
<div class="block">Modify (block-->datanode) map. Possibly generate replication tasks, if the
 removed block is still valid.</div>
</li>
</ul>
<a name="addBlock(org.apache.hadoop.hdfs.protocol.Block, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addBlock</h4>
<pre>private&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3067">addBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
            <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/BlocksWithLocations.BlockWithLocations.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlocksWithLocations.BlockWithLocations</a>&gt;&nbsp;results)</pre>
<div class="block">Get all valid locations of the block & add the block to results
 return the length of the added block; 0 if the block is not added</div>
</li>
</ul>
<a name="addBlock(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.protocol.Block, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addBlock</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3091">addBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
            <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
            <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;delHint)
        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">The given node is reporting that it received a certain block.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="processAndHandleReportedBlock(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeStorageInfo, org.apache.hadoop.hdfs.protocol.Block, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processAndHandleReportedBlock</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3117">processAndHandleReportedBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&nbsp;storageInfo,
                                 <a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                 <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;reportedState,
                                 <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;delHintNode)
                                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="processIncrementalBlockReport(org.apache.hadoop.hdfs.protocol.DatanodeID, org.apache.hadoop.hdfs.server.protocol.StorageReceivedDeletedBlocks)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processIncrementalBlockReport</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3164">processIncrementalBlockReport</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeID.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeID</a>&nbsp;nodeID,
                                 <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/StorageReceivedDeletedBlocks.html" title="class in org.apache.hadoop.hdfs.server.protocol">StorageReceivedDeletedBlocks</a>&nbsp;srdb)
                                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">The given node is reporting incremental information about some blocks.
 This includes blocks that are starting to be received, completed being
 received, or deleted.
 
 This method must be called with FSNamesystem lock held.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="countNodes(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countNodes</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/NumberReplicas.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">NumberReplicas</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3224">countNodes</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</pre>
<div class="block">Return the number of nodes hosting a given block, grouped
 by the state of those replicas.</div>
</li>
</ul>
<a name="countLiveNodes(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countLiveNodes</h4>
<pre>int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3263">countLiveNodes</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;b)</pre>
<div class="block">Simpler, faster form of <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#countNodes(org.apache.hadoop.hdfs.protocol.Block)"><code>countNodes(Block)</code></a> that only returns the number
 of live nodes.  If in startup safemode (or its 30-sec extension period),
 then it gains speed by ignoring issues of excess replicas or nodes
 that are decommissioned or in process of becoming decommissioned.
 If not in startup, then it calls <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#countNodes(org.apache.hadoop.hdfs.protocol.Block)"><code>countNodes(Block)</code></a> instead.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - - the block being tested</dd>
<dt><span class="strong">Returns:</span></dt><dd>count of live nodes for this block</dd></dl>
</li>
</ul>
<a name="processOverReplicatedBlocksOnReCommission(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processOverReplicatedBlocksOnReCommission</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3283">processOverReplicatedBlocksOnReCommission</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;srcNode)</pre>
<div class="block">On stopping decommission, check if the node has excess replicas.
 If there are any excess replicas, call processOverReplicatedBlock().
 Process over replicated blocks only when active NN is out of safe mode.</div>
</li>
</ul>
<a name="isNodeHealthyForDecommission(org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isNodeHealthyForDecommission</h4>
<pre>boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3310">isNodeHealthyForDecommission</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</pre>
<div class="block">Returns whether a node can be safely decommissioned based on its 
 liveness. Dead nodes cannot always be safely decommissioned.</div>
</li>
</ul>
<a name="getActiveBlockCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActiveBlockCount</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3338">getActiveBlockCount</a>()</pre>
</li>
</ul>
<a name="getStorages(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorages</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3342">getStorages</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block)</pre>
</li>
</ul>
<a name="getTotalBlocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTotalBlocks</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3351">getTotalBlocks</a>()</pre>
</li>
</ul>
<a name="removeBlock(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeBlock</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3355">removeBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</pre>
</li>
</ul>
<a name="getStoredBlock(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoredBlock</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3372">getStoredBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</pre>
</li>
</ul>
<a name="updateNeededReplications(org.apache.hadoop.hdfs.protocol.Block, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateNeededReplications</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3377">updateNeededReplications</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                            int&nbsp;curReplicasDelta,
                            int&nbsp;expectedReplicasDelta)</pre>
<div class="block">updates a block in under replication queue</div>
</li>
</ul>
<a name="checkReplication(org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkReplication</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3407">checkReplication</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc)</pre>
<div class="block">Check replication of the blocks in the collection.
 If any block is needed replication, insert it into the replication queue.
 Otherwise, if the block is more than the expected replication factor,
 process it as an over replicated block.</div>
</li>
</ul>
<a name="getReplication(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplication</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3424">getReplication</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>0 if the block is not found;
         otherwise, return the replication factor of the block.</dd></dl>
</li>
</ul>
<a name="invalidateWorkForOneNode(org.apache.hadoop.hdfs.protocol.DatanodeInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>invalidateWorkForOneNode</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3436">invalidateWorkForOneNode</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;dn)</pre>
<div class="block">Get blocks to invalidate for <i>nodeId</i>
 in <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#invalidateBlocks"><code>invalidateBlocks</code></a>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>number of blocks scheduled for removal during this iteration.</dd></dl>
</li>
</ul>
<a name="blockHasEnoughRacks(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockHasEnoughRacks</h4>
<pre>boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3470">blockHasEnoughRacks</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</pre>
</li>
</ul>
<a name="isNeededReplication(org.apache.hadoop.hdfs.protocol.Block, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isNeededReplication</h4>
<pre>boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3506">isNeededReplication</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b,
                          int&nbsp;expected,
                          int&nbsp;current)</pre>
<div class="block">A block needs replication if the number of replicas is less than expected
 or if it does not have enough racks.</div>
</li>
</ul>
<a name="getMissingBlocksCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMissingBlocksCount</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3510">getMissingBlocksCount</a>()</pre>
</li>
</ul>
<a name="getMissingReplOneBlocksCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMissingReplOneBlocksCount</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3515">getMissingReplOneBlocksCount</a>()</pre>
</li>
</ul>
<a name="addBlockCollection(org.apache.hadoop.hdfs.server.blockmanagement.BlockInfoContiguous, org.apache.hadoop.hdfs.server.blockmanagement.BlockCollection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addBlockCollection</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3520">addBlockCollection</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguous.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockInfoContiguous</a>&nbsp;block,
                                     <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;bc)</pre>
</li>
</ul>
<a name="getBlockCollection(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockCollection</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockCollection.html" title="interface in org.apache.hadoop.hdfs.server.blockmanagement">BlockCollection</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3525">getBlockCollection</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</pre>
</li>
</ul>
<a name="getStorages(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorages</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeStorageInfo.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeStorageInfo</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3530">getStorages</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>an iterator of the datanodes.</dd></dl>
</li>
</ul>
<a name="numCorruptReplicas(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numCorruptReplicas</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3534">numCorruptReplicas</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</pre>
</li>
</ul>
<a name="removeBlockFromMap(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeBlockFromMap</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3538">removeBlockFromMap</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</pre>
</li>
</ul>
<a name="getCapacity()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCapacity</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3544">getCapacity</a>()</pre>
</li>
</ul>
<a name="getCorruptReplicaBlockIds(int, java.lang.Long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCorruptReplicaBlockIds</h4>
<pre>public&nbsp;long[]&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3562">getCorruptReplicaBlockIds</a>(int&nbsp;numExpectedBlocks,
                               <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;startingBlockId)</pre>
<div class="block">Return a range of corrupt replica block ids. Up to numExpectedBlocks 
 blocks starting at the next block after startingBlockId are returned
 (fewer if numExpectedBlocks blocks are unavailable). If startingBlockId 
 is null, up to numExpectedBlocks blocks are returned from the beginning.
 If startingBlockId cannot be found, null is returned.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>numExpectedBlocks</code> - Number of block ids to return.
  0 <= numExpectedBlocks <= 100</dd><dd><code>startingBlockId</code> - Block id from which to start. If null, start at
  beginning.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Up to numExpectedBlocks blocks from startingBlockId if it exists</dd></dl>
</li>
</ul>
<a name="getCorruptReplicaBlockIterator()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCorruptReplicaBlockIterator</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3571">getCorruptReplicaBlockIterator</a>()</pre>
<div class="block">Return an iterator over the set of blocks for which there are no replicas.</div>
</li>
</ul>
<a name="getCorruptReplicas(org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCorruptReplicas</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3579">getCorruptReplicas</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block)</pre>
<div class="block">Get the replicas which are corrupt for a given block.</div>
</li>
</ul>
<a name="getCorruptReason(org.apache.hadoop.hdfs.protocol.Block, org.apache.hadoop.hdfs.server.blockmanagement.DatanodeDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCorruptReason</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3586">getCorruptReason</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">DatanodeDescriptor</a>&nbsp;node)</pre>
<div class="block">Get reason for certain corrupted replicas for a given block and a given dn.</div>
</li>
</ul>
<a name="numOfUnderReplicatedBlocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numOfUnderReplicatedBlocks</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3591">numOfUnderReplicatedBlocks</a>()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the size of UnderReplicatedBlocks</dd></dl>
</li>
</ul>
<a name="computeDatanodeWork()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeDatanodeWork</h4>
<pre>int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3639">computeDatanodeWork</a>()</pre>
<div class="block">Compute block replication and block invalidation work that can be scheduled
 on data-nodes. The datanode will be informed of this work at the next
 heartbeat.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>number of blocks scheduled for replication or removal.</dd></dl>
</li>
</ul>
<a name="clearQueues()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearQueues</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3672">clearQueues</a>()</pre>
<div class="block">Clear all queues that hold decisions previously made by
 this NameNode.</div>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3747">shutdown</a>()</pre>
</li>
</ul>
<a name="clear()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html#line.3752">clear</a>()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlockManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockInfoContiguousUnderConstruction.ReplicaUnderConstruction.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.BlockToMarkCorrupt.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.html" target="_top">Frames</a></li>
<li><a href="BlockManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
