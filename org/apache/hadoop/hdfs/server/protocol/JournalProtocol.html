<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:40:49 EDT 2015 -->
<title>JournalProtocol</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="JournalProtocol";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/JournalProtocol.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/KeyUpdateCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/protocol/JournalProtocol.html" target="_top">Frames</a></li>
<li><a href="JournalProtocol.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.protocol</div>
<h2 title="Interface JournalProtocol" class="title">Interface JournalProtocol</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/BackupNode.BackupNodeRpcServer.html" title="class in org.apache.hadoop.hdfs.server.namenode">BackupNode.BackupNodeRpcServer</a>, <a href="../../../../../../org/apache/hadoop/hdfs/protocolPB/JournalProtocolTranslatorPB.html" title="class in org.apache.hadoop.hdfs.protocolPB">JournalProtocolTranslatorPB</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
public interface <span class="strong">JournalProtocol</span></pre>
<div class="block">Protocol used to journal edits to a remote node. Currently,
 this is used to publish edits from the NameNode to a BackupNode.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalProtocol.html#versionID">versionID</a></strong></code>
<div class="block">This class is used by both the Namenode (client) and BackupNode (server) 
 to insulate from the protocol serialization.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/FenceResponse.html" title="class in org.apache.hadoop.hdfs.server.protocol">FenceResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalProtocol.html#fence(org.apache.hadoop.hdfs.server.protocol.JournalInfo,%20long,%20java.lang.String)">fence</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">JournalInfo</a>&nbsp;journalInfo,
     long&nbsp;epoch,
     <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;fencerInfo)</code>
<div class="block">Request to fence any other journal writers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalProtocol.html#journal(org.apache.hadoop.hdfs.server.protocol.JournalInfo,%20long,%20long,%20int,%20byte[])">journal</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">JournalInfo</a>&nbsp;journalInfo,
       long&nbsp;epoch,
       long&nbsp;firstTxnId,
       int&nbsp;numTxns,
       byte[]&nbsp;records)</code>
<div class="block">Journal edit records.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalProtocol.html#startLogSegment(org.apache.hadoop.hdfs.server.protocol.JournalInfo,%20long,%20long)">startLogSegment</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">JournalInfo</a>&nbsp;journalInfo,
               long&nbsp;epoch,
               long&nbsp;txid)</code>
<div class="block">Notify the BackupNode that the NameNode has rolled its edit logs
 and is now writing a new log segment.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="versionID">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>versionID</h4>
<pre>static final&nbsp;long versionID</pre>
<div class="block">This class is used by both the Namenode (client) and BackupNode (server) 
 to insulate from the protocol serialization.
 
 If you are adding/changing DN's interface then you need to 
 change both this class and ALSO related protocol buffer
 wire protocol definition in JournalProtocol.proto.
 
 For more details on protocol buffer wire protocol, please see 
 .../org/apache/hadoop/hdfs/protocolPB/overview.html</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.protocol.JournalProtocol.versionID">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="journal(org.apache.hadoop.hdfs.server.protocol.JournalInfo, long, long, int, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>journal</h4>
<pre>void&nbsp;journal(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">JournalInfo</a>&nbsp;journalInfo,
           long&nbsp;epoch,
           long&nbsp;firstTxnId,
           int&nbsp;numTxns,
           byte[]&nbsp;records)
             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Journal edit records.
 This message is sent by the active name-node to the backup node
 via <code>EditLogBackupOutputStream</code> in order to synchronize meta-data
 changes with the backup namespace image.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>journalInfo</code> - journal information</dd><dd><code>epoch</code> - marks beginning a new journal writer</dd><dd><code>firstTxnId</code> - the first transaction of this batch</dd><dd><code>numTxns</code> - number of transactions</dd><dd><code>records</code> - byte array containing serialized journal records</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/FencedException.html" title="class in org.apache.hadoop.hdfs.server.protocol">FencedException</a></code> - if the resource has been fenced</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="startLogSegment(org.apache.hadoop.hdfs.server.protocol.JournalInfo, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startLogSegment</h4>
<pre>void&nbsp;startLogSegment(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">JournalInfo</a>&nbsp;journalInfo,
                   long&nbsp;epoch,
                   long&nbsp;txid)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Notify the BackupNode that the NameNode has rolled its edit logs
 and is now writing a new log segment.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>journalInfo</code> - journal information</dd><dd><code>epoch</code> - marks beginning a new journal writer</dd><dd><code>txid</code> - the first txid in the new log</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/FencedException.html" title="class in org.apache.hadoop.hdfs.server.protocol">FencedException</a></code> - if the resource has been fenced</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="fence(org.apache.hadoop.hdfs.server.protocol.JournalInfo, long, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>fence</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/FenceResponse.html" title="class in org.apache.hadoop.hdfs.server.protocol">FenceResponse</a>&nbsp;fence(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">JournalInfo</a>&nbsp;journalInfo,
                  long&nbsp;epoch,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;fencerInfo)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Request to fence any other journal writers.
 Older writers with at previous epoch will be fenced and can no longer
 perform journal operations.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>journalInfo</code> - journal information</dd><dd><code>epoch</code> - marks beginning a new journal writer</dd><dd><code>fencerInfo</code> - info about fencer for debugging purposes</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/FencedException.html" title="class in org.apache.hadoop.hdfs.server.protocol">FencedException</a></code> - if the resource has been fenced</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/JournalProtocol.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/JournalInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/KeyUpdateCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/protocol/JournalProtocol.html" target="_top">Frames</a></li>
<li><a href="JournalProtocol.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
