<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:53:44 EDT 2015 -->
<title>FSImage</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FSImage";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FSImage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLogOpCodes.html" title="enum in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.FSImageSaver.html" title="class in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/FSImage.html" target="_top">Frames</a></li>
<li><a href="FSImage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.namenode</div>
<h2 title="Class FSImage" class="title">Class FSImage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.namenode.FSImage</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/BackupImage.html" title="class in org.apache.hadoop.hdfs.server.namenode">BackupImage</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.CheckpointStorage.html" title="class in org.apache.hadoop.hdfs.server.namenode">SecondaryNameNode.CheckpointStorage</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
@InterfaceStability.Evolving
public class <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.86">FSImage</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></pre>
<div class="block">FSImage handles checkpointing and logging of the namespace edits.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.FSImageSaver.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSImage.FSImageSaver</a></strong></code>
<div class="block">FSImageSaver is being run in a separate thread when saving
 FSImage.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorageRetentionManager.html" title="class in org.apache.hadoop.hdfs.server.namenode">NNStorageRetentionManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#archivalManager">archivalManager</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.hadoop.conf.Configuration</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#conf">conf</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#currentlyCheckpointing">currentlyCheckpointing</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLog.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSEditLog</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#editLog">editLog</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#isUpgradeFinalized">isUpgradeFinalized</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#lastAppliedTxId">lastAppliedTxId</a></strong></code>
<div class="block">The last transaction ID that was either loaded from an image
 or loaded by loading edits files.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html" title="class in org.apache.hadoop.hdfs.server.namenode">NNStorage</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#storage">storage</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#FSImage(org.apache.hadoop.conf.Configuration)">FSImage</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf)</code>
<div class="block">Construct an FSImage</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#FSImage(org.apache.hadoop.conf.Configuration,%20java.util.Collection,%20java.util.List)">FSImage</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;imageDirs,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;editsDirs)</code>
<div class="block">Construct the FSImage.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#addToCheckpointing(long)">addToCheckpointing</a></strong>(long&nbsp;txid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#checkUpgrade(org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">checkUpgrade</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target)</code>
<div class="block">Check if upgrade is in progress.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#close()">close</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#confirmFormat(boolean,%20boolean)">confirmFormat</a></strong>(boolean&nbsp;force,
                          boolean&nbsp;interactive)</code>
<div class="block">Check whether the storage directories and non-file journals exist.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#deleteCancelledCheckpoint(long)">deleteCancelledCheckpoint</a></strong>(long&nbsp;txid)</code>
<div class="block">Deletes the checkpoint file in every storage directory,
 since the checkpoint was cancelled.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#doImportCheckpoint(org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">doImportCheckpoint</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target)</code>
<div class="block">Load image from a checkpoint directory and save it into the current one.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#doRollback(org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">doRollback</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;fsns)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#doUpgrade(org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">doUpgrade</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#endCheckpoint(org.apache.hadoop.hdfs.server.namenode.CheckpointSignature)">endCheckpoint</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/CheckpointSignature.html" title="class in org.apache.hadoop.hdfs.server.namenode">CheckpointSignature</a>&nbsp;sig)</code>
<div class="block">End checkpoint.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#finalizeUpgrade(boolean)">finalizeUpgrade</a></strong>(boolean&nbsp;finalizeEditLog)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#format(org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20java.lang.String)">format</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;fsn,
            <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;clusterId)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getBlockPoolID()">getBlockPoolID</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getCheckpointDirs(org.apache.hadoop.conf.Configuration,%20java.lang.String)">getCheckpointDirs</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                  <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultValue)</code>
<div class="block">Retrieve checkpoint dirs from configuration.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getCheckpointEditsDirs(org.apache.hadoop.conf.Configuration,%20java.lang.String)">getCheckpointEditsDirs</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                            <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultName)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getClusterID()">getClusterID</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLog.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSEditLog</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getEditLog()">getEditLog</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getLastAppliedOrWrittenTxId()">getLastAppliedOrWrittenTxId</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getLastAppliedTxId()">getLastAppliedTxId</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getLayoutVersion()">getLayoutVersion</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getMostRecentCheckpointTxId()">getMostRecentCheckpointTxId</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getNamespaceID()">getNamespaceID</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html" title="class in org.apache.hadoop.hdfs.server.namenode">NNStorage</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#getStorage()">getStorage</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#hasRollbackFSImage()">hasRollbackFSImage</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#initEditLog(org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">initEditLog</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#isUpgradeFinalized()">isUpgradeFinalized</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#loadEdits(java.lang.Iterable,%20org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">loadEdits</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/EditLogInputStream.html" title="class in org.apache.hadoop.hdfs.server.namenode">EditLogInputStream</a>&gt;&nbsp;editStreams,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target)</code>
<div class="block">Load the specified list of edit files into the image.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#loadEdits(java.lang.Iterable,%20org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption,%20org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext)">loadEdits</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/EditLogInputStream.html" title="class in org.apache.hadoop.hdfs.server.namenode">EditLogInputStream</a>&gt;&nbsp;editStreams,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#loadFSImage(java.io.File,%20org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext,%20boolean)">loadFSImage</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;imageFile,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery,
                      boolean&nbsp;requireSameLayoutVersion)</code>
<div class="block">Load the image namespace from the given image file, verifying
 it against the MD5 sum stored in its associated .md5 file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#loadFSImage(java.io.File,%20org.apache.hadoop.io.MD5Hash,%20org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext,%20boolean)">loadFSImage</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;curFile,
                      org.apache.hadoop.io.MD5Hash&nbsp;expectedMd5,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery,
                      boolean&nbsp;requireSameLayoutVersion)</code>
<div class="block">Load in the filesystem image from file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#loadFSImage(org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption,%20org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext)">loadFSImage</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery)</code>
<div class="block">Choose latest image from one of the directories,
 load it and merge with the edits.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#loadFSImageFile(org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext,%20org.apache.hadoop.hdfs.server.namenode.FSImageStorageInspector.FSImageFile,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">loadFSImageFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImageStorageInspector.FSImageFile.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSImageStorageInspector.FSImageFile</a>&nbsp;imageFile,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startupOption)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#needsResaveBasedOnStaleCheckpoint(java.io.File,%20long)">needsResaveBasedOnStaleCheckpoint</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;imageFile,
                                                                  long&nbsp;numEditsLoaded)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#openEditLogForWrite()">openEditLogForWrite</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#purgeOldStorage(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile)">purgeOldStorage</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf)</code>
<div class="block">Purge any files in the storage directories that are no longer
 necessary.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#recoverStorageDirs(org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption,%20java.util.Map)">recoverStorageDirs</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt,
                                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>,<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageState.html" title="enum in org.apache.hadoop.hdfs.server.common">Storage.StorageState</a>&gt;&nbsp;dataDirStates)</code>
<div class="block">For each storage directory, performs recovery of incomplete transitions
 (eg.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#recoverTransitionRead(org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption,%20org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext)">recoverTransitionRead</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt,
                                          <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
                                          <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery)</code>
<div class="block">Analyze storage directories.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#reloadFromImageFile(java.io.File,%20org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">reloadFromImageFile</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target)</code>
<div class="block">Toss the current image and namesystem, reloading from the specified
 file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#removeFromCheckpointing(long)">removeFromCheckpointing</a></strong>(long&nbsp;txid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#renameCheckpoint(long,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20boolean)">renameCheckpoint</a></strong>(long&nbsp;txid,
                                <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;fromNnf,
                                <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;toNnf,
                                boolean&nbsp;renameMD5)</code>
<div class="block">Rename FSImage with the specific txid</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#renameCheckpoint(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile)">renameCheckpoint</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;fromNnf,
                                <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;toNnf)</code>
<div class="block">Rename all the fsimage files with the specific NameNodeFile type.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#renameImageFileInDir(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20long,%20boolean)">renameImageFileInDir</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;fromNnf,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;toNnf,
                                        long&nbsp;txid,
                                        boolean&nbsp;renameMD5)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/CheckpointSignature.html" title="class in org.apache.hadoop.hdfs.server.namenode">CheckpointSignature</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#rollEditLog()">rollEditLog</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#rollingRollback(long,%20long)">rollingRollback</a></strong>(long&nbsp;discardSegmentTxId,
                              long&nbsp;ckptId)</code>
<div class="block">rollback for rolling upgrade.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#saveDigestAndRenameCheckpointImage(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20long,%20org.apache.hadoop.io.MD5Hash)">saveDigestAndRenameCheckpointImage</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
                                                                    long&nbsp;txid,
                                                                    org.apache.hadoop.io.MD5Hash&nbsp;digest)</code>
<div class="block">This is called by the 2NN after having downloaded an image, and by
 the NN after having received a new image from the 2NN.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#saveFSImage(org.apache.hadoop.hdfs.server.namenode.SaveNamespaceContext,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile)">saveFSImage</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/SaveNamespaceContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">SaveNamespaceContext</a>&nbsp;context,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                      <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;dstType)</code>
<div class="block">Save the contents of the FS image to the file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#saveFSImageInAllDirs(org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20long)">saveFSImageInAllDirs</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;source,
                                        long&nbsp;txid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#saveFSImageInAllDirs(org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20long,%20org.apache.hadoop.hdfs.util.Canceler)">saveFSImageInAllDirs</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;source,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
                                        long&nbsp;txid,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/util/Canceler.html" title="class in org.apache.hadoop.hdfs.util">Canceler</a>&nbsp;canceler)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#saveLegacyOIVImage(org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20java.lang.String,%20org.apache.hadoop.hdfs.util.Canceler)">saveLegacyOIVImage</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;source,
                                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;targetDir,
                                    <a href="../../../../../../org/apache/hadoop/hdfs/util/Canceler.html" title="class in org.apache.hadoop.hdfs.util">Canceler</a>&nbsp;canceler)</code>
<div class="block">Save FSimage in the legacy format.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#saveNamespace(org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">saveNamespace</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;source)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#saveNamespace(org.apache.hadoop.hdfs.server.namenode.FSNamesystem,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20org.apache.hadoop.hdfs.util.Canceler)">saveNamespace</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;source,
                          <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
                          <a href="../../../../../../org/apache/hadoop/hdfs/util/Canceler.html" title="class in org.apache.hadoop.hdfs.util">Canceler</a>&nbsp;canceler)</code>
<div class="block">Save the contents of the FS image to a new image file in each of the
 current storage directories.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamenodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamenodeCommand</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#startCheckpoint(org.apache.hadoop.hdfs.server.protocol.NamenodeRegistration,%20org.apache.hadoop.hdfs.server.protocol.NamenodeRegistration)">startCheckpoint</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamenodeRegistration.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamenodeRegistration</a>&nbsp;bnReg,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamenodeRegistration.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamenodeRegistration</a>&nbsp;nnReg)</code>
<div class="block">Start checkpoint.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#updateCountForQuota(org.apache.hadoop.hdfs.server.blockmanagement.BlockStoragePolicySuite,%20org.apache.hadoop.hdfs.server.namenode.INodeDirectory)">updateCountForQuota</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a>&nbsp;bsps,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INodeDirectory.html" title="class in org.apache.hadoop.hdfs.server.namenode">INodeDirectory</a>&nbsp;root)</code>
<div class="block">Update the count of each directory with quota in the namespace.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#updateCountForQuotaRecursively(org.apache.hadoop.hdfs.server.blockmanagement.BlockStoragePolicySuite,%20byte,%20org.apache.hadoop.hdfs.server.namenode.INodeDirectory,%20org.apache.hadoop.hdfs.server.namenode.QuotaCounts)">updateCountForQuotaRecursively</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a>&nbsp;bsps,
                                                            byte&nbsp;blockStoragePolicyId,
                                                            <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INodeDirectory.html" title="class in org.apache.hadoop.hdfs.server.namenode">INodeDirectory</a>&nbsp;dir,
                                                            <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/QuotaCounts.html" title="class in org.apache.hadoop.hdfs.server.namenode">QuotaCounts</a>&nbsp;counts)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#updateLastAppliedTxIdFromWritten()">updateLastAppliedTxIdFromWritten</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#updateStorageVersion()">updateStorageVersion</a></strong>()</code>
<div class="block">Update version of all storage directories.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.html#waitForThreads(java.util.List)">waitForThreads</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&gt;&nbsp;threads)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>public static final&nbsp;org.apache.commons.logging.Log <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.87">LOG</a></pre>
</li>
</ul>
<a name="editLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>editLog</h4>
<pre>protected&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLog.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSEditLog</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.89">editLog</a></pre>
</li>
</ul>
<a name="isUpgradeFinalized">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isUpgradeFinalized</h4>
<pre>private&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.90">isUpgradeFinalized</a></pre>
</li>
</ul>
<a name="storage">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storage</h4>
<pre>protected&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html" title="class in org.apache.hadoop.hdfs.server.namenode">NNStorage</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.92">storage</a></pre>
</li>
</ul>
<a name="lastAppliedTxId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastAppliedTxId</h4>
<pre>protected&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.98">lastAppliedTxId</a></pre>
<div class="block">The last transaction ID that was either loaded from an image
 or loaded by loading edits files.</div>
</li>
</ul>
<a name="conf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conf</h4>
<pre>private final&nbsp;org.apache.hadoop.conf.Configuration <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.100">conf</a></pre>
</li>
</ul>
<a name="archivalManager">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>archivalManager</h4>
<pre>protected&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorageRetentionManager.html" title="class in org.apache.hadoop.hdfs.server.namenode">NNStorageRetentionManager</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.102">archivalManager</a></pre>
</li>
</ul>
<a name="currentlyCheckpointing">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>currentlyCheckpointing</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.110">currentlyCheckpointing</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FSImage(org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FSImage</h4>
<pre>public&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.118">FSImage</a>(org.apache.hadoop.conf.Configuration&nbsp;conf)
        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Construct an FSImage</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>conf</code> - Configuration</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if default directories are invalid.</dd></dl>
</li>
</ul>
<a name="FSImage(org.apache.hadoop.conf.Configuration, java.util.Collection, java.util.List)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FSImage</h4>
<pre>protected&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.134">FSImage</a>(org.apache.hadoop.conf.Configuration&nbsp;conf,
       <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;imageDirs,
       <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;editsDirs)
           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Construct the FSImage. Set the default checkpoint directories.

 Setup storage and initialize the edit log.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>conf</code> - Configuration</dd><dd><code>imageDirs</code> - Directories the image can be stored in.</dd><dd><code>editsDirs</code> - Directories the editlog can be stored in.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if directories are invalid.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="format(org.apache.hadoop.hdfs.server.namenode.FSNamesystem, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>format</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.151">format</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;fsn,
          <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;clusterId)
      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="confirmFormat(boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>confirmFormat</h4>
<pre>boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.177">confirmFormat</a>(boolean&nbsp;force,
                    boolean&nbsp;interactive)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Check whether the storage directories and non-file journals exist.
 If running in interactive mode, will prompt the user for each
 directory to allow them to format anyway. Otherwise, returns
 false, unless 'force' is specified.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>force</code> - if true, format regardless of whether dirs exist</dd><dd><code>interactive</code> - prompt the user when a dir exists</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if formatting should proceed</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if some storage cannot be accessed</dd></dl>
</li>
</ul>
<a name="recoverTransitionRead(org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption, org.apache.hadoop.hdfs.server.namenode.FSNamesystem, org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverTransitionRead</h4>
<pre>boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.196">recoverTransitionRead</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt,
                            <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
                            <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery)
                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Analyze storage directories.
 Recover from previous transitions if required. 
 Perform fs state transition if necessary depending on the namespace info.
 Read storage info.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the image needs to be saved or false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="recoverStorageDirs(org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverStorageDirs</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.304">recoverStorageDirs</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt,
                         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>,<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageState.html" title="enum in org.apache.hadoop.hdfs.server.common">Storage.StorageState</a>&gt;&nbsp;dataDirStates)
                            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">For each storage directory, performs recovery of incomplete transitions
 (eg. upgrade, rollback, checkpoint) and inserts the directory's storage
 state into the dataDirStates map.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>dataDirStates</code> - output of storage directory states</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if there is at least one valid formatted storage directory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="checkUpgrade(org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkUpgrade</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.355">checkUpgrade</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target)
            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Check if upgrade is in progress.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="hasRollbackFSImage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasRollbackFSImage</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.371">hasRollbackFSImage</a>()
                           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if there is rollback fsimage (for rolling upgrade) in NameNode
 directory.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doUpgrade(org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doUpgrade</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.383">doUpgrade</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target)
         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doRollback(org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doRollback</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.449">doRollback</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;fsns)
          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doImportCheckpoint(org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doImportCheckpoint</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.507">doImportCheckpoint</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target)
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Load image from a checkpoint directory and save it into the current one.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>target</code> - the NameSystem to import into</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="finalizeUpgrade(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeUpgrade</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.544">finalizeUpgrade</a>(boolean&nbsp;finalizeEditLog)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="isUpgradeFinalized()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isUpgradeFinalized</h4>
<pre>boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.562">isUpgradeFinalized</a>()</pre>
</li>
</ul>
<a name="getEditLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEditLog</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLog.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSEditLog</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.566">getEditLog</a>()</pre>
</li>
</ul>
<a name="openEditLogForWrite()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openEditLogForWrite</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.570">openEditLogForWrite</a>()
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="reloadFromImageFile(java.io.File, org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reloadFromImageFile</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.580">reloadFromImageFile</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file,
                       <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target)
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Toss the current image and namesystem, reloading from the specified
 file.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="loadFSImage(org.apache.hadoop.hdfs.server.namenode.FSNamesystem, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption, org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadFSImage</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.601">loadFSImage</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Choose latest image from one of the directories,
 load it and merge with the edits.
 
 Saving and loading fsimage should never trigger symlink resolution. 
 The paths that are persisted do not have *intermediate* symlinks 
 because intermediate symlinks are resolved at the time files, 
 directories, and symlinks are created. All paths accessed while 
 loading or saving fsimage should therefore only see symlinks as 
 the final path component, and the functions called below do not
 resolve symlinks that are the final path component.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>whether the image should be saved</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="rollingRollback(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollingRollback</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.705">rollingRollback</a>(long&nbsp;discardSegmentTxId,
                   long&nbsp;ckptId)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">rollback for rolling upgrade.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="loadFSImageFile(org.apache.hadoop.hdfs.server.namenode.FSNamesystem, org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext, org.apache.hadoop.hdfs.server.namenode.FSImageStorageInspector.FSImageFile, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadFSImageFile</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.723">loadFSImageFile</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
                   <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery,
                   <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImageStorageInspector.FSImageFile.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSImageStorageInspector.FSImageFile</a>&nbsp;imageFile,
                   <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startupOption)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="initEditLog(org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initEditLog</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.755">initEditLog</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt)
                 throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="needsResaveBasedOnStaleCheckpoint(java.io.File, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>needsResaveBasedOnStaleCheckpoint</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.794">needsResaveBasedOnStaleCheckpoint</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;imageFile,
                                        long&nbsp;numEditsLoaded)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>imageFile</code> - the image file that was loaded</dd><dd><code>numEditsLoaded</code> - the number of edits loaded from edits logs</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the NameNode should automatically save the namespace
 when it is started, due to the latest checkpoint being too old.</dd></dl>
</li>
</ul>
<a name="loadEdits(java.lang.Iterable, org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadEdits</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.811">loadEdits</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/EditLogInputStream.html" title="class in org.apache.hadoop.hdfs.server.namenode">EditLogInputStream</a>&gt;&nbsp;editStreams,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Load the specified list of edit files into the image.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="loadEdits(java.lang.Iterable, org.apache.hadoop.hdfs.server.namenode.FSNamesystem, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption, org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadEdits</h4>
<pre>private&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.816">loadEdits</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/EditLogInputStream.html" title="class in org.apache.hadoop.hdfs.server.namenode">EditLogInputStream</a>&gt;&nbsp;editStreams,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="updateCountForQuota(org.apache.hadoop.hdfs.server.blockmanagement.BlockStoragePolicySuite, org.apache.hadoop.hdfs.server.namenode.INodeDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateCountForQuota</h4>
<pre>static&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.861">updateCountForQuota</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a>&nbsp;bsps,
                       <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INodeDirectory.html" title="class in org.apache.hadoop.hdfs.server.namenode">INodeDirectory</a>&nbsp;root)</pre>
<div class="block">Update the count of each directory with quota in the namespace.
 A directory's count is defined as the total number inodes in the tree
 rooted at the directory.
 
 This is an update of existing state of the filesystem and does not
 throw QuotaExceededException.</div>
</li>
</ul>
<a name="updateCountForQuotaRecursively(org.apache.hadoop.hdfs.server.blockmanagement.BlockStoragePolicySuite, byte, org.apache.hadoop.hdfs.server.namenode.INodeDirectory, org.apache.hadoop.hdfs.server.namenode.QuotaCounts)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateCountForQuotaRecursively</h4>
<pre>private static&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.867">updateCountForQuotaRecursively</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a>&nbsp;bsps,
                                  byte&nbsp;blockStoragePolicyId,
                                  <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INodeDirectory.html" title="class in org.apache.hadoop.hdfs.server.namenode">INodeDirectory</a>&nbsp;dir,
                                  <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/QuotaCounts.html" title="class in org.apache.hadoop.hdfs.server.namenode">QuotaCounts</a>&nbsp;counts)</pre>
</li>
</ul>
<a name="loadFSImage(java.io.File, org.apache.hadoop.hdfs.server.namenode.FSNamesystem, org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadFSImage</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.930">loadFSImage</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;imageFile,
               <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
               <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery,
               boolean&nbsp;requireSameLayoutVersion)
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Load the image namespace from the given image file, verifying
 it against the MD5 sum stored in its associated .md5 file.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="loadFSImage(java.io.File, org.apache.hadoop.io.MD5Hash, org.apache.hadoop.hdfs.server.namenode.FSNamesystem, org.apache.hadoop.hdfs.server.namenode.MetaRecoveryContext, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadFSImage</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.946">loadFSImage</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;curFile,
               org.apache.hadoop.io.MD5Hash&nbsp;expectedMd5,
               <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;target,
               <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">MetaRecoveryContext</a>&nbsp;recovery,
               boolean&nbsp;requireSameLayoutVersion)
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Load in the filesystem image from file. It's a big list of
 filenames and blocks.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="saveFSImage(org.apache.hadoop.hdfs.server.namenode.SaveNamespaceContext, org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveFSImage</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.975">saveFSImage</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/SaveNamespaceContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">SaveNamespaceContext</a>&nbsp;context,
               <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
               <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;dstType)
           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Save the contents of the FS image to the file.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="saveLegacyOIVImage(org.apache.hadoop.hdfs.server.namenode.FSNamesystem, java.lang.String, org.apache.hadoop.hdfs.util.Canceler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveLegacyOIVImage</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.993">saveLegacyOIVImage</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;source,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;targetDir,
                      <a href="../../../../../../org/apache/hadoop/hdfs/util/Canceler.html" title="class in org.apache.hadoop.hdfs.util">Canceler</a>&nbsp;canceler)
                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Save FSimage in the legacy format. This is not for NN consumption,
 but for tools like OIV.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="waitForThreads(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForThreads</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1052">waitForThreads</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&gt;&nbsp;threads)</pre>
</li>
</ul>
<a name="updateStorageVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateStorageVersion</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1068">updateStorageVersion</a>()
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Update version of all storage directories.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="saveNamespace(org.apache.hadoop.hdfs.server.namenode.FSNamesystem)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveNamespace</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1075">saveNamespace</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;source)
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><code>#saveNamespace(FSNamesystem, NameNodeFile, Canceler)</code></dd></dl>
</li>
</ul>
<a name="saveNamespace(org.apache.hadoop.hdfs.server.namenode.FSNamesystem, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, org.apache.hadoop.hdfs.util.Canceler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveNamespace</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1084">saveNamespace</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;source,
                 <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
                 <a href="../../../../../../org/apache/hadoop/hdfs/util/Canceler.html" title="class in org.apache.hadoop.hdfs.util">Canceler</a>&nbsp;canceler)
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Save the contents of the FS image to a new image file in each of the
 current storage directories.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="saveFSImageInAllDirs(org.apache.hadoop.hdfs.server.namenode.FSNamesystem, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveFSImageInAllDirs</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1122">saveFSImageInAllDirs</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;source,
                        long&nbsp;txid)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><code>#saveFSImageInAllDirs(FSNamesystem, NameNodeFile, long, Canceler)</code></dd></dl>
</li>
</ul>
<a name="addToCheckpointing(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToCheckpointing</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1134">addToCheckpointing</a>(long&nbsp;txid)</pre>
</li>
</ul>
<a name="removeFromCheckpointing(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeFromCheckpointing</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1138">removeFromCheckpointing</a>(long&nbsp;txid)</pre>
</li>
</ul>
<a name="saveFSImageInAllDirs(org.apache.hadoop.hdfs.server.namenode.FSNamesystem, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, long, org.apache.hadoop.hdfs.util.Canceler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveFSImageInAllDirs</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1142">saveFSImageInAllDirs</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSNamesystem</a>&nbsp;source,
                        <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
                        long&nbsp;txid,
                        <a href="../../../../../../org/apache/hadoop/hdfs/util/Canceler.html" title="class in org.apache.hadoop.hdfs.util">Canceler</a>&nbsp;canceler)
                           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="purgeOldStorage(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeOldStorage</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1198">purgeOldStorage</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf)</pre>
<div class="block">Purge any files in the storage directories that are no longer
 necessary.</div>
</li>
</ul>
<a name="renameCheckpoint(long, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renameCheckpoint</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1209">renameCheckpoint</a>(long&nbsp;txid,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;fromNnf,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;toNnf,
                    boolean&nbsp;renameMD5)
                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Rename FSImage with the specific txid</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="renameCheckpoint(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renameCheckpoint</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1231">renameCheckpoint</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;fromNnf,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;toNnf)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Rename all the fsimage files with the specific NameNodeFile type. The
 associated checksum files will also be renamed.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="deleteCancelledCheckpoint(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteCancelledCheckpoint</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1257">deleteCancelledCheckpoint</a>(long&nbsp;txid)
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Deletes the checkpoint file in every storage directory,
 since the checkpoint was cancelled.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="renameImageFileInDir(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, long, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renameImageFileInDir</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1270">renameImageFileInDir</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                        <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;fromNnf,
                        <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;toNnf,
                        long&nbsp;txid,
                        boolean&nbsp;renameMD5)
                           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="rollEditLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollEditLog</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/CheckpointSignature.html" title="class in org.apache.hadoop.hdfs.server.namenode">CheckpointSignature</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1290">rollEditLog</a>()
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="startCheckpoint(org.apache.hadoop.hdfs.server.protocol.NamenodeRegistration, org.apache.hadoop.hdfs.server.protocol.NamenodeRegistration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startCheckpoint</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamenodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamenodeCommand</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1315">startCheckpoint</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamenodeRegistration.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamenodeRegistration</a>&nbsp;bnReg,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamenodeRegistration.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamenodeRegistration</a>&nbsp;nnReg)
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Start checkpoint.
 <p>
 If backup storage contains image that is newer than or incompatible with 
 what the active name-node has, then the backup node should shutdown.<br>
 If the backup image is older than the active one then it should 
 be discarded and downloaded from the active node.<br>
 If the images are the same then the backup image will be used as current.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bnReg</code> - the backup node registration.</dd><dd><code>nnReg</code> - this (active) name-node registration.</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamenodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol"><code>NamenodeCommand</code></a> if backup node should shutdown or
 <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/CheckpointCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol"><code>CheckpointCommand</code></a> prescribing what backup node should 
         do with its image.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="endCheckpoint(org.apache.hadoop.hdfs.server.namenode.CheckpointSignature)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endCheckpoint</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1357">endCheckpoint</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/CheckpointSignature.html" title="class in org.apache.hadoop.hdfs.server.namenode">CheckpointSignature</a>&nbsp;sig)
             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">End checkpoint.
 <p>
 Validate the current storage info with the given signature.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sig</code> - to validate the current storage info against</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the checkpoint fields are inconsistent</dd></dl>
</li>
</ul>
<a name="saveDigestAndRenameCheckpointImage(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, long, org.apache.hadoop.io.MD5Hash)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveDigestAndRenameCheckpointImage</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1368">saveDigestAndRenameCheckpointImage</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
                                      long&nbsp;txid,
                                      org.apache.hadoop.io.MD5Hash&nbsp;digest)
                                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">This is called by the 2NN after having downloaded an image, and by
 the NN after having received a new image from the 2NN. It
 renames the image from fsimage_N.ckpt to fsimage_N and also
 saves the related .md5 file into place.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1396">close</a>()
           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true#close()" title="class or interface in java.io">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true#close()" title="class or interface in java.lang">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getCheckpointDirs(org.apache.hadoop.conf.Configuration, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckpointDirs</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1412">getCheckpointDirs</a>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultValue)</pre>
<div class="block">Retrieve checkpoint dirs from configuration.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>conf</code> - the Configuration</dd><dd><code>defaultValue</code> - a default value for the attribute, if null</dd>
<dt><span class="strong">Returns:</span></dt><dd>a Collection of URIs representing the values in 
 dfs.namenode.checkpoint.dir configuration property</dd></dl>
</li>
</ul>
<a name="getCheckpointEditsDirs(org.apache.hadoop.conf.Configuration, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckpointEditsDirs</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1422">getCheckpointEditsDirs</a>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                               <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultName)</pre>
</li>
</ul>
<a name="getStorage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorage</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html" title="class in org.apache.hadoop.hdfs.server.namenode">NNStorage</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1432">getStorage</a>()</pre>
</li>
</ul>
<a name="getLayoutVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLayoutVersion</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1436">getLayoutVersion</a>()</pre>
</li>
</ul>
<a name="getNamespaceID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNamespaceID</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1440">getNamespaceID</a>()</pre>
</li>
</ul>
<a name="getClusterID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClusterID</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1444">getClusterID</a>()</pre>
</li>
</ul>
<a name="getBlockPoolID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockPoolID</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1448">getBlockPoolID</a>()</pre>
</li>
</ul>
<a name="getLastAppliedTxId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastAppliedTxId</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1452">getLastAppliedTxId</a>()</pre>
</li>
</ul>
<a name="getLastAppliedOrWrittenTxId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastAppliedOrWrittenTxId</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1456">getLastAppliedOrWrittenTxId</a>()</pre>
</li>
</ul>
<a name="updateLastAppliedTxIdFromWritten()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateLastAppliedTxIdFromWritten</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1461">updateLastAppliedTxIdFromWritten</a>()</pre>
</li>
</ul>
<a name="getMostRecentCheckpointTxId()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getMostRecentCheckpointTxId</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/FSImage.html#line.1469">getMostRecentCheckpointTxId</a>()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FSImage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLogOpCodes.html" title="enum in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImage.FSImageSaver.html" title="class in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/FSImage.html" target="_top">Frames</a></li>
<li><a href="FSImage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
