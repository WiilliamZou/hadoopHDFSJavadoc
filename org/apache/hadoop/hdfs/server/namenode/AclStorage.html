<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:40:18 EDT 2015 -->
<title>AclStorage</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AclStorage";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AclStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclTransformation.html" title="class in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/AclStorage.html" target="_top">Frames</a></li>
<li><a href="AclStorage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.namenode</div>
<h2 title="Class AclStorage" class="title">Class AclStorage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.namenode.AclStorage</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@InterfaceAudience.Private
public final class <span class="strong">AclStorage</span>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">AclStorage contains utility methods that define how ACL data is stored in the
 namespace.

 If an inode has an ACL, then the ACL bit is set in the inode's
 <code>FsPermission</code> and the inode also contains an <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode"><code>AclFeature</code></a>.  For
 the access ACL, the owner and other entries are identical to the owner and
 other bits stored in FsPermission, so we reuse those.  The access mask entry
 is stored into the group permission bits of FsPermission.  This is consistent
 with other file systems' implementations of ACLs and eliminates the need for
 special handling in various parts of the codebase.  For example, if a user
 calls chmod to change group permission bits on a file with an ACL, then the
 expected behavior is to change the ACL's mask entry.  By saving the mask entry
 into the group permission bits, chmod continues to work correctly without
 special handling.  All remaining access entries (named users and named groups)
 are stored as explicit <code>AclEntry</code> instances in a list inside the
 AclFeature.  Additionally, all default entries are stored in the AclFeature.

 The methods in this class encapsulate these rules for reading or writing the
 ACL entries to the appropriate location.

 The methods in this class assume that input ACL entry lists have already been
 validated and sorted according to the rules enforced by
 <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclTransformation.html" title="class in org.apache.hadoop.hdfs.server.namenode"><code>AclTransformation</code></a>.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="../../../../../../org/apache/hadoop/hdfs/util/ReferenceCountMap.html" title="class in org.apache.hadoop.hdfs.util">ReferenceCountMap</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#UNIQUE_ACL_FEATURES">UNIQUE_ACL_FEATURES</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#AclStorage()">AclStorage</a></strong>()</code>
<div class="block">There is no reason to instantiate this class.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#addAclFeature(org.apache.hadoop.hdfs.server.namenode.AclFeature)">addAclFeature</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&nbsp;aclFeature)</code>
<div class="block">Add reference for the said AclFeature</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#copyINodeDefaultAcl(org.apache.hadoop.hdfs.server.namenode.INode)">copyINodeDefaultAcl</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&nbsp;child)</code>
<div class="block">If a default ACL is defined on a parent directory, then copies that default
 ACL to a newly created child file or directory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#createAclFeature(java.util.List,%20java.util.List)">createAclFeature</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;accessEntries,
                <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;defaultEntries)</code>
<div class="block">Creates an AclFeature from the given ACL entries.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static org.apache.hadoop.fs.permission.FsPermission</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#createFsPermissionForExtendedAcl(java.util.List,%20org.apache.hadoop.fs.permission.FsPermission)">createFsPermissionForExtendedAcl</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;accessEntries,
                                org.apache.hadoop.fs.permission.FsPermission&nbsp;existingPerm)</code>
<div class="block">Creates the new FsPermission for an inode that is receiving an extended
 ACL, based on its access ACL entries.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static org.apache.hadoop.fs.permission.FsPermission</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#createFsPermissionForMinimalAcl(java.util.List,%20org.apache.hadoop.fs.permission.FsPermission)">createFsPermissionForMinimalAcl</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;accessEntries,
                               org.apache.hadoop.fs.permission.FsPermission&nbsp;existingPerm)</code>
<div class="block">Creates the new FsPermission for an inode that is receiving a minimal ACL,
 based on its access ACL entries.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static com.google.common.collect.ImmutableList&lt;org.apache.hadoop.fs.permission.AclEntry&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#getEntriesFromAclFeature(org.apache.hadoop.hdfs.server.namenode.AclFeature)">getEntriesFromAclFeature</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&nbsp;aclFeature)</code>
<div class="block">Build list of AclEntries from the AclFeature</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../org/apache/hadoop/hdfs/util/ReferenceCountMap.html" title="class in org.apache.hadoop.hdfs.util">ReferenceCountMap</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#getUniqueAclFeatures()">getUniqueAclFeatures</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#readINodeAcl(org.apache.hadoop.hdfs.server.namenode.INode,%20int)">readINodeAcl</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&nbsp;inode,
            int&nbsp;snapshotId)</code>
<div class="block">Reads the existing extended ACL entries of an inode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#readINodeLogicalAcl(org.apache.hadoop.hdfs.server.namenode.INode)">readINodeLogicalAcl</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&nbsp;inode)</code>
<div class="block">Reads the existing ACL of an inode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#removeAclFeature(org.apache.hadoop.hdfs.server.namenode.AclFeature)">removeAclFeature</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&nbsp;aclFeature)</code>
<div class="block">Remove reference to the AclFeature</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclStorage.html#updateINodeAcl(org.apache.hadoop.hdfs.server.namenode.INode,%20java.util.List,%20int)">updateINodeAcl</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&nbsp;inode,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;newAcl,
              int&nbsp;snapshotId)</code>
<div class="block">Updates an inode with a new ACL.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="UNIQUE_ACL_FEATURES">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UNIQUE_ACL_FEATURES</h4>
<pre>private static final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/util/ReferenceCountMap.html" title="class in org.apache.hadoop.hdfs.util">ReferenceCountMap</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&gt; UNIQUE_ACL_FEATURES</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AclStorage()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AclStorage</h4>
<pre>private&nbsp;AclStorage()</pre>
<div class="block">There is no reason to instantiate this class.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="copyINodeDefaultAcl(org.apache.hadoop.hdfs.server.namenode.INode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copyINodeDefaultAcl</h4>
<pre>public static&nbsp;void&nbsp;copyINodeDefaultAcl(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&nbsp;child)</pre>
<div class="block">If a default ACL is defined on a parent directory, then copies that default
 ACL to a newly created child file or directory.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>child</code> - INode newly created child</dd></dl>
</li>
</ul>
<a name="readINodeAcl(org.apache.hadoop.hdfs.server.namenode.INode, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readINodeAcl</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;readINodeAcl(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&nbsp;inode,
                                                          int&nbsp;snapshotId)</pre>
<div class="block">Reads the existing extended ACL entries of an inode.  This method returns
 only the extended ACL entries stored in the AclFeature.  If the inode does
 not have an ACL, then this method returns an empty list.  This method
 supports querying by snapshot ID.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inode</code> - INode to read</dd><dd><code>snapshotId</code> - int ID of snapshot to read</dd>
<dt><span class="strong">Returns:</span></dt><dd>List<AclEntry> containing extended inode ACL entries</dd></dl>
</li>
</ul>
<a name="getEntriesFromAclFeature(org.apache.hadoop.hdfs.server.namenode.AclFeature)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntriesFromAclFeature</h4>
<pre>static&nbsp;com.google.common.collect.ImmutableList&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;getEntriesFromAclFeature(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&nbsp;aclFeature)</pre>
<div class="block">Build list of AclEntries from the AclFeature</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>aclFeature</code> - AclFeature</dd>
<dt><span class="strong">Returns:</span></dt><dd>List of entries</dd></dl>
</li>
</ul>
<a name="readINodeLogicalAcl(org.apache.hadoop.hdfs.server.namenode.INode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readINodeLogicalAcl</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;readINodeLogicalAcl(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&nbsp;inode)</pre>
<div class="block">Reads the existing ACL of an inode.  This method always returns the full
 logical ACL of the inode after reading relevant data from the inode's
 <code>FsPermission</code> and <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode"><code>AclFeature</code></a>.  Note that every inode
 logically has an ACL, even if no ACL has been set explicitly.  If the inode
 does not have an extended ACL, then the result is a minimal ACL consising of
 exactly 3 entries that correspond to the owner, group and other permissions.
 This method always reads the inode's current state and does not support
 querying by snapshot ID.  This is because the method is intended to support
 ACL modification APIs, which always apply a delta on top of current state.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inode</code> - INode to read</dd>
<dt><span class="strong">Returns:</span></dt><dd>List<AclEntry> containing all logical inode ACL entries</dd></dl>
</li>
</ul>
<a name="updateINodeAcl(org.apache.hadoop.hdfs.server.namenode.INode, java.util.List, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateINodeAcl</h4>
<pre>public static&nbsp;void&nbsp;updateINodeAcl(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&nbsp;inode,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;newAcl,
                  int&nbsp;snapshotId)
                           throws <a href="../../../../../../org/apache/hadoop/hdfs/protocol/AclException.html" title="class in org.apache.hadoop.hdfs.protocol">AclException</a>,
                                  <a href="../../../../../../org/apache/hadoop/hdfs/protocol/QuotaExceededException.html" title="class in org.apache.hadoop.hdfs.protocol">QuotaExceededException</a></pre>
<div class="block">Updates an inode with a new ACL.  This method takes a full logical ACL and
 stores the entries to the inode's <code>FsPermission</code> and
 <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode"><code>AclFeature</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inode</code> - INode to update</dd><dd><code>newAcl</code> - List<AclEntry> containing new ACL entries</dd><dd><code>snapshotId</code> - int latest snapshot ID of inode</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/protocol/AclException.html" title="class in org.apache.hadoop.hdfs.protocol">AclException</a></code> - if the ACL is invalid for the given inode</dd>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/protocol/QuotaExceededException.html" title="class in org.apache.hadoop.hdfs.protocol">QuotaExceededException</a></code> - if quota limit is exceeded</dd></dl>
</li>
</ul>
<a name="createAclFeature(java.util.List, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createAclFeature</h4>
<pre>private static&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&nbsp;createAclFeature(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;accessEntries,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;defaultEntries)</pre>
<div class="block">Creates an AclFeature from the given ACL entries.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>accessEntries</code> - List<AclEntry> access ACL entries</dd><dd><code>defaultEntries</code> - List<AclEntry> default ACL entries</dd>
<dt><span class="strong">Returns:</span></dt><dd>AclFeature containing the required ACL entries</dd></dl>
</li>
</ul>
<a name="createFsPermissionForExtendedAcl(java.util.List, org.apache.hadoop.fs.permission.FsPermission)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFsPermissionForExtendedAcl</h4>
<pre>private static&nbsp;org.apache.hadoop.fs.permission.FsPermission&nbsp;createFsPermissionForExtendedAcl(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;accessEntries,
                                                                            org.apache.hadoop.fs.permission.FsPermission&nbsp;existingPerm)</pre>
<div class="block">Creates the new FsPermission for an inode that is receiving an extended
 ACL, based on its access ACL entries.  For a correctly sorted ACL, the
 first entry is the owner and the last 2 entries are the mask and other
 entries respectively.  Also preserve sticky bit and toggle ACL bit on.
 Note that this method intentionally copies the permissions of the mask
 entry into the FsPermission group permissions.  This is consistent with the
 POSIX ACLs model, which presents the mask as the permissions of the group
 class.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>accessEntries</code> - List<AclEntry> access ACL entries</dd><dd><code>existingPerm</code> - FsPermission existing permissions</dd>
<dt><span class="strong">Returns:</span></dt><dd>FsPermission new permissions</dd></dl>
</li>
</ul>
<a name="createFsPermissionForMinimalAcl(java.util.List, org.apache.hadoop.fs.permission.FsPermission)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFsPermissionForMinimalAcl</h4>
<pre>private static&nbsp;org.apache.hadoop.fs.permission.FsPermission&nbsp;createFsPermissionForMinimalAcl(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.hadoop.fs.permission.AclEntry&gt;&nbsp;accessEntries,
                                                                           org.apache.hadoop.fs.permission.FsPermission&nbsp;existingPerm)</pre>
<div class="block">Creates the new FsPermission for an inode that is receiving a minimal ACL,
 based on its access ACL entries.  For a correctly sorted ACL, the owner,
 group and other permissions are in order.  Also preserve sticky bit and
 toggle ACL bit off.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>accessEntries</code> - List<AclEntry> access ACL entries</dd><dd><code>existingPerm</code> - FsPermission existing permissions</dd>
<dt><span class="strong">Returns:</span></dt><dd>FsPermission new permissions</dd></dl>
</li>
</ul>
<a name="getUniqueAclFeatures()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUniqueAclFeatures</h4>
<pre>public static&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/util/ReferenceCountMap.html" title="class in org.apache.hadoop.hdfs.util">ReferenceCountMap</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&gt;&nbsp;getUniqueAclFeatures()</pre>
</li>
</ul>
<a name="addAclFeature(org.apache.hadoop.hdfs.server.namenode.AclFeature)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addAclFeature</h4>
<pre>public static&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&nbsp;addAclFeature(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&nbsp;aclFeature)</pre>
<div class="block">Add reference for the said AclFeature</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>aclFeature</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Referenced AclFeature</dd></dl>
</li>
</ul>
<a name="removeAclFeature(org.apache.hadoop.hdfs.server.namenode.AclFeature)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>removeAclFeature</h4>
<pre>public static&nbsp;void&nbsp;removeAclFeature(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode">AclFeature</a>&nbsp;aclFeature)</pre>
<div class="block">Remove reference to the AclFeature</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>aclFeature</code> - </dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AclStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclFeature.html" title="class in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/AclTransformation.html" title="class in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/AclStorage.html" target="_top">Frames</a></li>
<li><a href="AclStorage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
