<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:53:39 EDT 2015 -->
<title>RollingWindow</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="RollingWindow";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RollingWindow.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.Bucket.html" title="class in org.apache.hadoop.hdfs.server.namenode.top.window"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html" target="_top">Frames</a></li>
<li><a href="RollingWindow.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.namenode.top.window</div>
<h2 title="Class RollingWindow" class="title">Class RollingWindow</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.namenode.top.window.RollingWindow</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@InterfaceAudience.Private
public class <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#line.53">RollingWindow</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A class for exposing a rolling window view on the event that occur over time.
 Events are reported based on occurrence time. The total number of events in
 the last period covered by the rolling window can be retrieved by the
 <a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#getSum(long)"><code>getSum(long)</code></a> method.
 <p/>

 Assumptions:
 <p/>

 (1) Concurrent invocation of <a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#incAt(long,%20long)"><code>incAt(long, long)</code></a> method are possible
 <p/>

 (2) The time parameter of two consecutive invocation of <a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#incAt(long,%20long)"><code>incAt(long, long)</code></a> could
 be in any given order
 <p/>

 (3) The buffering delays are not more than the window length, i.e., after two
 consecutive invocation <a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#incAt(long,%20long)"><code>incAt(long time1, long)</code></a> and
 <a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#incAt(long,%20long)"><code>incAt(long time2, long)</code></a>, time1 < time2 || time1 - time2 < windowLenMs.
 This assumption helps avoiding unnecessary synchronizations.
 <p/>

 Thread-safety is built in the <a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.Bucket.html" title="class in org.apache.hadoop.hdfs.server.namenode.top.window"><code>RollingWindow.Bucket</code></a></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.Bucket.html" title="class in org.apache.hadoop.hdfs.server.namenode.top.window">RollingWindow.Bucket</a></strong></code>
<div class="block">Thread-safety is provided by synchronization when resetting the update time
 as well as atomic fields.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.Bucket.html" title="class in org.apache.hadoop.hdfs.server.namenode.top.window">RollingWindow.Bucket</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#buckets">buckets</a></strong></code>
<div class="block">Each window is composed of buckets, which offer a trade-off between
 accuracy and space complexity: the lower the number of buckets, the less
 memory is required by the rolling window but more inaccuracy is possible in
 reading window total values.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#bucketSize">bucketSize</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static org.slf4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#windowLenMs">windowLenMs</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#RollingWindow(int,%20int)">RollingWindow</a></strong>(int&nbsp;windowLenMs,
                          int&nbsp;numBuckets)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#computeBucketIndex(long)">computeBucketIndex</a></strong>(long&nbsp;time)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#getSum(long)">getSum</a></strong>(long&nbsp;time)</code>
<div class="block">Get value represented by this window at the specified time
 <p/>

 If time lags behind the latest update time, the new updates are still
 included in the sum</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#incAt(long,%20long)">incAt</a></strong>(long&nbsp;time,
          long&nbsp;delta)</code>
<div class="block">When an event occurs at the specified time, this method reflects that in
 the rolling window.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>private static final&nbsp;org.slf4j.Logger <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#line.54">LOG</a></pre>
</li>
</ul>
<a name="buckets">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buckets</h4>
<pre><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.Bucket.html" title="class in org.apache.hadoop.hdfs.server.namenode.top.window">RollingWindow.Bucket</a>[] <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#line.62">buckets</a></pre>
<div class="block">Each window is composed of buckets, which offer a trade-off between
 accuracy and space complexity: the lower the number of buckets, the less
 memory is required by the rolling window but more inaccuracy is possible in
 reading window total values.</div>
</li>
</ul>
<a name="windowLenMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>windowLenMs</h4>
<pre>final&nbsp;int <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#line.63">windowLenMs</a></pre>
</li>
</ul>
<a name="bucketSize">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>bucketSize</h4>
<pre>final&nbsp;int <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#line.64">bucketSize</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RollingWindow(int, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RollingWindow</h4>
<pre><a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#line.71">RollingWindow</a>(int&nbsp;windowLenMs,
             int&nbsp;numBuckets)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>windowLenMs</code> - The period that is covered by the window. This period must
          be more than the buffering delays.</dd><dd><code>numBuckets</code> - number of buckets in the window</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="incAt(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incAt</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#line.93">incAt</a>(long&nbsp;time,
         long&nbsp;delta)</pre>
<div class="block">When an event occurs at the specified time, this method reflects that in
 the rolling window.
 <p/></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>time</code> - the time at which the event occurred</dd><dd><code>delta</code> - the delta that will be added to the window</dd></dl>
</li>
</ul>
<a name="computeBucketIndex(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeBucketIndex</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#line.104">computeBucketIndex</a>(long&nbsp;time)</pre>
</li>
</ul>
<a name="getSum(long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSum</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html#line.172">getSum</a>(long&nbsp;time)</pre>
<div class="block">Get value represented by this window at the specified time
 <p/>

 If time lags behind the latest update time, the new updates are still
 included in the sum</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>time</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>number of events occurred in the past period</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RollingWindow.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../../../org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.Bucket.html" title="class in org.apache.hadoop.hdfs.server.namenode.top.window"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/top/window/RollingWindow.html" target="_top">Frames</a></li>
<li><a href="RollingWindow.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
