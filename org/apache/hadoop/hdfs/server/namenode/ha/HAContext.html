<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:53:38 EDT 2015 -->
<title>HAContext</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="HAContext";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HAContext.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/EditLogTailer.EditLogTailerThread.html" title="class in org.apache.hadoop.hdfs.server.namenode.ha"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAState.html" title="class in org.apache.hadoop.hdfs.server.namenode.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html" target="_top">Frames</a></li>
<li><a href="HAContext.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.namenode.ha</div>
<h2 title="Interface HAContext" class="title">Interface HAContext</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/BackupNode.BNHAContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">BackupNode.BNHAContext</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/NameNode.NameNodeHAContext.html" title="class in org.apache.hadoop.hdfs.server.namenode">NameNode.NameNodeHAContext</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
public interface <a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.32">HAContext</a></pre>
<div class="block">Context that is to be used by <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAState.html" title="class in org.apache.hadoop.hdfs.server.namenode.ha"><code>HAState</code></a> for getting/setting the
 current state and performing required operations.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#allowStaleReads()">allowStaleReads</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#checkOperation(org.apache.hadoop.hdfs.server.namenode.NameNode.OperationCategory)">checkOperation</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/NameNode.OperationCategory.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NameNode.OperationCategory</a>&nbsp;op)</code>
<div class="block">Verify that the given operation category is allowed in the current state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAState.html" title="class in org.apache.hadoop.hdfs.server.namenode.ha">HAState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#getState()">getState</a></strong>()</code>
<div class="block">Get the state from the context</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#prepareToStopStandbyServices()">prepareToStopStandbyServices</a></strong>()</code>
<div class="block">Prepare to exit the standby state</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#setState(org.apache.hadoop.hdfs.server.namenode.ha.HAState)">setState</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAState.html" title="class in org.apache.hadoop.hdfs.server.namenode.ha">HAState</a>&nbsp;state)</code>
<div class="block">Set the state of the context to given <code>state</code></div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#startActiveServices()">startActiveServices</a></strong>()</code>
<div class="block">Start the services required in active state</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#startStandbyServices()">startStandbyServices</a></strong>()</code>
<div class="block">Start the services required in standby state</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#stopActiveServices()">stopActiveServices</a></strong>()</code>
<div class="block">Stop the services when exiting active state</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#stopStandbyServices()">stopStandbyServices</a></strong>()</code>
<div class="block">Stop the services when exiting standby state</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#writeLock()">writeLock</a></strong>()</code>
<div class="block">Take a write-lock on the underlying namesystem
 so that no concurrent state transitions or edits
 can be made.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#writeUnlock()">writeUnlock</a></strong>()</code>
<div class="block">Unlock the lock taken by <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#writeLock()"><code>writeLock()</code></a></div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setState(org.apache.hadoop.hdfs.server.namenode.ha.HAState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setState</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.34">setState</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAState.html" title="class in org.apache.hadoop.hdfs.server.namenode.ha">HAState</a>&nbsp;state)</pre>
<div class="block">Set the state of the context to given <code>state</code></div>
</li>
</ul>
<a name="getState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getState</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAState.html" title="class in org.apache.hadoop.hdfs.server.namenode.ha">HAState</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.37">getState</a>()</pre>
<div class="block">Get the state from the context</div>
</li>
</ul>
<a name="startActiveServices()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startActiveServices</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.40">startActiveServices</a>()
                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Start the services required in active state</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="stopActiveServices()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopActiveServices</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.43">stopActiveServices</a>()
                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Stop the services when exiting active state</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="startStandbyServices()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startStandbyServices</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.46">startStandbyServices</a>()
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Start the services required in standby state</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="prepareToStopStandbyServices()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareToStopStandbyServices</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.49">prepareToStopStandbyServices</a>()
                                  throws org.apache.hadoop.ha.ServiceFailedException</pre>
<div class="block">Prepare to exit the standby state</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>org.apache.hadoop.ha.ServiceFailedException</code></dd></dl>
</li>
</ul>
<a name="stopStandbyServices()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopStandbyServices</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.52">stopStandbyServices</a>()
                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Stop the services when exiting standby state</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="writeLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeLock</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.59">writeLock</a>()</pre>
<div class="block">Take a write-lock on the underlying namesystem
 so that no concurrent state transitions or edits
 can be made.</div>
</li>
</ul>
<a name="writeUnlock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeUnlock</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.64">writeUnlock</a>()</pre>
<div class="block">Unlock the lock taken by <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#writeLock()"><code>writeLock()</code></a></div>
</li>
</ul>
<a name="checkOperation(org.apache.hadoop.hdfs.server.namenode.NameNode.OperationCategory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkOperation</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.79">checkOperation</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/NameNode.OperationCategory.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NameNode.OperationCategory</a>&nbsp;op)
                    throws org.apache.hadoop.ipc.StandbyException</pre>
<div class="block">Verify that the given operation category is allowed in the current state.
 This is to allow NN implementations (eg BackupNode) to override it with
 node-specific handling.
 
 If the operation which is being checked will be taking the FSNS lock, it's
 advisable to check the operation category both immediately before and after
 taking the lock. This is because clients rely on the StandbyException
 thrown by this method in order to trigger client failover, and if a client
 first tries to contact the Standby NN, it could block for a long time if
 the Standby is holding the lock for a while, e.g. when performing a
 checkpoint. See HDFS-4591 for more details.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>org.apache.hadoop.ipc.StandbyException</code></dd></dl>
</li>
</ul>
<a name="allowStaleReads()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>allowStaleReads</h4>
<pre>boolean&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html#line.85">allowStaleReads</a>()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the node should allow stale reads (ie reads
 while the namespace is not up to date)</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HAContext.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/EditLogTailer.EditLogTailerThread.html" title="class in org.apache.hadoop.hdfs.server.namenode.ha"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/ha/HAState.html" title="class in org.apache.hadoop.hdfs.server.namenode.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/ha/HAContext.html" target="_top">Frames</a></li>
<li><a href="HAContext.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
