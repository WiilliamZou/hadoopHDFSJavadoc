<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:40:47 EDT 2015 -->
<title>AbstractINodeDiff</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractINodeDiff";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractINodeDiff.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiffList.html" title="class in org.apache.hadoop.hdfs.server.namenode.snapshot"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" target="_top">Frames</a></li>
<li><a href="AbstractINodeDiff.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.namenode.snapshot</div>
<h2 title="Class AbstractINodeDiff" class="title">Class AbstractINodeDiff&lt;N extends <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>,A extends <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INodeAttributes.html" title="interface in org.apache.hadoop.hdfs.server.namenode">INodeAttributes</a>,D extends AbstractINodeDiff&lt;N,A,D&gt;&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.namenode.snapshot.AbstractINodeDiff&lt;N,A,D&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/DirectoryWithSnapshotFeature.DirectoryDiff.html" title="class in org.apache.hadoop.hdfs.server.namenode.snapshot">DirectoryWithSnapshotFeature.DirectoryDiff</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/FileDiff.html" title="class in org.apache.hadoop.hdfs.server.namenode.snapshot">FileDiff</a></dd>
</dl>
<hr>
<br>
<pre>abstract class <span class="strong">AbstractINodeDiff&lt;N extends <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>,A extends <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INodeAttributes.html" title="interface in org.apache.hadoop.hdfs.server.namenode">INodeAttributes</a>,D extends AbstractINodeDiff&lt;N,A,D&gt;&gt;</span>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;</pre>
<div class="block">The difference of an inode between in two snapshots.
 <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiffList.html" title="class in org.apache.hadoop.hdfs.server.namenode.snapshot"><code>AbstractINodeDiffList</code></a> maintains a list of snapshot diffs,
 <pre>
   d_1 -> d_2 -> ... -> d_n -> null,
 </pre>
 where -> denotes the <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#posteriorDiff"><code>posteriorDiff</code></a> reference. The
 current directory state is stored in the field of <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode"><code>INode</code></a>.
 The snapshot state can be obtained by applying the diffs one-by-one in
 reversed chronological order.  Let s_1, s_2, ..., s_n be the corresponding
 snapshots.  Then,
 <pre>
   s_n                     = (current state) - d_n;
   s_{n-1} = s_n - d_{n-1} = (current state) - d_n - d_{n-1};
   ...
   s_k     = s_{k+1} - d_k = (current state) - d_n - d_{n-1} - ... - d_k.
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#posteriorDiff">posteriorDiff</a></strong></code>
<div class="block">Posterior diff is the diff happened after this diff.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#snapshotId">snapshotId</a></strong></code>
<div class="block">The id of the corresponding snapshot.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">A</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#snapshotINode">snapshotINode</a></strong></code>
<div class="block">The snapshot inode data.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#AbstractINodeDiff(int,%20A,%20D)">AbstractINodeDiff</a></strong>(int&nbsp;snapshotId,
                 <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">A</a>&nbsp;snapshotINode,
                 <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a>&nbsp;posteriorDiff)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) abstract <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/QuotaCounts.html" title="class in org.apache.hadoop.hdfs.server.namenode">QuotaCounts</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#combinePosteriorAndCollectBlocks(org.apache.hadoop.hdfs.server.blockmanagement.BlockStoragePolicySuite,%20N,%20D,%20org.apache.hadoop.hdfs.server.namenode.INode.BlocksMapUpdateInfo,%20java.util.List)">combinePosteriorAndCollectBlocks</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a>&nbsp;bsps,
                                <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">N</a>&nbsp;currentINode,
                                <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a>&nbsp;posterior,
                                <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.BlocksMapUpdateInfo.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode.BlocksMapUpdateInfo</a>&nbsp;collectedBlocks,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&gt;&nbsp;removedINodes)</code>
<div class="block">Combine the posterior diff and collect blocks for deletion.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#compareTo(java.lang.Integer)">compareTo</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&nbsp;that)</code>
<div class="block">Compare diffs with snapshot ID.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) abstract <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/QuotaCounts.html" title="class in org.apache.hadoop.hdfs.server.namenode">QuotaCounts</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#destroyDiffAndCollectBlocks(org.apache.hadoop.hdfs.server.blockmanagement.BlockStoragePolicySuite,%20N,%20org.apache.hadoop.hdfs.server.namenode.INode.BlocksMapUpdateInfo,%20java.util.List)">destroyDiffAndCollectBlocks</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a>&nbsp;bsps,
                           <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">N</a>&nbsp;currentINode,
                           <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.BlocksMapUpdateInfo.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode.BlocksMapUpdateInfo</a>&nbsp;collectedBlocks,
                           <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&gt;&nbsp;removedINodes)</code>
<div class="block">Delete and clear self.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#getPosterior()">getPosterior</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#getSnapshotId()">getSnapshotId</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">A</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#getSnapshotINode()">getSnapshotINode</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#saveSnapshotCopy(A)">saveSnapshotCopy</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">A</a>&nbsp;snapshotCopy)</code>
<div class="block">Save the INode state to the snapshot if it is not done already.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#setPosterior(D)">setPosterior</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a>&nbsp;posterior)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#setSnapshotId(int)">setSnapshotId</a></strong>(int&nbsp;snapshot)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#write(java.io.DataOutput,%20org.apache.hadoop.hdfs.server.namenode.snapshot.SnapshotFSImageFormat.ReferenceMap)">write</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/DataOutput.html?is-external=true" title="class or interface in java.io">DataOutput</a>&nbsp;out,
     <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/SnapshotFSImageFormat.ReferenceMap.html" title="class in org.apache.hadoop.hdfs.server.namenode.snapshot">SnapshotFSImageFormat.ReferenceMap</a>&nbsp;referenceMap)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html#writeSnapshot(java.io.DataOutput)">writeSnapshot</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/DataOutput.html?is-external=true" title="class or interface in java.io">DataOutput</a>&nbsp;out)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="snapshotId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snapshotId</h4>
<pre>private&nbsp;int snapshotId</pre>
<div class="block">The id of the corresponding snapshot.</div>
</li>
</ul>
<a name="snapshotINode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snapshotINode</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">A</a> extends <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INodeAttributes.html" title="interface in org.apache.hadoop.hdfs.server.namenode">INodeAttributes</a> snapshotINode</pre>
<div class="block">The snapshot inode data.  It is null when there is no change.</div>
</li>
</ul>
<a name="posteriorDiff">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>posteriorDiff</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a> extends <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="class in org.apache.hadoop.hdfs.server.namenode.snapshot">AbstractINodeDiff</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">N</a>,<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">A</a>,<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a>&gt; posteriorDiff</pre>
<div class="block">Posterior diff is the diff happened after this diff.
 The posterior diff should be first applied to obtain the posterior
 snapshot and then apply this diff in order to obtain this snapshot.
 If the posterior diff is null, the posterior state is the current state.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AbstractINodeDiff(int,org.apache.hadoop.hdfs.server.namenode.INodeAttributes,org.apache.hadoop.hdfs.server.namenode.snapshot.AbstractINodeDiff)">
<!--   -->
</a><a name="AbstractINodeDiff(int, A, D)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractINodeDiff</h4>
<pre>AbstractINodeDiff(int&nbsp;snapshotId,
                 <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">A</a>&nbsp;snapshotINode,
                 <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a>&nbsp;posteriorDiff)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="compareTo(java.lang.Integer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compareTo</h4>
<pre>public final&nbsp;int&nbsp;compareTo(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&nbsp;that)</pre>
<div class="block">Compare diffs with snapshot ID.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true#compareTo(T)" title="class or interface in java.lang">compareTo</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getSnapshotId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSnapshotId</h4>
<pre>public final&nbsp;int&nbsp;getSnapshotId()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the snapshot object of this diff.</dd></dl>
</li>
</ul>
<a name="setSnapshotId(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSnapshotId</h4>
<pre>final&nbsp;void&nbsp;setSnapshotId(int&nbsp;snapshot)</pre>
</li>
</ul>
<a name="getPosterior()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPosterior</h4>
<pre>final&nbsp;<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a>&nbsp;getPosterior()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the posterior diff.</dd></dl>
</li>
</ul>
<a name="setPosterior(org.apache.hadoop.hdfs.server.namenode.snapshot.AbstractINodeDiff)">
<!--   -->
</a><a name="setPosterior(D)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPosterior</h4>
<pre>final&nbsp;void&nbsp;setPosterior(<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a>&nbsp;posterior)</pre>
</li>
</ul>
<a name="saveSnapshotCopy(org.apache.hadoop.hdfs.server.namenode.INodeAttributes)">
<!--   -->
</a><a name="saveSnapshotCopy(A)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveSnapshotCopy</h4>
<pre>void&nbsp;saveSnapshotCopy(<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">A</a>&nbsp;snapshotCopy)</pre>
<div class="block">Save the INode state to the snapshot if it is not done already.</div>
</li>
</ul>
<a name="getSnapshotINode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSnapshotINode</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">A</a>&nbsp;getSnapshotINode()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the inode corresponding to the snapshot.</dd></dl>
</li>
</ul>
<a name="combinePosteriorAndCollectBlocks(org.apache.hadoop.hdfs.server.blockmanagement.BlockStoragePolicySuite,org.apache.hadoop.hdfs.server.namenode.INode,org.apache.hadoop.hdfs.server.namenode.snapshot.AbstractINodeDiff,org.apache.hadoop.hdfs.server.namenode.INode.BlocksMapUpdateInfo,java.util.List)">
<!--   -->
</a><a name="combinePosteriorAndCollectBlocks(org.apache.hadoop.hdfs.server.blockmanagement.BlockStoragePolicySuite, N, D, org.apache.hadoop.hdfs.server.namenode.INode.BlocksMapUpdateInfo, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>combinePosteriorAndCollectBlocks</h4>
<pre>abstract&nbsp;<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/QuotaCounts.html" title="class in org.apache.hadoop.hdfs.server.namenode">QuotaCounts</a>&nbsp;combinePosteriorAndCollectBlocks(<a href="../../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a>&nbsp;bsps,
                                           <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">N</a>&nbsp;currentINode,
                                           <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">D</a>&nbsp;posterior,
                                           <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.BlocksMapUpdateInfo.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode.BlocksMapUpdateInfo</a>&nbsp;collectedBlocks,
                                           <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&gt;&nbsp;removedINodes)</pre>
<div class="block">Combine the posterior diff and collect blocks for deletion.</div>
</li>
</ul>
<a name="destroyDiffAndCollectBlocks(org.apache.hadoop.hdfs.server.blockmanagement.BlockStoragePolicySuite,org.apache.hadoop.hdfs.server.namenode.INode,org.apache.hadoop.hdfs.server.namenode.INode.BlocksMapUpdateInfo,java.util.List)">
<!--   -->
</a><a name="destroyDiffAndCollectBlocks(org.apache.hadoop.hdfs.server.blockmanagement.BlockStoragePolicySuite, N, org.apache.hadoop.hdfs.server.namenode.INode.BlocksMapUpdateInfo, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroyDiffAndCollectBlocks</h4>
<pre>abstract&nbsp;<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/QuotaCounts.html" title="class in org.apache.hadoop.hdfs.server.namenode">QuotaCounts</a>&nbsp;destroyDiffAndCollectBlocks(<a href="../../../../../../../org/apache/hadoop/hdfs/server/blockmanagement/BlockStoragePolicySuite.html" title="class in org.apache.hadoop.hdfs.server.blockmanagement">BlockStoragePolicySuite</a>&nbsp;bsps,
                                      <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" title="type parameter in AbstractINodeDiff">N</a>&nbsp;currentINode,
                                      <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.BlocksMapUpdateInfo.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode.BlocksMapUpdateInfo</a>&nbsp;collectedBlocks,
                                      <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/INode.html" title="class in org.apache.hadoop.hdfs.server.namenode">INode</a>&gt;&nbsp;removedINodes)</pre>
<div class="block">Delete and clear self.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bsps</code> - The block storage policy suite used to retrieve storage policy</dd><dd><code>currentINode</code> - The inode where the deletion happens.</dd><dd><code>collectedBlocks</code> - Used to collect blocks for deletion.</dd><dd><code>removedINodes</code> - INodes removed</dd>
<dt><span class="strong">Returns:</span></dt><dd>quota usage delta</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="writeSnapshot(java.io.DataOutput)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeSnapshot</h4>
<pre>void&nbsp;writeSnapshot(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/DataOutput.html?is-external=true" title="class or interface in java.io">DataOutput</a>&nbsp;out)
             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="write(java.io.DataOutput, org.apache.hadoop.hdfs.server.namenode.snapshot.SnapshotFSImageFormat.ReferenceMap)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>write</h4>
<pre>abstract&nbsp;void&nbsp;write(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/DataOutput.html?is-external=true" title="class or interface in java.io">DataOutput</a>&nbsp;out,
         <a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/SnapshotFSImageFormat.ReferenceMap.html" title="class in org.apache.hadoop.hdfs.server.namenode.snapshot">SnapshotFSImageFormat.ReferenceMap</a>&nbsp;referenceMap)
             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractINodeDiff.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../../org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiffList.html" title="class in org.apache.hadoop.hdfs.server.namenode.snapshot"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/snapshot/AbstractINodeDiff.html" target="_top">Frames</a></li>
<li><a href="AbstractINodeDiff.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
