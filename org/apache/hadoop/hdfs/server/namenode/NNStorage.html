<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:40:25 EDT 2015 -->
<title>NNStorage</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="NNStorage";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/NNStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/Namesystem.html" title="interface in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeDirType.html" title="enum in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/NNStorage.html" target="_top">Frames</a></li>
<li><a href="NNStorage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.namenode</div>
<h2 title="Class NNStorage" class="title">Class NNStorage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">org.apache.hadoop.hdfs.server.common.StorageInfo</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">org.apache.hadoop.hdfs.server.common.Storage</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.namenode.NNStorage</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageErrorReporter.html" title="interface in org.apache.hadoop.hdfs.server.common">StorageErrorReporter</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
public class <span class="strong">NNStorage</span>
extends <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a>
implements <a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageErrorReporter.html" title="interface in org.apache.hadoop.hdfs.server.common">StorageErrorReporter</a></pre>
<div class="block">NNStorage is responsible for management of the StorageDirectories used by
 the NameNode.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeDirType.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeDirType</a></strong></code>
<div class="block">Implementation of StorageDirType specific to namenode storage
 A Storage directory could be of type IMAGE which stores only fsimage,
 or of type EDITS which stores edits or of type IMAGE_AND_EDITS which
 stores both fsimage and edits.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_org.apache.hadoop.hdfs.server.common.Storage">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.apache.hadoop.hdfs.server.common.<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.FormatConfirmable.html" title="interface in org.apache.hadoop.hdfs.server.common">Storage.FormatConfirmable</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirType.html" title="interface in org.apache.hadoop.hdfs.server.common">Storage.StorageDirType</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageState.html" title="enum in org.apache.hadoop.hdfs.server.common">Storage.StorageState</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#blockpoolID">blockpoolID</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#DEPRECATED_MESSAGE_DIGEST_PROPERTY">DEPRECATED_MESSAGE_DIGEST_PROPERTY</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#deprecatedProperties">deprecatedProperties</a></strong></code>
<div class="block">Properties from old layout versions that may be needed
 during upgrade only.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#disablePreUpgradableLayoutCheck">disablePreUpgradableLayoutCheck</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#LOCAL_URI_SCHEME">LOCAL_URI_SCHEME</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#mostRecentCheckpointTime">mostRecentCheckpointTime</a></strong></code>
<div class="block">Time of the last checkpoint, in milliseconds since the epoch.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#mostRecentCheckpointTxId">mostRecentCheckpointTxId</a></strong></code>
<div class="block">TxId of the last transaction that was included in the most
 recent fsimage file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#removedStorageDirs">removedStorageDirs</a></strong></code>
<div class="block">list of failed (and thus removed) storages</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#restorationLock">restorationLock</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#restoreFailedStorage">restoreFailedStorage</a></strong></code>
<div class="block">flag that controls if we try to restore failed storages</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.hadoop.hdfs.server.common.Storage">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.hadoop.hdfs.server.common.<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#LAST_PRE_UPGRADE_LAYOUT_VERSION">LAST_PRE_UPGRADE_LAYOUT_VERSION</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#LAST_UPGRADABLE_HADOOP_VERSION">LAST_UPGRADABLE_HADOOP_VERSION</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#LAST_UPGRADABLE_LAYOUT_VERSION">LAST_UPGRADABLE_LAYOUT_VERSION</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#LAYOUT_VERSIONS_203">LAYOUT_VERSIONS_203</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#LOG">LOG</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_1_BBW">STORAGE_1_BBW</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_DIR_CURRENT">STORAGE_DIR_CURRENT</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_DIR_PREVIOUS">STORAGE_DIR_PREVIOUS</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_FILE_LOCK">STORAGE_FILE_LOCK</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_PREVIOUS_CKPT">STORAGE_PREVIOUS_CKPT</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_TMP_FINALIZED">STORAGE_TMP_FINALIZED</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_TMP_LAST_CKPT">STORAGE_TMP_LAST_CKPT</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_TMP_PREVIOUS">STORAGE_TMP_PREVIOUS</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_TMP_REMOVED">STORAGE_TMP_REMOVED</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#storageDirs">storageDirs</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.hadoop.hdfs.server.common.StorageInfo">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.hadoop.hdfs.server.common.<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#clusterID">clusterID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#cTime">cTime</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#layoutVersion">layoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#namespaceID">namespaceID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#STORAGE_FILE_VERSION">STORAGE_FILE_VERSION</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#storageType">storageType</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#NNStorage(org.apache.hadoop.conf.Configuration,%20java.util.Collection,%20java.util.Collection)">NNStorage</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf,
         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;imageDirs,
         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;editsDirs)</code>
<div class="block">Construct the NNStorage.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#attemptRestoreRemovedStorage()">attemptRestoreRemovedStorage</a></strong>()</code>
<div class="block">See if any of removed storages is "writable" again, and can be returned
 into service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#checkSchemeConsistency(java.net.URI)">checkSchemeConsistency</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;u)</code>
<div class="block">Checks the consistency of a URI, in particular if the scheme
 is specified</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#close()">close</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#determineClusterId()">determineClusterId</a></strong>()</code>
<div class="block">try to find current cluster id in the VERSION files
 returns first cluster id found in any VERSION file
 null in case none found</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#findFile(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeDirType,%20java.lang.String)">findFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeDirType.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeDirType</a>&nbsp;dirType,
        <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>
<div class="block">Return the first readable storage file of the given name
 across any of the 'current' directories in SDs of the
 given type, or null if no such file exists.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#findFinalizedEditsFile(long,%20long)">findFinalizedEditsFile</a></strong>(long&nbsp;startTxId,
                      long&nbsp;endTxId)</code>
<div class="block">Return the first readable finalized edits file for the given txid.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#findImageFile(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20long)">findImageFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
             long&nbsp;txid)</code>
<div class="block">Return the first readable image file for the given txid and image type, or
 null if no such image can be found</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#format()">format</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">format</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)</code>
<div class="block">Format all available storage directories.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#format(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">format</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>
<div class="block">Create new dfs name directory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getBlockPoolID()">getBlockPoolID</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getCheckpointImageFileName(long)">getCheckpointImageFileName</a></strong>(long&nbsp;txid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getDeprecatedProperty(java.lang.String)">getDeprecatedProperty</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;prop)</code>
<div class="block">Return a property that was stored in an earlier version of HDFS.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getDirectories(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeDirType)">getDirectories</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeDirType.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeDirType</a>&nbsp;dirType)</code>
<div class="block">Return the list of locations being used for a specific purpose.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getEditsDirectories()">getEditsDirectories</a></strong>()</code>
<div class="block">Retrieve current directories of type EDITS</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getFinalizedEditsFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20long,%20long)">getFinalizedEditsFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                     long&nbsp;startTxId,
                     long&nbsp;endTxId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getFinalizedEditsFileName(long,%20long)">getFinalizedEditsFileName</a></strong>(long&nbsp;startTxId,
                         long&nbsp;endTxId)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getFsImage(long,%20java.util.EnumSet)">getFsImage</a></strong>(long&nbsp;txid,
          <a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html?is-external=true" title="class or interface in java.util">EnumSet</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&gt;&nbsp;nnfs)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getFsImageName(long)">getFsImageName</a></strong>(long&nbsp;txid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getFsImageName(long,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile)">getFsImageName</a></strong>(long&nbsp;txid,
              <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getFsImageNameCheckpoint(long)">getFsImageNameCheckpoint</a></strong>(long&nbsp;txid)</code>
<div class="block">Return the name of the image file that is uploaded by periodic
 checkpointing</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getHighestFsImageName()">getHighestFsImageName</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getImageDirectories()">getImageDirectories</a></strong>()</code>
<div class="block">Retrieve current directories of type IMAGE</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getImageFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20long)">getImageFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
            <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
            long&nbsp;txid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getImageFileName(long)">getImageFileName</a></strong>(long&nbsp;txid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getInProgressEditsFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20long)">getInProgressEditsFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                      long&nbsp;startTxId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getInProgressEditsFileName(long)">getInProgressEditsFileName</a></strong>(long&nbsp;startTxId)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getLegacyOIVImageFileName(long)">getLegacyOIVImageFileName</a></strong>(long&nbsp;txid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getMostRecentCheckpointTime()">getMostRecentCheckpointTime</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getMostRecentCheckpointTxId()">getMostRecentCheckpointTxId</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getNameNodeFileName(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20long)">getNameNodeFileName</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
                   long&nbsp;txid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getNamespaceInfo()">getNamespaceInfo</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getNumStorageDirs(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeDirType)">getNumStorageDirs</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeDirType.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeDirType</a>&nbsp;dirType)</code>
<div class="block">Return number of storage directories of the given type.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getRemovedStorageDirs()">getRemovedStorageDirs</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getRestoreFailedStorage()">getRestoreFailedStorage</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getRollbackImageFileName(long)">getRollbackImageFileName</a></strong>(long&nbsp;txid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getStorageDirectory(java.net.URI)">getStorageDirectory</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri)</code>
<div class="block">Return the storage directory corresponding to the passed URI</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getStorageFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile)">getStorageFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
              <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;type)</code>
<div class="block">Get a storage file for one of the files that doesn't need a txid associated
 (e.g version, seen_txid)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getStorageFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile,%20long)">getStorageFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
              <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;type,
              long&nbsp;imageTxId)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getTemporaryEditsFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20long,%20long,%20long)">getTemporaryEditsFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                     long&nbsp;startTxId,
                     long&nbsp;endTxId,
                     long&nbsp;timestamp)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#getTemporaryEditsFileName(long,%20long,%20long)">getTemporaryEditsFileName</a></strong>(long&nbsp;startTxId,
                         long&nbsp;endTxId,
                         long&nbsp;timestamp)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#inspectStorageDirs(org.apache.hadoop.hdfs.server.namenode.FSImageStorageInspector)">inspectStorageDirs</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImageStorageInspector.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSImageStorageInspector</a>&nbsp;inspector)</code>
<div class="block">Iterate over all current storage directories, inspecting them
 with the given inspector.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#isPreUpgradableLayout(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">isPreUpgradableLayout</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>
<div class="block">Return true if the layout of the given storage directory is from a version
 of Hadoop prior to the introduction of the "current" and "previous"
 directories which allow upgrade and rollback.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#newBlockPoolID()">newBlockPoolID</a></strong>()</code>
<div class="block">Generate new blockpoolID.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#newClusterID()">newClusterID</a></strong>()</code>
<div class="block">Generate new clusterID.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#newNamespaceID()">newNamespaceID</a></strong>()</code>
<div class="block">Generate new namespaceID.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#newNamespaceInfo()">newNamespaceInfo</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#processStartupOptionsForUpgrade(org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption,%20int)">processStartupOptionsForUpgrade</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt,
                               int&nbsp;layoutVersion)</code>
<div class="block">Processes the startup options for the clusterid and blockpoolid 
 for the upgrade.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImageStorageInspector.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSImageStorageInspector</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#readAndInspectDirs(java.util.EnumSet,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">readAndInspectDirs</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html?is-external=true" title="class or interface in java.util">EnumSet</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&gt;&nbsp;fileTypes,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startupOption)</code>
<div class="block">Iterate over all of the storage dirs, reading their contents to determine
 their layout versions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#readProperties(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">readProperties</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
              <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startupOption)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#readTransactionIdFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">readTransactionIdFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>
<div class="block">Determine the last transaction ID noted in this storage directory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#reportErrorOnFile(java.io.File)">reportErrorOnFile</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;f)</code>
<div class="block">Report that an IOE has occurred on some file which may
 or may not be within one of the NN image storage directories.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#reportErrorsOnDirectories(java.util.List)">reportErrorsOnDirectories</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&gt;&nbsp;sds)</code>
<div class="block">Marks a list of directories as having experienced an error.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#reportErrorsOnDirectory(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">reportErrorsOnDirectory</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>
<div class="block">Reports that a directory has experienced an error.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setBlockPoolID(java.io.File,%20java.lang.String)">setBlockPoolID</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;storage,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Validate and set block pool ID</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setBlockPoolID(java.lang.String)">setBlockPoolID</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Validate and set block pool ID</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setClusterID(java.lang.String)">setClusterID</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;cid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setDeprecatedPropertiesForUpgrade(java.util.Properties)">setDeprecatedPropertiesForUpgrade</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props)</code>
<div class="block">Pull any properties out of the VERSION file that are from older
 versions of HDFS and only necessary during upgrade.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setDisablePreUpgradableLayoutCheck(boolean)">setDisablePreUpgradableLayoutCheck</a></strong>(boolean&nbsp;val)</code>
<div class="block">Disable the check for pre-upgradable layouts.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setFieldsFromProperties(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setFieldsFromProperties</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props,
                       <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>
<div class="block">Get common storage fields.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setMostRecentCheckpointInfo(long,%20long)">setMostRecentCheckpointInfo</a></strong>(long&nbsp;txid,
                           long&nbsp;time)</code>
<div class="block">Set the transaction ID and time of the last checkpoint</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setPropertiesFromFields(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setPropertiesFromFields</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props,
                       <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>
<div class="block">Write version file into the storage directory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setRestoreFailedStorage(boolean)">setRestoreFailedStorage</a></strong>(boolean&nbsp;val)</code>
<div class="block">Set flag whether an attempt should be made to restore failed storage
 directories at the next available oppurtuinity.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setStorageDirectories(java.util.Collection,%20java.util.Collection)">setStorageDirectories</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;fsNameDirs,
                     <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;fsEditsDirs)</code>
<div class="block">See <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setStorageDirectories(java.util.Collection,%20java.util.Collection,%20java.util.Collection)"><code>setStorageDirectories(Collection, Collection, Collection)</code></a></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setStorageDirectories(java.util.Collection,%20java.util.Collection,%20java.util.Collection)">setStorageDirectories</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;fsNameDirs,
                     <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;fsEditsDirs,
                     <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;sharedEditsDirs)</code>
<div class="block">Set the storage directories which will be used.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#writeTransactionIdFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20long)">writeTransactionIdFile</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                      long&nbsp;txid)</code>
<div class="block">Write last checkpoint time into a separate file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#writeTransactionIdFileToStorage(long)">writeTransactionIdFileToStorage</a></strong>(long&nbsp;txid)</code>
<div class="block">Write a small file in all available storage directories that
 indicates that the namespace has reached some given transaction ID.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.hadoop.hdfs.server.common.Storage">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.hadoop.hdfs.server.common.<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#addStorageDir(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">addStorageDir</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#checkVersionUpgradable(int)">checkVersionUpgradable</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#confirmFormat(java.lang.Iterable,%20boolean,%20boolean)">confirmFormat</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#containsStorageDir(java.io.File)">containsStorageDir</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#deleteDir(java.io.File)">deleteDir</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#dirIterable(org.apache.hadoop.hdfs.server.common.Storage.StorageDirType)">dirIterable</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#dirIterator()">dirIterator</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#dirIterator(boolean)">dirIterator</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#dirIterator(org.apache.hadoop.hdfs.server.common.Storage.StorageDirType)">dirIterator</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#dirIterator(org.apache.hadoop.hdfs.server.common.Storage.StorageDirType,%20boolean)">dirIterator</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getBuildVersion()">getBuildVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getFiles(org.apache.hadoop.hdfs.server.common.Storage.StorageDirType,%20java.lang.String)">getFiles</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getNumStorageDirs()">getNumStorageDirs</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getRegistrationID(org.apache.hadoop.hdfs.server.common.StorageInfo)">getRegistrationID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getSingularStorageDir()">getSingularStorageDir</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getStorageDir(int)">getStorageDir</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#is203LayoutVersion(int)">is203LayoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#listStorageDirectories()">listStorageDirectories</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#nativeCopyFileUnbuffered(java.io.File,%20java.io.File,%20boolean)">nativeCopyFileUnbuffered</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#rename(java.io.File,%20java.io.File)">rename</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#unlockAll()">unlockAll</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#writeAll()">writeAll</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#writeProperties(java.io.File,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">writeProperties</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#writeProperties(java.io.File,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20java.util.Properties)">writeProperties</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#writeProperties(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">writeProperties</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.hadoop.hdfs.server.common.StorageInfo">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.hadoop.hdfs.server.common.<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#checkStorageType(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">checkStorageType</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getClusterID()">getClusterID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getClusterIdFromColonSeparatedString(java.lang.String)">getClusterIdFromColonSeparatedString</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getCTime()">getCTime</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getLayoutVersion()">getLayoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getNamespaceID()">getNamespaceID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getNsIdFromColonSeparatedString(java.lang.String)">getNsIdFromColonSeparatedString</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getProperty(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20java.lang.String)">getProperty</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getServiceLayoutFeatureMap()">getServiceLayoutFeatureMap</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getServiceLayoutVersion()">getServiceLayoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#readPreviousVersionProperties(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">readPreviousVersionProperties</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#readProperties(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">readProperties</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#readPropertiesFile(java.io.File)">readPropertiesFile</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setClusterId(java.util.Properties,%20int,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setClusterId</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setcTime(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setcTime</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setLayoutVersion(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setLayoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setNamespaceID(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setNamespaceID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setServiceLayoutVersion(int)">setServiceLayoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setStorageInfo(org.apache.hadoop.hdfs.server.common.StorageInfo)">setStorageInfo</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#toColonSeparatedString()">toColonSeparatedString</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#toString()">toString</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#versionSupportsFederation(java.util.Map)">versionSupportsFederation</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEPRECATED_MESSAGE_DIGEST_PROPERTY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEPRECATED_MESSAGE_DIGEST_PROPERTY</h4>
<pre>static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> DEPRECATED_MESSAGE_DIGEST_PROPERTY</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.namenode.NNStorage.DEPRECATED_MESSAGE_DIGEST_PROPERTY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="LOCAL_URI_SCHEME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOCAL_URI_SCHEME</h4>
<pre>static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> LOCAL_URI_SCHEME</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.namenode.NNStorage.LOCAL_URI_SCHEME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="blockpoolID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockpoolID</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> blockpoolID</pre>
</li>
</ul>
<a name="restoreFailedStorage">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreFailedStorage</h4>
<pre>private&nbsp;boolean restoreFailedStorage</pre>
<div class="block">flag that controls if we try to restore failed storages</div>
</li>
</ul>
<a name="restorationLock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restorationLock</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a> restorationLock</pre>
</li>
</ul>
<a name="disablePreUpgradableLayoutCheck">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disablePreUpgradableLayoutCheck</h4>
<pre>private&nbsp;boolean disablePreUpgradableLayoutCheck</pre>
</li>
</ul>
<a name="mostRecentCheckpointTxId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mostRecentCheckpointTxId</h4>
<pre>protected volatile&nbsp;long mostRecentCheckpointTxId</pre>
<div class="block">TxId of the last transaction that was included in the most
 recent fsimage file. This does not include any transactions
 that have since been written to the edit log.</div>
</li>
</ul>
<a name="mostRecentCheckpointTime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mostRecentCheckpointTime</h4>
<pre>private&nbsp;long mostRecentCheckpointTime</pre>
<div class="block">Time of the last checkpoint, in milliseconds since the epoch.</div>
</li>
</ul>
<a name="removedStorageDirs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removedStorageDirs</h4>
<pre>protected final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&gt; removedStorageDirs</pre>
<div class="block">list of failed (and thus removed) storages</div>
</li>
</ul>
<a name="deprecatedProperties">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>deprecatedProperties</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt; deprecatedProperties</pre>
<div class="block">Properties from old layout versions that may be needed
 during upgrade only.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="NNStorage(org.apache.hadoop.conf.Configuration, java.util.Collection, java.util.Collection)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NNStorage</h4>
<pre>public&nbsp;NNStorage(org.apache.hadoop.conf.Configuration&nbsp;conf,
         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;imageDirs,
         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;editsDirs)
          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Construct the NNStorage.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>conf</code> - Namenode configuration.</dd><dd><code>imageDirs</code> - Directories the image can be stored in.</dd><dd><code>editsDirs</code> - Directories the editlog can be stored in.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if any directories are inaccessible.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="isPreUpgradableLayout(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isPreUpgradableLayout</h4>
<pre>public&nbsp;boolean&nbsp;isPreUpgradableLayout(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#isPreUpgradableLayout(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">Storage</a></code></strong></div>
<div class="block">Return true if the layout of the given storage directory is from a version
 of Hadoop prior to the introduction of the "current" and "previous"
 directories which allow upgrade and rollback.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#isPreUpgradableLayout(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">isPreUpgradableLayout</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true#close()" title="class or interface in java.io">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true#close()" title="class or interface in java.lang">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="setRestoreFailedStorage(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRestoreFailedStorage</h4>
<pre>void&nbsp;setRestoreFailedStorage(boolean&nbsp;val)</pre>
<div class="block">Set flag whether an attempt should be made to restore failed storage
 directories at the next available oppurtuinity.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>val</code> - Whether restoration attempt should be made.</dd></dl>
</li>
</ul>
<a name="getRestoreFailedStorage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRestoreFailedStorage</h4>
<pre>boolean&nbsp;getRestoreFailedStorage()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>Whether failed storage directories are to be restored.</dd></dl>
</li>
</ul>
<a name="attemptRestoreRemovedStorage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>attemptRestoreRemovedStorage</h4>
<pre>void&nbsp;attemptRestoreRemovedStorage()</pre>
<div class="block">See if any of removed storages is "writable" again, and can be returned
 into service.</div>
</li>
</ul>
<a name="getRemovedStorageDirs()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemovedStorageDirs</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&gt;&nbsp;getRemovedStorageDirs()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>A list of storage directories which are in the errored state.</dd></dl>
</li>
</ul>
<a name="setStorageDirectories(java.util.Collection, java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStorageDirectories</h4>
<pre>void&nbsp;setStorageDirectories(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;fsNameDirs,
                         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;fsEditsDirs)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">See <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.html#setStorageDirectories(java.util.Collection,%20java.util.Collection,%20java.util.Collection)"><code>setStorageDirectories(Collection, Collection, Collection)</code></a></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="setStorageDirectories(java.util.Collection, java.util.Collection, java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStorageDirectories</h4>
<pre>void&nbsp;setStorageDirectories(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;fsNameDirs,
                         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;fsEditsDirs,
                         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;sharedEditsDirs)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Set the storage directories which will be used. This should only ever be
 called from inside NNStorage. However, it needs to remain package private
 for testing, as StorageDirectories need to be reinitialised after using
 Mockito.spy() on this class, as Mockito doesn't work well with inner
 classes, such as StorageDirectory in this case.

 Synchronized due to initialization of storageDirs and removedStorageDirs.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fsNameDirs</code> - Locations to store images.</dd><dd><code>fsEditsDirs</code> - Locations to store edit logs.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getStorageDirectory(java.net.URI)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorageDirectory</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;getStorageDirectory(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri)</pre>
<div class="block">Return the storage directory corresponding to the passed URI</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>uri</code> - URI of a storage directory</dd>
<dt><span class="strong">Returns:</span></dt><dd>The matching storage directory or null if none found</dd></dl>
</li>
</ul>
<a name="checkSchemeConsistency(java.net.URI)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkSchemeConsistency</h4>
<pre>private static&nbsp;void&nbsp;checkSchemeConsistency(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;u)
                                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Checks the consistency of a URI, in particular if the scheme
 is specified</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>u</code> - URI whose consistency is being checked.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getImageDirectories()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getImageDirectories</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;getImageDirectories()
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Retrieve current directories of type IMAGE</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Collection of URI representing image directories</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - in case of URI processing error</dd></dl>
</li>
</ul>
<a name="getEditsDirectories()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEditsDirectories</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;getEditsDirectories()
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Retrieve current directories of type EDITS</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Collection of URI representing edits directories</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - in case of URI processing error</dd></dl>
</li>
</ul>
<a name="getNumStorageDirs(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeDirType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumStorageDirs</h4>
<pre>int&nbsp;getNumStorageDirs(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeDirType.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeDirType</a>&nbsp;dirType)</pre>
<div class="block">Return number of storage directories of the given type.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>dirType</code> - directory type</dd>
<dt><span class="strong">Returns:</span></dt><dd>number of storage directories of type dirType</dd></dl>
</li>
</ul>
<a name="getDirectories(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeDirType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDirectories</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&gt;&nbsp;getDirectories(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeDirType.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeDirType</a>&nbsp;dirType)
                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Return the list of locations being used for a specific purpose.
 i.e. Image or edit log storage.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>dirType</code> - Purpose of locations requested.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readTransactionIdFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readTransactionIdFile</h4>
<pre>static&nbsp;long&nbsp;readTransactionIdFile(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)
                           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Determine the last transaction ID noted in this storage directory.
 This txid is stored in a special seen_txid file since it might not
 correspond to the latest image or edit log. For example, an image-only
 directory will have this txid incremented when edits logs roll, even
 though the edits logs are in a different directory.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sd</code> - StorageDirectory to check</dd>
<dt><span class="strong">Returns:</span></dt><dd>If file exists and can be read, last recorded txid. If not, 0L.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - On errors processing file pointed to by sd</dd></dl>
</li>
</ul>
<a name="writeTransactionIdFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeTransactionIdFile</h4>
<pre>void&nbsp;writeTransactionIdFile(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                          long&nbsp;txid)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Write last checkpoint time into a separate file.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sd</code> - storage directory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="setMostRecentCheckpointInfo(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMostRecentCheckpointInfo</h4>
<pre>void&nbsp;setMostRecentCheckpointInfo(long&nbsp;txid,
                               long&nbsp;time)</pre>
<div class="block">Set the transaction ID and time of the last checkpoint</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>txid</code> - transaction id of the last checkpoint</dd><dd><code>time</code> - time of the last checkpoint, in millis since the epoch</dd></dl>
</li>
</ul>
<a name="getMostRecentCheckpointTxId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMostRecentCheckpointTxId</h4>
<pre>public&nbsp;long&nbsp;getMostRecentCheckpointTxId()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the transaction ID of the last checkpoint.</dd></dl>
</li>
</ul>
<a name="getMostRecentCheckpointTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMostRecentCheckpointTime</h4>
<pre>long&nbsp;getMostRecentCheckpointTime()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the time of the most recent checkpoint in millis since the epoch.</dd></dl>
</li>
</ul>
<a name="writeTransactionIdFileToStorage(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeTransactionIdFileToStorage</h4>
<pre>public&nbsp;void&nbsp;writeTransactionIdFileToStorage(long&nbsp;txid)</pre>
<div class="block">Write a small file in all available storage directories that
 indicates that the namespace has reached some given transaction ID.
 
 This is used when the image is loaded to avoid accidental rollbacks
 in the case where an edit log is fully deleted but there is no
 checkpoint. See TestNameEditsConfigs.testNameEditsConfigsFailure()</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>txid</code> - the txid that has been reached</dd></dl>
</li>
</ul>
<a name="getFsImageNameCheckpoint(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFsImageNameCheckpoint</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]&nbsp;getFsImageNameCheckpoint(long&nbsp;txid)</pre>
<div class="block">Return the name of the image file that is uploaded by periodic
 checkpointing</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>List of filenames to save checkpoints to.</dd></dl>
</li>
</ul>
<a name="getFsImageName(long, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFsImageName</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getFsImageName(long&nbsp;txid,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>The first image file with the given txid and image type.</dd></dl>
</li>
</ul>
<a name="getFsImage(long, java.util.EnumSet)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFsImage</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getFsImage(long&nbsp;txid,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html?is-external=true" title="class or interface in java.util">EnumSet</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&gt;&nbsp;nnfs)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>The first image file whose txid is the same with the given txid and
 image type is one of the given types.</dd></dl>
</li>
</ul>
<a name="getFsImageName(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFsImageName</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getFsImageName(long&nbsp;txid)</pre>
</li>
</ul>
<a name="getHighestFsImageName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHighestFsImageName</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getHighestFsImageName()</pre>
</li>
</ul>
<a name="format(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>format</h4>
<pre>private&nbsp;void&nbsp;format(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)
             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create new dfs name directory.  Caution: this destroys all files
 in this filesystem.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>format</h4>
<pre>public&nbsp;void&nbsp;format(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)
            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Format all available storage directories.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="newNamespaceInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newNamespaceInfo</h4>
<pre>public static&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;newNamespaceInfo()
                                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html?is-external=true" title="class or interface in java.net">UnknownHostException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html?is-external=true" title="class or interface in java.net">UnknownHostException</a></code></dd></dl>
</li>
</ul>
<a name="format()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>format</h4>
<pre>public&nbsp;void&nbsp;format()
            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="newNamespaceID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newNamespaceID</h4>
<pre>private static&nbsp;int&nbsp;newNamespaceID()</pre>
<div class="block">Generate new namespaceID.

 namespaceID is a persistent attribute of the namespace.
 It is generated when the namenode is formatted and remains the same
 during the life cycle of the namenode.
 When a datanodes register they receive it as the registrationID,
 which is checked every time the datanode is communicating with the
 namenode. Datanodes that do not 'know' the namespaceID are rejected.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>new namespaceID</dd></dl>
</li>
</ul>
<a name="setFieldsFromProperties(java.util.Properties, org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFieldsFromProperties</h4>
<pre>protected&nbsp;void&nbsp;setFieldsFromProperties(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props,
                           <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setFieldsFromProperties(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">StorageInfo</a></code></strong></div>
<div class="block">Get common storage fields.
 Should be overloaded if additional fields need to be get.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setFieldsFromProperties(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setFieldsFromProperties</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>props</code> - properties</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on error</dd></dl>
</li>
</ul>
<a name="readProperties(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readProperties</h4>
<pre>void&nbsp;readProperties(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startupOption)
              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="setDeprecatedPropertiesForUpgrade(java.util.Properties)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDeprecatedPropertiesForUpgrade</h4>
<pre>private&nbsp;void&nbsp;setDeprecatedPropertiesForUpgrade(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props)</pre>
<div class="block">Pull any properties out of the VERSION file that are from older
 versions of HDFS and only necessary during upgrade.</div>
</li>
</ul>
<a name="getDeprecatedProperty(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDeprecatedProperty</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getDeprecatedProperty(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;prop)</pre>
<div class="block">Return a property that was stored in an earlier version of HDFS.
 
 This should only be used during upgrades.</div>
</li>
</ul>
<a name="setPropertiesFromFields(java.util.Properties, org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPropertiesFromFields</h4>
<pre>protected&nbsp;void&nbsp;setPropertiesFromFields(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props,
                           <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Write version file into the storage directory.

 The version file should always be written last.
 Missing or corrupted version file indicates that
 the checkpoint is not valid.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#setPropertiesFromFields(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setPropertiesFromFields</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>sd</code> - storage directory</dd><dd><code>props</code> - the Properties object to write into</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getStorageFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorageFile</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getStorageFile(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;type,
                  long&nbsp;imageTxId)</pre>
</li>
</ul>
<a name="getStorageFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorageFile</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getStorageFile(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;type)</pre>
<div class="block">Get a storage file for one of the files that doesn't need a txid associated
 (e.g version, seen_txid)</div>
</li>
</ul>
<a name="getCheckpointImageFileName(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckpointImageFileName</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getCheckpointImageFileName(long&nbsp;txid)</pre>
</li>
</ul>
<a name="getImageFileName(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getImageFileName</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getImageFileName(long&nbsp;txid)</pre>
</li>
</ul>
<a name="getRollbackImageFileName(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRollbackImageFileName</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getRollbackImageFileName(long&nbsp;txid)</pre>
</li>
</ul>
<a name="getLegacyOIVImageFileName(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLegacyOIVImageFileName</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getLegacyOIVImageFileName(long&nbsp;txid)</pre>
</li>
</ul>
<a name="getNameNodeFileName(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNameNodeFileName</h4>
<pre>private static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getNameNodeFileName(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
                         long&nbsp;txid)</pre>
</li>
</ul>
<a name="getInProgressEditsFileName(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInProgressEditsFileName</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getInProgressEditsFileName(long&nbsp;startTxId)</pre>
</li>
</ul>
<a name="getInProgressEditsFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInProgressEditsFile</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getInProgressEditsFile(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                          long&nbsp;startTxId)</pre>
</li>
</ul>
<a name="getFinalizedEditsFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFinalizedEditsFile</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getFinalizedEditsFile(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                         long&nbsp;startTxId,
                         long&nbsp;endTxId)</pre>
</li>
</ul>
<a name="getTemporaryEditsFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTemporaryEditsFile</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getTemporaryEditsFile(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                         long&nbsp;startTxId,
                         long&nbsp;endTxId,
                         long&nbsp;timestamp)</pre>
</li>
</ul>
<a name="getImageFile(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getImageFile</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getImageFile(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
                long&nbsp;txid)</pre>
</li>
</ul>
<a name="getFinalizedEditsFileName(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFinalizedEditsFileName</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getFinalizedEditsFileName(long&nbsp;startTxId,
                               long&nbsp;endTxId)</pre>
</li>
</ul>
<a name="getTemporaryEditsFileName(long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTemporaryEditsFileName</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getTemporaryEditsFileName(long&nbsp;startTxId,
                               long&nbsp;endTxId,
                               long&nbsp;timestamp)</pre>
</li>
</ul>
<a name="findFinalizedEditsFile(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findFinalizedEditsFile</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;findFinalizedEditsFile(long&nbsp;startTxId,
                          long&nbsp;endTxId)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Return the first readable finalized edits file for the given txid.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="findImageFile(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeFile, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findImageFile</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;findImageFile(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&nbsp;nnf,
                 long&nbsp;txid)</pre>
<div class="block">Return the first readable image file for the given txid and image type, or
 null if no such image can be found</div>
</li>
</ul>
<a name="findFile(org.apache.hadoop.hdfs.server.namenode.NNStorage.NameNodeDirType, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findFile</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;findFile(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeDirType.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeDirType</a>&nbsp;dirType,
            <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
<div class="block">Return the first readable storage file of the given name
 across any of the 'current' directories in SDs of the
 given type, or null if no such file exists.</div>
</li>
</ul>
<a name="setDisablePreUpgradableLayoutCheck(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDisablePreUpgradableLayoutCheck</h4>
<pre>void&nbsp;setDisablePreUpgradableLayoutCheck(boolean&nbsp;val)</pre>
<div class="block">Disable the check for pre-upgradable layouts. Needed for BackupImage.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>val</code> - Whether to disable the preupgradeable layout check.</dd></dl>
</li>
</ul>
<a name="reportErrorsOnDirectories(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reportErrorsOnDirectories</h4>
<pre>void&nbsp;reportErrorsOnDirectories(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&gt;&nbsp;sds)</pre>
<div class="block">Marks a list of directories as having experienced an error.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sds</code> - A list of storage directories to mark as errored.</dd></dl>
</li>
</ul>
<a name="reportErrorsOnDirectory(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reportErrorsOnDirectory</h4>
<pre>private&nbsp;void&nbsp;reportErrorsOnDirectory(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</pre>
<div class="block">Reports that a directory has experienced an error.
 Notifies listeners that the directory is no longer
 available.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sd</code> - A storage directory to mark as errored.</dd></dl>
</li>
</ul>
<a name="processStartupOptionsForUpgrade(org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processStartupOptionsForUpgrade</h4>
<pre>void&nbsp;processStartupOptionsForUpgrade(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt,
                                   int&nbsp;layoutVersion)
                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Processes the startup options for the clusterid and blockpoolid 
 for the upgrade.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>startOpt</code> - Startup options</dd><dd><code>layoutVersion</code> - Layout version for the upgrade</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="reportErrorOnFile(java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reportErrorOnFile</h4>
<pre>public&nbsp;void&nbsp;reportErrorOnFile(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;f)</pre>
<div class="block">Report that an IOE has occurred on some file which may
 or may not be within one of the NN image storage directories.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageErrorReporter.html#reportErrorOnFile(java.io.File)">reportErrorOnFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageErrorReporter.html" title="interface in org.apache.hadoop.hdfs.server.common">StorageErrorReporter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>f</code> - the file which had an error.</dd></dl>
</li>
</ul>
<a name="newClusterID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newClusterID</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;newClusterID()</pre>
<div class="block">Generate new clusterID.
 
 clusterID is a persistent attribute of the cluster.
 It is generated when the cluster is created and remains the same
 during the life cycle of the cluster.  When a new name node is formated, if 
 this is a new cluster, a new clusterID is geneated and stored.  Subsequent 
 name node must be given the same ClusterID during its format to be in the 
 same cluster.
 When a datanode register it receive the clusterID and stick with it.
 If at any point, name node or data node tries to join another cluster, it 
 will be rejected.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>new clusterID</dd></dl>
</li>
</ul>
<a name="setClusterID(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setClusterID</h4>
<pre>void&nbsp;setClusterID(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;cid)</pre>
</li>
</ul>
<a name="determineClusterId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>determineClusterId</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;determineClusterId()</pre>
<div class="block">try to find current cluster id in the VERSION files
 returns first cluster id found in any VERSION file
 null in case none found</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>clusterId or null in case no cluster id found</dd></dl>
</li>
</ul>
<a name="newBlockPoolID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newBlockPoolID</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;newBlockPoolID()
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html?is-external=true" title="class or interface in java.net">UnknownHostException</a></pre>
<div class="block">Generate new blockpoolID.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>new blockpoolID</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html?is-external=true" title="class or interface in java.net">UnknownHostException</a></code></dd></dl>
</li>
</ul>
<a name="setBlockPoolID(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBlockPoolID</h4>
<pre>void&nbsp;setBlockPoolID(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Validate and set block pool ID</div>
</li>
</ul>
<a name="setBlockPoolID(java.io.File, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBlockPoolID</h4>
<pre>private&nbsp;void&nbsp;setBlockPoolID(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;storage,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)
                     throws <a href="../../../../../../org/apache/hadoop/hdfs/server/common/InconsistentFSStateException.html" title="class in org.apache.hadoop.hdfs.server.common">InconsistentFSStateException</a></pre>
<div class="block">Validate and set block pool ID</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/InconsistentFSStateException.html" title="class in org.apache.hadoop.hdfs.server.common">InconsistentFSStateException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockPoolID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockPoolID</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getBlockPoolID()</pre>
</li>
</ul>
<a name="inspectStorageDirs(org.apache.hadoop.hdfs.server.namenode.FSImageStorageInspector)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inspectStorageDirs</h4>
<pre>void&nbsp;inspectStorageDirs(<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImageStorageInspector.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSImageStorageInspector</a>&nbsp;inspector)
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Iterate over all current storage directories, inspecting them
 with the given inspector.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readAndInspectDirs(java.util.EnumSet, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readAndInspectDirs</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSImageStorageInspector.html" title="class in org.apache.hadoop.hdfs.server.namenode">FSImageStorageInspector</a>&nbsp;readAndInspectDirs(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html?is-external=true" title="class or interface in java.util">EnumSet</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeFile.html" title="enum in org.apache.hadoop.hdfs.server.namenode">NNStorage.NameNodeFile</a>&gt;&nbsp;fileTypes,
                                         <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startupOption)
                                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Iterate over all of the storage dirs, reading their contents to determine
 their layout versions. Returns an FSImageStorageInspector which has
 inspected each directory.
 
 <b>Note:</b> this can mutate the storage info fields (ctime, version, etc).</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if no valid storage dirs are found or no valid layout version</dd></dl>
</li>
</ul>
<a name="getNamespaceInfo()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getNamespaceInfo</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;getNamespaceInfo()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/NNStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/Namesystem.html" title="interface in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/NNStorage.NameNodeDirType.html" title="enum in org.apache.hadoop.hdfs.server.namenode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/NNStorage.html" target="_top">Frames</a></li>
<li><a href="NNStorage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
