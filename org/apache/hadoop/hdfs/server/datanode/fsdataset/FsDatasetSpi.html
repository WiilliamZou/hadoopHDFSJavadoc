<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:53:48 EDT 2015 -->
<title>FsDatasetSpi</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FsDatasetSpi";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FsDatasetSpi.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/AvailableSpaceVolumeChoosingPolicy.AvailableSpaceVolumePair.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.Factory.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" target="_top">Frames</a></li>
<li><a href="FsDatasetSpi.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.datanode.fsdataset</div>
<h2 title="Interface FsDatasetSpi" class="title">Interface FsDatasetSpi&lt;V extends <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi</a>&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsDatasetImpl</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
public interface <a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.70">FsDatasetSpi</a>&lt;V extends <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi</a>&gt;
extends <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></pre>
<div class="block">This is a service provider interface for the underlying storage that
 stores replicas for a data node.
 The default implementation stores replicas on local drives.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.Factory.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi.Factory</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.Factory.html" title="type parameter in FsDatasetSpi.Factory">D</a> extends <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;?&gt;&gt;</strong></code>
<div class="block">A factory for creating <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset"><code>FsDatasetSpi</code></a> objects.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#addBlockPool(java.lang.String,%20org.apache.hadoop.conf.Configuration)">addBlockPool</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                        org.apache.hadoop.conf.Configuration&nbsp;conf)</code>
<div class="block">add new block pool ID</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#addVolume(org.apache.hadoop.hdfs.server.datanode.StorageLocation,%20java.util.List)">addVolume</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&nbsp;location,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&gt;&nbsp;nsInfos)</code>
<div class="block">Add a new volume to the FsDataset.<p/>

 If the FSDataset supports block scanning, this function registers
 the new volume with the block scanner.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#adjustCrcChannelPosition(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.hdfs.server.datanode.fsdataset.ReplicaOutputStreams,%20int)">adjustCrcChannelPosition</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                                                <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/ReplicaOutputStreams.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">ReplicaOutputStreams</a>&nbsp;outs,
                                                int&nbsp;checksumSize)</code>
<div class="block">Sets the file pointer of the checksum stream so that the last checksum
 will be overwritten</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#append(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">append</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
            long&nbsp;newGS,
            long&nbsp;expectedBlockLen)</code>
<div class="block">Append to a finalized replica and returns the meta info of the replica</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#cache(java.lang.String,%20long[])">cache</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
          long[]&nbsp;blockIds)</code>
<div class="block">Caches the specified blocks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#checkAndUpdate(java.lang.String,%20long,%20java.io.File,%20java.io.File,%20org.apache.hadoop.hdfs.server.datanode.fsdataset.FsVolumeSpi)">checkAndUpdate</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                            long&nbsp;blockId,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;diskFile,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;diskMetaFile,
                            <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi</a>&nbsp;vol)</code>
<div class="block">Check whether the in-memory block record matches the block on the disk,
 and, in case that they are not matched, update the record or mark it
 as corrupted.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#checkBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState)">checkBlock</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                    long&nbsp;minLength,
                    <a href="../../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;state)</code>
<div class="block">Check if a block is valid.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#checkDataDir()">checkDataDir</a></strong>()</code>
<div class="block">Check if all the data directories are healthy</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#clearRollingUpgradeMarker(java.lang.String)">clearRollingUpgradeMarker</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Delete the rolling upgrade marker file if it exists.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#contains(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">contains</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>
<div class="block">Does the dataset contain the block?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInPipelineInterface.html" title="interface in org.apache.hadoop.hdfs.server.datanode">ReplicaInPipelineInterface</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#convertTemporaryToRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">convertTemporaryToRbw</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;temporary)</code>
<div class="block">Covert a temporary replica to a RBW.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#createRbw(org.apache.hadoop.fs.StorageType,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20boolean)">createRbw</a></strong>(org.apache.hadoop.fs.StorageType&nbsp;storageType,
                  <a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                  boolean&nbsp;allowLazyPersist)</code>
<div class="block">Creates a RBW replica and returns the meta info of the replica</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#createTemporary(org.apache.hadoop.fs.StorageType,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock)">createTemporary</a></strong>(org.apache.hadoop.fs.StorageType&nbsp;storageType,
                              <a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Creates a temporary replica and returns the meta information of the replica</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#deleteBlockPool(java.lang.String,%20boolean)">deleteBlockPool</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                              boolean&nbsp;force)</code>
<div class="block">Deletes the block pool directories.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#enableTrash(java.lang.String)">enableTrash</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Enable 'trash' for the given dataset.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#finalizeBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">finalizeBlock</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Finalizes the block previously opened for writing using writeToBlock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getBlockInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long)">getBlockInputStream</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                                      long&nbsp;seekOffset)</code>
<div class="block">Returns an input stream at specified offset of the specified block</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol">BlockLocalPathInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getBlockLocalPathInfo(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getBlockLocalPathInfo</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Get <a href="../../../../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol"><code>BlockLocalPathInfo</code></a> for the given block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>,<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getBlockReports(java.lang.String)">getBlockReports</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Returns one block report per volume.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getCacheReport(java.lang.String)">getCacheReport</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Returns the cache report - the full list of cached block IDs of a
 block pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getFinalizedBlocks(java.lang.String)">getFinalizedBlocks</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getFinalizedBlocksOnPersistentStorage(java.lang.String)">getFinalizedBlocksOnPersistentStorage</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/protocol/HdfsBlocksMetadata.html" title="class in org.apache.hadoop.hdfs.protocol">HdfsBlocksMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getHdfsBlocksMetadata(java.lang.String,%20long[])">getHdfsBlocksMetadata</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                          long[]&nbsp;blockIds)</code>
<div class="block">Get a <a href="../../../../../../../org/apache/hadoop/hdfs/protocol/HdfsBlocksMetadata.html" title="class in org.apache.hadoop.hdfs.protocol"><code>HdfsBlocksMetadata</code></a> corresponding to the list of blocks in 
 <code>blocks</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getLength</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Returns the specified block's on-disk length (excluding metadata)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/LengthInputStream.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">LengthInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getMetaDataInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getMetaDataInputStream</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getPinning</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>
<div class="block">Check whether the block was pinned</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/Replica.html" title="interface in org.apache.hadoop.hdfs.server.datanode">Replica</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getReplica(java.lang.String,%20long)">getReplica</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                    long&nbsp;blockId)</code>
<div class="block"><strong>Deprecated.</strong>&nbsp;</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getReplicaString(java.lang.String,%20long)">getReplicaString</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                long&nbsp;blockId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getReplicaVisibleLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getReplicaVisibleLength</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>
<div class="block">Get visible length of the specified replica.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getStorage(java.lang.String)">getStorage</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageUuid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/StorageReport.html" title="class in org.apache.hadoop.hdfs.server.protocol">StorageReport</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getStorageReports(java.lang.String)">getStorageReports</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getStoredBlock(java.lang.String,%20long)">getStoredBlock</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                            long&nbsp;blkid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/ReplicaInputStreams.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">ReplicaInputStreams</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getTmpInputStreams(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">getTmpInputStreams</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                                    long&nbsp;blkoff,
                                    long&nbsp;ckoff)</code>
<div class="block">Returns an input stream at specified offset of the specified block
 The block is still in the tmp directory and is not finalized</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="type parameter in FsDatasetSpi">V</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getVolume(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getVolume</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/VolumeFailureSummary.html" title="class in org.apache.hadoop.hdfs.server.protocol">VolumeFailureSummary</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getVolumeFailureSummary()">getVolumeFailureSummary</a></strong>()</code>
<div class="block">Returns info about volume failures.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getVolumeInfoMap()">getVolumeInfoMap</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="type parameter in FsDatasetSpi">V</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getVolumes()">getVolumes</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#hasEnoughResource()">hasEnoughResource</a></strong>()</code>
<div class="block">Checks how many valid storage volumes there are in the DataNode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/ReplicaRecoveryInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReplicaRecoveryInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#initReplicaRecovery(org.apache.hadoop.hdfs.server.protocol.BlockRecoveryCommand.RecoveringBlock)">initReplicaRecovery</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/BlockRecoveryCommand.RecoveringBlock.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlockRecoveryCommand.RecoveringBlock</a>&nbsp;rBlock)</code>
<div class="block">Initialize a replica recovery.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#invalidate(java.lang.String,%20org.apache.hadoop.hdfs.protocol.Block[])">invalidate</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                    <a href="../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>[]&nbsp;invalidBlks)</code>
<div class="block">Invalidates the specified blocks</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#isCached(java.lang.String,%20long)">isCached</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                long&nbsp;blockId)</code>
<div class="block">Determine if the specified block is cached.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#isDeletingBlock(java.lang.String,%20long)">isDeletingBlock</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                              long&nbsp;blockId)</code>
<div class="block">Confirm whether the block is deleting</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#isValidBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">isValidBlock</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Is the block valid?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#isValidRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">isValidRbw</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Is the block a valid RBW?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#moveBlockAcrossStorage(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.fs.StorageType)">moveBlockAcrossStorage</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                                            org.apache.hadoop.fs.StorageType&nbsp;targetStorageType)</code>
<div class="block">Move block from one storage to another storage</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#onCompleteLazyPersist(java.lang.String,%20long,%20long,%20java.io.File[],%20V)">onCompleteLazyPersist</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpId,
                                          long&nbsp;blockId,
                                          long&nbsp;creationTime,
                                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]&nbsp;savedFiles,
                                          <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="type parameter in FsDatasetSpi">V</a>&nbsp;targetVolume)</code>
<div class="block">Callback from RamDiskAsyncLazyPersistService upon async lazy persist task end</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#onFailLazyPersist(java.lang.String,%20long)">onFailLazyPersist</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpId,
                                  long&nbsp;blockId)</code>
<div class="block">Callback from RamDiskAsyncLazyPersistService upon async lazy persist task fail</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#recoverAppend(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">recoverAppend</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                          long&nbsp;newGS,
                          long&nbsp;expectedBlockLen)</code>
<div class="block">Recover a failed append to a finalized replica
 and returns the meta info of the replica</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#recoverClose(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">recoverClose</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                        long&nbsp;newGS,
                        long&nbsp;expectedBlockLen)</code>
<div class="block">Recover a failed pipeline close
 It bumps the replica's generation stamp and finalize it if RBW replica</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#recoverRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long,%20long)">recoverRbw</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                    long&nbsp;newGS,
                    long&nbsp;minBytesRcvd,
                    long&nbsp;maxBytesRcvd)</code>
<div class="block">Recovers a RBW replica and returns the meta info of the replica</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#removeVolumes(java.util.Set,%20boolean)">removeVolumes</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;volumes,
                          boolean&nbsp;clearFailure)</code>
<div class="block">Removes a collection of volumes from FsDataset.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#restoreTrash(java.lang.String)">restoreTrash</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Restore trash</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#setPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">setPinning</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>
<div class="block">Set a block to be pinned on this datanode so that it cannot be moved
 by Balancer/Mover.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#setRollingUpgradeMarker(java.lang.String)">setRollingUpgradeMarker</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Create a marker file indicating that a rolling upgrade is in progress.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#shutdown()">shutdown</a></strong>()</code>
<div class="block">Shutdown the FSDataset</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#shutdownBlockPool(java.lang.String)">shutdownBlockPool</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Shutdown and remove the block pool from underlying storage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#submitBackgroundSyncFileRangeRequest(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20java.io.FileDescriptor,%20long,%20long,%20int)">submitBackgroundSyncFileRangeRequest</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                                                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileDescriptor.html?is-external=true" title="class or interface in java.io">FileDescriptor</a>&nbsp;fd,
                                                                        long&nbsp;offset,
                                                                        long&nbsp;nbytes,
                                                                        int&nbsp;flags)</code>
<div class="block">submit a sync_file_range request to AsyncDiskService</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#trashEnabled(java.lang.String)">trashEnabled</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#uncache(java.lang.String,%20long[])">uncache</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
              long[]&nbsp;blockIds)</code>
<div class="block">Uncaches the specified blocks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#unfinalizeBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">unfinalizeBlock</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Unfinalizes the block previously opened for writing using writeToBlock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#updateReplicaUnderRecovery(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long,%20long)">updateReplicaUnderRecovery</a></strong>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;oldBlock,
                                                    long&nbsp;recoveryId,
                                                    long&nbsp;newBlockId,
                                                    long&nbsp;newLength)</code>
<div class="block">Update replica's generation stamp and length and finalize it.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.hadoop.hdfs.server.datanode.metrics.FSDatasetMBean">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.hadoop.hdfs.server.datanode.metrics.<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></h3>
<code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getBlockPoolUsed(java.lang.String)">getBlockPoolUsed</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getCacheCapacity()">getCacheCapacity</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getCacheUsed()">getCacheUsed</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getCapacity()">getCapacity</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getDfsUsed()">getDfsUsed</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getEstimatedCapacityLostTotal()">getEstimatedCapacityLostTotal</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getFailedStorageLocations()">getFailedStorageLocations</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getLastVolumeFailureDate()">getLastVolumeFailureDate</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumBlocksCached()">getNumBlocksCached</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumBlocksFailedToCache()">getNumBlocksFailedToCache</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumBlocksFailedToUncache()">getNumBlocksFailedToUncache</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumFailedVolumes()">getNumFailedVolumes</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getRemaining()">getRemaining</a>, <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getStorageInfo()">getStorageInfo</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getVolumes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVolumes</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="type parameter in FsDatasetSpi">V</a>&gt;&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.96">getVolumes</a>()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>a list of volumes.</dd></dl>
</li>
</ul>
<a name="addVolume(org.apache.hadoop.hdfs.server.datanode.StorageLocation, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addVolume</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.107">addVolume</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&nbsp;location,
             <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&gt;&nbsp;nsInfos)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Add a new volume to the FsDataset.<p/>

 If the FSDataset supports block scanning, this function registers
 the new volume with the block scanner.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>location</code> - The storage location for the new volume.</dd><dd><code>nsInfos</code> - Namespace information for the new volume.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="removeVolumes(java.util.Set, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeVolumes</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.121">removeVolumes</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;volumes,
                 boolean&nbsp;clearFailure)</pre>
<div class="block">Removes a collection of volumes from FsDataset.

 If the FSDataset supports block scanning, this function removes
 the volumes from the block scanner.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>volumes</code> - The paths of the volumes to be removed.</dd><dd><code>clearFailure</code> - set true to clear the failure information about the
                     volumes.</dd></dl>
</li>
</ul>
<a name="getStorage(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorage</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.124">getStorage</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageUuid)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>a storage with the given storage ID</dd></dl>
</li>
</ul>
<a name="getStorageReports(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorageReports</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/StorageReport.html" title="class in org.apache.hadoop.hdfs.server.protocol">StorageReport</a>[]&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.127">getStorageReports</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)
                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>one or more storage reports for attached volumes.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getVolume(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVolume</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="type parameter in FsDatasetSpi">V</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.131">getVolume</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the volume that contains a replica of the block.</dd></dl>
</li>
</ul>
<a name="getVolumeInfoMap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVolumeInfoMap</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.134">getVolumeInfoMap</a>()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>a volume information map (name => info).</dd></dl>
</li>
</ul>
<a name="getVolumeFailureSummary()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVolumeFailureSummary</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/VolumeFailureSummary.html" title="class in org.apache.hadoop.hdfs.server.protocol">VolumeFailureSummary</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.141">getVolumeFailureSummary</a>()</pre>
<div class="block">Returns info about volume failures.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>info about volume failures, possibly null</dd></dl>
</li>
</ul>
<a name="getFinalizedBlocks(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFinalizedBlocks</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&gt;&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.144">getFinalizedBlocks</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>a list of finalized blocks for the given block pool.</dd></dl>
</li>
</ul>
<a name="getFinalizedBlocksOnPersistentStorage(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFinalizedBlocksOnPersistentStorage</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&gt;&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.147">getFinalizedBlocksOnPersistentStorage</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>a list of finalized blocks for the given block pool.</dd></dl>
</li>
</ul>
<a name="checkAndUpdate(java.lang.String, long, java.io.File, java.io.File, org.apache.hadoop.hdfs.server.datanode.fsdataset.FsVolumeSpi)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkAndUpdate</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.154">checkAndUpdate</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                  long&nbsp;blockId,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;diskFile,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;diskMetaFile,
                  <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi</a>&nbsp;vol)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Check whether the in-memory block record matches the block on the disk,
 and, in case that they are not matched, update the record or mark it
 as corrupted.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getMetaDataInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetaDataInputStream</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/LengthInputStream.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">LengthInputStream</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.163">getMetaDataInputStream</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - - the block</dd>
<dt><span class="strong">Returns:</span></dt><dd>a stream if the meta-data of the block exists;
         otherwise, return null.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLength</h4>
<pre>long&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.171">getLength</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Returns the specified block's on-disk length (excluding metadata)</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the specified block's on-disk length (excluding metadta)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on error</dd></dl>
</li>
</ul>
<a name="getReplica(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplica</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang">@Deprecated</a>
<a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/Replica.html" title="interface in org.apache.hadoop.hdfs.server.datanode">Replica</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.179">getReplica</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                            long&nbsp;blockId)</pre>
<div class="block"><span class="strong">Deprecated.</span>&nbsp;</div>
<div class="block">Get reference to the replica meta info in the replicasMap. 
 To be called from methods that are synchronized on <code>FSDataset</code></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>replica from the replicas map</dd></dl>
</li>
</ul>
<a name="getReplicaString(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicaString</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.184">getReplicaString</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                      long&nbsp;blockId)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>replica meta information</dd></dl>
</li>
</ul>
<a name="getStoredBlock(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoredBlock</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.189">getStoredBlock</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                   long&nbsp;blkid)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the generation stamp stored with the block.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockInputStream</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.199">getBlockInputStream</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                              long&nbsp;seekOffset)
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Returns an input stream at specified offset of the specified block</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>seekOffset</code> - offset with in the block to seek to</dd>
<dt><span class="strong">Returns:</span></dt><dd>an input stream to read the contents of the specified block,
  starting at the offset</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getTmpInputStreams(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTmpInputStreams</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/ReplicaInputStreams.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">ReplicaInputStreams</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.209">getTmpInputStreams</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                                     long&nbsp;blkoff,
                                     long&nbsp;ckoff)
                                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Returns an input stream at specified offset of the specified block
 The block is still in the tmp directory and is not finalized</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>an input stream to read the contents of the specified block,
  starting at the offset</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createTemporary(org.apache.hadoop.fs.StorageType, org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTemporary</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.219">createTemporary</a>(org.apache.hadoop.fs.StorageType&nbsp;storageType,
                             <a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Creates a temporary replica and returns the meta information of the replica</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meta info of the replica which is being written to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="createRbw(org.apache.hadoop.fs.StorageType, org.apache.hadoop.hdfs.protocol.ExtendedBlock, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createRbw</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.229">createRbw</a>(org.apache.hadoop.fs.StorageType&nbsp;storageType,
                       <a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                       boolean&nbsp;allowLazyPersist)
                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Creates a RBW replica and returns the meta info of the replica</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meta info of the replica which is being written to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="recoverRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverRbw</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.242">recoverRbw</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                        long&nbsp;newGS,
                        long&nbsp;minBytesRcvd,
                        long&nbsp;maxBytesRcvd)
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Recovers a RBW replica and returns the meta info of the replica</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>newGS</code> - the new generation stamp for the replica</dd><dd><code>minBytesRcvd</code> - the minimum number of bytes that the replica could have</dd><dd><code>maxBytesRcvd</code> - the maximum number of bytes that the replica could have</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meta info of the replica which is being written to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="convertTemporaryToRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>convertTemporaryToRbw</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInPipelineInterface.html" title="interface in org.apache.hadoop.hdfs.server.datanode">ReplicaInPipelineInterface</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.250">convertTemporaryToRbw</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;temporary)
                                                 throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Covert a temporary replica to a RBW.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>temporary</code> - the temporary replica being converted</dd>
<dt><span class="strong">Returns:</span></dt><dd>the result RBW</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="append(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>append</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.262">append</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                    long&nbsp;newGS,
                    long&nbsp;expectedBlockLen)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Append to a finalized replica and returns the meta info of the replica</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>newGS</code> - the new generation stamp for the replica</dd><dd><code>expectedBlockLen</code> - the number of bytes the replica is expected to have</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meata info of the replica which is being written to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="recoverAppend(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverAppend</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.275">recoverAppend</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                           long&nbsp;newGS,
                           long&nbsp;expectedBlockLen)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Recover a failed append to a finalized replica
 and returns the meta info of the replica</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>newGS</code> - the new generation stamp for the replica</dd><dd><code>expectedBlockLen</code> - the number of bytes the replica is expected to have</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meta info of the replica which is being written to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="recoverClose(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverClose</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.288">recoverClose</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                  long&nbsp;newGS,
                  long&nbsp;expectedBlockLen)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Recover a failed pipeline close
 It bumps the replica's generation stamp and finalize it if RBW replica</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>newGS</code> - the new generation stamp for the replica</dd><dd><code>expectedBlockLen</code> - the number of bytes the replica is expected to have</dd>
<dt><span class="strong">Returns:</span></dt><dd>the storage uuid of the replica.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="finalizeBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeBlock</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.300">finalizeBlock</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Finalizes the block previously opened for writing using writeToBlock.
 The block size is what is in the parameter b and it must match the amount
  of data written</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaNotFoundException</a></code> - if the replica can not be found when the
 block is been finalized. For instance, the block resides on an HDFS volume
 that has been removed.</dd></dl>
</li>
</ul>
<a name="unfinalizeBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unfinalizeBlock</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.307">unfinalizeBlock</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Unfinalizes the block previously opened for writing using writeToBlock.
 The temporary file associated with this block is deleted.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockReports(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockReports</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>,<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&gt;&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.314">getBlockReports</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Returns one block report per volume.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block Pool Id</dd>
<dt><span class="strong">Returns:</span></dt><dd>- a map of DatanodeStorage to block report for the volume.</dd></dl>
</li>
</ul>
<a name="getCacheReport(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCacheReport</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.322">getCacheReport</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Returns the cache report - the full list of cached block IDs of a
 block pool.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block Pool Id</dd>
<dt><span class="strong">Returns:</span></dt><dd>the cache report - the full list of cached block IDs.</dd></dl>
</li>
</ul>
<a name="contains(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>contains</h4>
<pre>boolean&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.325">contains</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</pre>
<div class="block">Does the dataset contain the block?</div>
</li>
</ul>
<a name="checkBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkBlock</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.345">checkBlock</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
              long&nbsp;minLength,
              <a href="../../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;state)
                throws <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaNotFoundException</a>,
                       <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/UnexpectedReplicaStateException.html" title="class in org.apache.hadoop.hdfs.server.datanode">UnexpectedReplicaStateException</a>,
                       <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a>,
                       <a href="https://docs.oracle.com/javase/7/docs/api/java/io/EOFException.html?is-external=true" title="class or interface in java.io">EOFException</a>,
                       <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Check if a block is valid.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - The block to check.</dd><dd><code>minLength</code> - The minimum length that the block must have.  May be 0.</dd><dd><code>state</code> - If this is null, it is ignored.  If it is non-null, we
                        will check that the replica has this state.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaNotFoundException</a></code> - If the replica is not found</dd>
<dd><code><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/UnexpectedReplicaStateException.html" title="class in org.apache.hadoop.hdfs.server.datanode">UnexpectedReplicaStateException</a></code> - If the replica is not in the 
                                             expected state.</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a></code> - If the block file is not found or there 
                                              was an error locating it.</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/EOFException.html?is-external=true" title="class or interface in java.io">EOFException</a></code> - If the replica length is too short.</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - May be thrown from the methods called.</dd></dl>
</li>
</ul>
<a name="isValidBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValidBlock</h4>
<pre>boolean&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.354">isValidBlock</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</pre>
<div class="block">Is the block valid?</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>- true if the specified block is valid</dd></dl>
</li>
</ul>
<a name="isValidRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValidRbw</h4>
<pre>boolean&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.360">isValidRbw</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</pre>
<div class="block">Is the block a valid RBW?</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>- true if the specified block is a valid RBW</dd></dl>
</li>
</ul>
<a name="invalidate(java.lang.String, org.apache.hadoop.hdfs.protocol.Block[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>invalidate</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.368">invalidate</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
              <a href="../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>[]&nbsp;invalidBlks)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Invalidates the specified blocks</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool Id</dd><dd><code>invalidBlks</code> - - the blocks to be invalidated</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="cache(java.lang.String, long[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cache</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.375">cache</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
         long[]&nbsp;blockIds)</pre>
<div class="block">Caches the specified blocks</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool id</dd><dd><code>blockIds</code> - - block ids to cache</dd></dl>
</li>
</ul>
<a name="uncache(java.lang.String, long[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uncache</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.382">uncache</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
           long[]&nbsp;blockIds)</pre>
<div class="block">Uncaches the specified blocks</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool id</dd><dd><code>blockIds</code> - - blocks ids to uncache</dd></dl>
</li>
</ul>
<a name="isCached(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCached</h4>
<pre>boolean&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.390">isCached</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
               long&nbsp;blockId)</pre>
<div class="block">Determine if the specified block is cached.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool id</dd><dd><code>blockIds</code> - - block id</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the block is cached</dd></dl>
</li>
</ul>
<a name="checkDataDir()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkDataDir</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.396">checkDataDir</a>()</pre>
<div class="block">Check if all the data directories are healthy</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A set of unhealthy data directories.</dd></dl>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.401">shutdown</a>()</pre>
<div class="block">Shutdown the FSDataset</div>
</li>
</ul>
<a name="adjustCrcChannelPosition(org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.hdfs.server.datanode.fsdataset.ReplicaOutputStreams, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>adjustCrcChannelPosition</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.411">adjustCrcChannelPosition</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                            <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/ReplicaOutputStreams.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">ReplicaOutputStreams</a>&nbsp;outs,
                            int&nbsp;checksumSize)
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Sets the file pointer of the checksum stream so that the last checksum
 will be overwritten</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>outs</code> - The streams for the data file and checksum file</dd><dd><code>checksumSize</code> - number of bytes each checksum has</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="hasEnoughResource()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasEnoughResource</h4>
<pre>boolean&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.419">hasEnoughResource</a>()</pre>
<div class="block">Checks how many valid storage volumes there are in the DataNode.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if more than the minimum number of valid volumes are left 
 in the FSDataSet.</dd></dl>
</li>
</ul>
<a name="getReplicaVisibleLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicaVisibleLength</h4>
<pre>long&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.424">getReplicaVisibleLength</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Get visible length of the specified replica.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="initReplicaRecovery(org.apache.hadoop.hdfs.server.protocol.BlockRecoveryCommand.RecoveringBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initReplicaRecovery</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/ReplicaRecoveryInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReplicaRecoveryInfo</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.431">initReplicaRecovery</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/server/protocol/BlockRecoveryCommand.RecoveringBlock.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlockRecoveryCommand.RecoveringBlock</a>&nbsp;rBlock)
                                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Initialize a replica recovery.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>actual state of the replica on this data-node or 
 null if data-node does not have the replica.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="updateReplicaUnderRecovery(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateReplicaUnderRecovery</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.438">updateReplicaUnderRecovery</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;oldBlock,
                                long&nbsp;recoveryId,
                                long&nbsp;newBlockId,
                                long&nbsp;newLength)
                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Update replica's generation stamp and length and finalize it.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the ID of storage that stores the block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="addBlockPool(java.lang.String, org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addBlockPool</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.446">addBlockPool</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                org.apache.hadoop.conf.Configuration&nbsp;conf)
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">add new block pool ID</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool Id</dd><dd><code>conf</code> - Configuration</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="shutdownBlockPool(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdownBlockPool</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.452">shutdownBlockPool</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Shutdown and remove the block pool from underlying storage.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool Id to be removed</dd></dl>
</li>
</ul>
<a name="deleteBlockPool(java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteBlockPool</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.465">deleteBlockPool</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                   boolean&nbsp;force)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Deletes the block pool directories. If force is false, directories are 
 deleted only if no block files exist for the block pool. If force 
 is true entire directory for the blockpool is deleted along with its
 contents.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - BlockPool Id to be deleted.</dd><dd><code>force</code> - If force is false, directories are deleted only if no
        block files exist for the block pool, otherwise entire 
        directory for the blockpool is deleted along with its contents.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockLocalPathInfo(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockLocalPathInfo</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol">BlockLocalPathInfo</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.470">getBlockLocalPathInfo</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Get <a href="../../../../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol"><code>BlockLocalPathInfo</code></a> for the given block.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getHdfsBlocksMetadata(java.lang.String, long[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHdfsBlocksMetadata</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/protocol/HdfsBlocksMetadata.html" title="class in org.apache.hadoop.hdfs.protocol">HdfsBlocksMetadata</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.482">getHdfsBlocksMetadata</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                       long[]&nbsp;blockIds)
                                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Get a <a href="../../../../../../../org/apache/hadoop/hdfs/protocol/HdfsBlocksMetadata.html" title="class in org.apache.hadoop.hdfs.protocol"><code>HdfsBlocksMetadata</code></a> corresponding to the list of blocks in 
 <code>blocks</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - pool to query</dd><dd><code>blockIds</code> - List of block ids for which to return metadata</dd>
<dt><span class="strong">Returns:</span></dt><dd>metadata Metadata for the list of blocks</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="enableTrash(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableTrash</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.490">enableTrash</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Enable 'trash' for the given dataset. When trash is enabled, files are
 moved to a separate trash directory instead of being deleted immediately.
 This can be useful for example during rolling upgrades.</div>
</li>
</ul>
<a name="restoreTrash(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreTrash</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.495">restoreTrash</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Restore trash</div>
</li>
</ul>
<a name="trashEnabled(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trashEnabled</h4>
<pre>boolean&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.500">trashEnabled</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>true when trash is enabled</dd></dl>
</li>
</ul>
<a name="setRollingUpgradeMarker(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRollingUpgradeMarker</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.505">setRollingUpgradeMarker</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create a marker file indicating that a rolling upgrade is in progress.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="clearRollingUpgradeMarker(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearRollingUpgradeMarker</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.511">clearRollingUpgradeMarker</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)
                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Delete the rolling upgrade marker file if it exists.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="submitBackgroundSyncFileRangeRequest(org.apache.hadoop.hdfs.protocol.ExtendedBlock, java.io.FileDescriptor, long, long, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submitBackgroundSyncFileRangeRequest</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.516">submitBackgroundSyncFileRangeRequest</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileDescriptor.html?is-external=true" title="class or interface in java.io">FileDescriptor</a>&nbsp;fd,
                                        long&nbsp;offset,
                                        long&nbsp;nbytes,
                                        int&nbsp;flags)</pre>
<div class="block">submit a sync_file_range request to AsyncDiskService</div>
</li>
</ul>
<a name="onCompleteLazyPersist(java.lang.String,long,long,java.io.File[],org.apache.hadoop.hdfs.server.datanode.fsdataset.FsVolumeSpi)">
<!--   -->
</a><a name="onCompleteLazyPersist(java.lang.String, long, long, java.io.File[], V)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onCompleteLazyPersist</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.523">onCompleteLazyPersist</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpId,
                         long&nbsp;blockId,
                         long&nbsp;creationTime,
                         <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]&nbsp;savedFiles,
                         <a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="type parameter in FsDatasetSpi">V</a>&nbsp;targetVolume)</pre>
<div class="block">Callback from RamDiskAsyncLazyPersistService upon async lazy persist task end</div>
</li>
</ul>
<a name="onFailLazyPersist(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onFailLazyPersist</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.529">onFailLazyPersist</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpId,
                     long&nbsp;blockId)</pre>
<div class="block">Callback from RamDiskAsyncLazyPersistService upon async lazy persist task fail</div>
</li>
</ul>
<a name="moveBlockAcrossStorage(org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.fs.StorageType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveBlockAcrossStorage</h4>
<pre><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.534">moveBlockAcrossStorage</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                                 org.apache.hadoop.fs.StorageType&nbsp;targetStorageType)
                                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Move block from one storage to another storage</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="setPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPinning</h4>
<pre>void&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.543">setPinning</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Set a block to be pinned on this datanode so that it cannot be moved
 by Balancer/Mover.

 It is a no-op when dfs.datanode.block-pinning.enabled is set to false.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPinning</h4>
<pre>boolean&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.548">getPinning</a>(<a href="../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Check whether the block was pinned</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="isDeletingBlock(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isDeletingBlock</h4>
<pre>boolean&nbsp;<a href="../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#line.553">isDeletingBlock</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                      long&nbsp;blockId)</pre>
<div class="block">Confirm whether the block is deleting</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FsDatasetSpi.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/AvailableSpaceVolumeChoosingPolicy.AvailableSpaceVolumePair.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.Factory.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" target="_top">Frames</a></li>
<li><a href="FsDatasetSpi.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
