<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:53:35 EDT 2015 -->
<title>FsDatasetImpl</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FsDatasetImpl";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FsDatasetImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetFactory.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.LazyWriter.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html" target="_top">Frames</a></li>
<li><a href="FsDatasetImpl.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.datanode.fsdataset.impl</div>
<h2 title="Class FsDatasetImpl" class="title">Class FsDatasetImpl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsDatasetImpl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;, <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
 class <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.127">FsDatasetImpl</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</pre>
<div class="block">FSDataset manages a set of data blocks.  Each block
 has a unique name and an extent on disk.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.LazyWriter.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsDatasetImpl.LazyWriter</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.VolumeInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsDatasetImpl.VolumeInfo</a></strong></code>
<div class="block">Class for representing the Datanode volume information</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_org.apache.hadoop.hdfs.server.datanode.fsdataset.FsDatasetSpi">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;org.apache.hadoop.hdfs.server.datanode.fsdataset.<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a></h3>
<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.Factory.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi.Factory</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.Factory.html" title="type parameter in FsDatasetSpi.Factory">D</a> extends <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;?&gt;&gt;</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetAsyncDiskService.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsDatasetAsyncDiskService</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#asyncDiskService">asyncDiskService</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/RamDiskAsyncLazyPersistService.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">RamDiskAsyncLazyPersistService</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#asyncLazyPersistService">asyncLazyPersistService</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#blockPinningEnabled">blockPinningEnabled</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetCache.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsDatasetCache</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#cacheManager">cacheManager</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.hadoop.conf.Configuration</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#conf">conf</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#datanode">datanode</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#dataStorage">dataStorage</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#deletingBlock">deletingBlock</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#fsRunning">fsRunning</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#isNativeIOAvailable">isNativeIOAvailable</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) org.apache.hadoop.util.Daemon</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#lazyWriter">lazyWriter</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) org.apache.hadoop.fs.LocalFileSystem</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#localFS">localFS</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#MAX_BLOCK_EVICTIONS_PER_ITERATION">MAX_BLOCK_EVICTIONS_PER_ITERATION</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/javax/management/ObjectName.html?is-external=true" title="class or interface in javax.management">ObjectName</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#mbeanName">mbeanName</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/RamDiskReplicaTracker.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">RamDiskReplicaTracker</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#ramDiskReplicaTracker">ramDiskReplicaTracker</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#statsLock">statsLock</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#storageMap">storageMap</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#validVolsRequired">validVolsRequired</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/ReplicaMap.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">ReplicaMap</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#volumeMap">volumeMap</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeList.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeList</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#volumes">volumes</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#FsDatasetImpl(org.apache.hadoop.hdfs.server.datanode.DataNode,%20org.apache.hadoop.hdfs.server.datanode.DataStorage,%20org.apache.hadoop.conf.Configuration)">FsDatasetImpl</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                          <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage</a>&nbsp;storage,
                          org.apache.hadoop.conf.Configuration&nbsp;conf)</code>
<div class="block">An FSDataset has a directory where it loads its data files.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#addBlockPool(java.lang.String,%20org.apache.hadoop.conf.Configuration)">addBlockPool</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                        org.apache.hadoop.conf.Configuration&nbsp;conf)</code>
<div class="block">add new block pool ID</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#addDeletingBlock(java.lang.String,%20java.lang.Long)">addDeletingBlock</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;blockId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#addVolume(java.util.Collection,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">addVolume</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;dataLocations,
                  <a href="../../../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#addVolume(org.apache.hadoop.hdfs.server.datanode.StorageLocation,%20java.util.List)">addVolume</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&nbsp;location,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&gt;&nbsp;nsInfos)</code>
<div class="block">Add a new volume to the FsDataset.<p/>

 If the FSDataset supports block scanning, this function registers
 the new volume with the block scanner.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#adjustCrcChannelPosition(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.hdfs.server.datanode.fsdataset.ReplicaOutputStreams,%20int)">adjustCrcChannelPosition</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                                                <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/ReplicaOutputStreams.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">ReplicaOutputStreams</a>&nbsp;streams,
                                                int&nbsp;checksumSize)</code>
<div class="block">Sets the offset in the meta file so that the
 last checksum will be overwritten.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#append(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">append</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
            long&nbsp;newGS,
            long&nbsp;expectedBlockLen)</code>
<div class="block">Append to a finalized replica and returns the meta info of the replica</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaBeingWritten.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaBeingWritten</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#append(java.lang.String,%20org.apache.hadoop.hdfs.server.datanode.FinalizedReplica,%20long,%20long)">append</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
            <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&nbsp;replicaInfo,
            long&nbsp;newGS,
            long&nbsp;estimateBlockLen)</code>
<div class="block">Append to a finalized replica
 Change a finalized replica to be a RBW replica and 
 bump its generation stamp to be the newGS</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#bumpReplicaGS(org.apache.hadoop.hdfs.server.datanode.ReplicaInfo,%20long)">bumpReplicaGS</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;replicaInfo,
                          long&nbsp;newGS)</code>
<div class="block">Bump a replica's generation stamp to a new one.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#cache(java.lang.String,%20long[])">cache</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
          long[]&nbsp;blockIds)</code>
<div class="block">Caches the specified blocks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#cacheBlock(java.lang.String,%20long)">cacheBlock</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                    long&nbsp;blockId)</code>
<div class="block">Asynchronously attempts to cache a single block via <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetCache.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl"><code>FsDatasetCache</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#checkAndUpdate(java.lang.String,%20long,%20java.io.File,%20java.io.File,%20org.apache.hadoop.hdfs.server.datanode.fsdataset.FsVolumeSpi)">checkAndUpdate</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                            long&nbsp;blockId,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;diskFile,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;diskMetaFile,
                            <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi</a>&nbsp;vol)</code>
<div class="block">Reconcile the difference between blocks on the disk and blocks in
 volumeMap

 Check the given block for inconsistencies.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#checkBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState)">checkBlock</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                    long&nbsp;minLength,
                    <a href="../../../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;state)</code>
<div class="block">Check if a block is valid.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#checkDataDir()">checkDataDir</a></strong>()</code>
<div class="block">check if a data directory is healthy

 if some volumes failed - the caller must emove all the blocks that belong
 to these failed volumes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#checkReplicaFiles(org.apache.hadoop.hdfs.server.datanode.ReplicaInfo)">checkReplicaFiles</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;r)</code>
<div class="block">Check the files of a replica.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#clearRollingUpgradeMarker(java.lang.String)">clearRollingUpgradeMarker</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Delete the rolling upgrade marker file if it exists.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#computeChecksum(java.io.File,%20java.io.File,%20java.io.File)">computeChecksum</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcMeta,
                              <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dstMeta,
                              <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockFile)</code>
<div class="block">Compute and store the checksum for a block file that does not already have
 its checksum computed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#contains(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">contains</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>
<div class="block">Does the dataset contain the block?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInPipeline.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInPipeline</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#convertTemporaryToRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">convertTemporaryToRbw</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Covert a temporary replica to a RBW.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#copyBlockFiles(java.io.File,%20java.io.File,%20java.io.File,%20java.io.File,%20boolean)">copyBlockFiles</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcMeta,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcFile,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dstMeta,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dstFile,
                            boolean&nbsp;calculateChecksum)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#copyBlockFiles(long,%20long,%20java.io.File,%20java.io.File,%20java.io.File,%20boolean)">copyBlockFiles</a></strong>(long&nbsp;blockId,
                            long&nbsp;genStamp,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcMeta,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcFile,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;destRoot,
                            boolean&nbsp;calculateChecksum)</code>
<div class="block">Copy the block and meta files for the given block to the given destination.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#copyReplicaWithNewBlockIdAndGS(org.apache.hadoop.hdfs.server.datanode.ReplicaUnderRecovery,%20java.lang.String,%20long,%20long)">copyReplicaWithNewBlockIdAndGS</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaUnderRecovery.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaUnderRecovery</a>&nbsp;replicaInfo,
                                                            <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                                            long&nbsp;newBlkId,
                                                            long&nbsp;newGS)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#createFsVolume(java.lang.String,%20java.io.File,%20org.apache.hadoop.fs.StorageType)">createFsVolume</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageUuid,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;currentDir,
                            org.apache.hadoop.fs.StorageType&nbsp;storageType)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#createRbw(org.apache.hadoop.fs.StorageType,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20boolean)">createRbw</a></strong>(org.apache.hadoop.fs.StorageType&nbsp;storageType,
                  <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                  boolean&nbsp;allowLazyPersist)</code>
<div class="block">Creates a RBW replica and returns the meta info of the replica</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#createTemporary(org.apache.hadoop.fs.StorageType,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock)">createTemporary</a></strong>(org.apache.hadoop.fs.StorageType&nbsp;storageType,
                              <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Creates a temporary replica and returns the meta information of the replica</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#delBlockFromDisk(java.io.File,%20java.io.File,%20org.apache.hadoop.hdfs.protocol.Block)">delBlockFromDisk</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockFile,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;metaFile,
                                <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</code>
<div class="block">Remove a block from disk</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#deleteBlockPool(java.lang.String,%20boolean)">deleteBlockPool</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                              boolean&nbsp;force)</code>
<div class="block">Deletes the block pool directories.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#enableTrash(java.lang.String)">enableTrash</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Enable 'trash' for the given dataset.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#fetchReplicaInfo(java.lang.String,%20long)">fetchReplicaInfo</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                long&nbsp;blockId)</code>
<div class="block">This should be primarily used for testing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#finalizeBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">finalizeBlock</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Complete the block write!</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#finalizeReplica(java.lang.String,%20org.apache.hadoop.hdfs.server.datanode.ReplicaInfo)">finalizeReplica</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                              <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;replicaInfo)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getBlockFile(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getBlockFile</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Get File name for a given block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getBlockFile(java.lang.String,%20long)">getBlockFile</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                        long&nbsp;blockId)</code>
<div class="block">Get File name for a given block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getBlockFileNoExistsCheck(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20boolean)">getBlockFileNoExistsCheck</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                                                  boolean&nbsp;touch)</code>
<div class="block">Return the File associated with a block, without first
 checking that it exists.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getBlockInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long)">getBlockInputStream</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                                      long&nbsp;seekOffset)</code>
<div class="block">Returns an input stream at specified offset of the specified block</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol">BlockLocalPathInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getBlockLocalPathInfo(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getBlockLocalPathInfo</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>
<div class="block">Get <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol"><code>BlockLocalPathInfo</code></a> for the given block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getBlockPoolUsed(java.lang.String)">getBlockPoolUsed</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Return the total space used by dfs datanode</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>,<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getBlockReports(java.lang.String)">getBlockReports</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Returns one block report per volume.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getCacheCapacity()">getCacheCapacity</a></strong>()</code>
<div class="block">Returns the total cache capacity of the datanode (in bytes).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getCacheReport(java.lang.String)">getCacheReport</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Returns the cache report - the full list of cached block IDs of a
 block pool.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getCacheUsed()">getCacheUsed</a></strong>()</code>
<div class="block">Returns the amount of cache used by the datanode (in bytes).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getCapacity()">getCapacity</a></strong>()</code>
<div class="block">Return total capacity, used and unused</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getDfsUsed()">getDfsUsed</a></strong>()</code>
<div class="block">Return the total space used by dfs datanode</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getEstimatedCapacityLostTotal()">getEstimatedCapacityLostTotal</a></strong>()</code>
<div class="block">Returns an estimate of total capacity lost due to volume failures in bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getFailedStorageLocations()">getFailedStorageLocations</a></strong>()</code>
<div class="block">Returns each storage location that has failed, sorted.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getFile(java.lang.String,%20long,%20boolean)">getFile</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
              long&nbsp;blockId,
              boolean&nbsp;touch)</code>
<div class="block">Turn the block identifier into a filename</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getFinalizedBlocks(java.lang.String)">getFinalizedBlocks</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Get the list of finalized blocks from in-memory blockmap for a block pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getFinalizedBlocksOnPersistentStorage(java.lang.String)">getFinalizedBlocksOnPersistentStorage</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Get the list of finalized blocks from in-memory blockmap for a block pool.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/HdfsBlocksMetadata.html" title="class in org.apache.hadoop.hdfs.protocol">HdfsBlocksMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getHdfsBlocksMetadata(java.lang.String,%20long[])">getHdfsBlocksMetadata</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;poolId,
                                          long[]&nbsp;blockIds)</code>
<div class="block">Get a <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/HdfsBlocksMetadata.html" title="class in org.apache.hadoop.hdfs.protocol"><code>HdfsBlocksMetadata</code></a> corresponding to the list of blocks in 
 <code>blocks</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/VolumeFailureInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">VolumeFailureInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getInitialVolumeFailureInfos(java.util.Collection,%20org.apache.hadoop.hdfs.server.datanode.DataStorage)">getInitialVolumeFailureInfos</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;dataLocations,
                                                        <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage</a>&nbsp;storage)</code>
<div class="block">Gets initial volume failure information for all volumes that failed
 immediately at startup.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getLastVolumeFailureDate()">getLastVolumeFailureDate</a></strong>()</code>
<div class="block">Returns the date/time of the last volume failure in milliseconds since
 epoch.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getLength</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Find the block's on-disk length</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/LengthInputStream.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">LengthInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getMetaDataInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getMetaDataInputStream</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getNumBlocksCached()">getNumBlocksCached</a></strong>()</code>
<div class="block">Returns the number of blocks cached.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getNumBlocksFailedToCache()">getNumBlocksFailedToCache</a></strong>()</code>
<div class="block">Returns the number of blocks that the datanode was unable to cache</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getNumBlocksFailedToUncache()">getNumBlocksFailedToUncache</a></strong>()</code>
<div class="block">Returns the number of blocks that the datanode was unable to uncache</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getNumFailedVolumes()">getNumFailedVolumes</a></strong>()</code>
<div class="block">Return the number of failed volumes in the FSDataset.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getPinning</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>
<div class="block">Check whether the block was pinned</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getRemaining()">getRemaining</a></strong>()</code>
<div class="block">Return how many bytes can still be stored in the FSDataset</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getReplica(java.lang.String,%20long)">getReplica</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                    long&nbsp;blockId)</code>
<div class="block"><strong>Deprecated.</strong>&nbsp;
<div class="block"><i>use <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#fetchReplicaInfo(java.lang.String,%20long)"><code>fetchReplicaInfo(String, long)</code></a> instead.</i></div>
</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getReplicaInfo(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getReplicaInfo</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Get the meta info of a block stored in volumeMap.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getReplicaInfo(java.lang.String,%20long)">getReplicaInfo</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                            long&nbsp;blkid)</code>
<div class="block">Get the meta info of a block stored in volumeMap.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getReplicaString(java.lang.String,%20long)">getReplicaString</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                long&nbsp;blockId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getReplicaVisibleLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getReplicaVisibleLength</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>
<div class="block">Get visible length of the specified replica.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getStorage(java.lang.String)">getStorage</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageUuid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getStorageInfo()">getStorageInfo</a></strong>()</code>
<div class="block">Returns the storage id of the underlying storage</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/StorageReport.html" title="class in org.apache.hadoop.hdfs.server.protocol">StorageReport</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getStorageReports(java.lang.String)">getStorageReports</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.hadoop.fs.StorageType</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getStorageTypeFromLocations(java.util.Collection,%20java.io.File)">getStorageTypeFromLocations</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;dataLocations,
                                                      <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dir)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getStoredBlock(java.lang.String,%20long)">getStoredBlock</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                            long&nbsp;blkid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/ReplicaInputStreams.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">ReplicaInputStreams</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getTmpInputStreams(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">getTmpInputStreams</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                                    long&nbsp;blkOffset,
                                    long&nbsp;metaOffset)</code>
<div class="block">Returns handles to the block file and its metadata file</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getVolume(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getVolume</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/VolumeFailureSummary.html" title="class in org.apache.hadoop.hdfs.server.protocol">VolumeFailureSummary</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getVolumeFailureSummary()">getVolumeFailureSummary</a></strong>()</code>
<div class="block">Returns info about volume failures.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.VolumeInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsDatasetImpl.VolumeInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getVolumeInfo()">getVolumeInfo</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getVolumeInfoMap()">getVolumeInfoMap</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#getVolumes()">getVolumes</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#hasEnoughResource()">hasEnoughResource</a></strong>()</code>
<div class="block">Return true - if there are still valid volumes on the DataNode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/ReplicaRecoveryInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReplicaRecoveryInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#initReplicaRecovery(org.apache.hadoop.hdfs.server.protocol.BlockRecoveryCommand.RecoveringBlock)">initReplicaRecovery</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/BlockRecoveryCommand.RecoveringBlock.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlockRecoveryCommand.RecoveringBlock</a>&nbsp;rBlock)</code>
<div class="block">Initialize a replica recovery.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static <a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/ReplicaRecoveryInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReplicaRecoveryInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#initReplicaRecovery(java.lang.String,%20org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.ReplicaMap,%20org.apache.hadoop.hdfs.protocol.Block,%20long,%20long)">initReplicaRecovery</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                      <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/ReplicaMap.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">ReplicaMap</a>&nbsp;map,
                                      <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                      long&nbsp;recoveryId,
                                      long&nbsp;xceiverStopTimeout)</code>
<div class="block">static version of <code>#initReplicaRecovery(RecoveringBlock)</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#invalidate(java.lang.String,%20org.apache.hadoop.hdfs.protocol.Block[])">invalidate</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                    <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>[]&nbsp;invalidBlks)</code>
<div class="block">We're informed that a block is no longer valid.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#invalidate(java.lang.String,%20org.apache.hadoop.hdfs.server.datanode.ReplicaInfo)">invalidate</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                    <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;block)</code>
<div class="block">Invalidate a block but does not delete the actual on-disk block file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#isCached(java.lang.String,%20long)">isCached</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                long&nbsp;blockId)</code>
<div class="block">Determine if the specified block is cached.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#isDeletingBlock(java.lang.String,%20long)">isDeletingBlock</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                              long&nbsp;blockId)</code>
<div class="block">Confirm whether the block is deleting</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#isValid(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState)">isValid</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
              <a href="../../../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;state)</code>
<div class="block">Does the block exist and have the given state?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#isValidBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">isValidBlock</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Check whether the given block is a valid one.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#isValidRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">isValidRbw</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Check whether the given block is a valid RBW.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#moveBlockAcrossStorage(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.fs.StorageType)">moveBlockAcrossStorage</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                                            org.apache.hadoop.fs.StorageType&nbsp;targetStorageType)</code>
<div class="block">Move block files from one storage to another storage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#moveBlockFiles(org.apache.hadoop.hdfs.protocol.Block,%20java.io.File,%20java.io.File)">moveBlockFiles</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcfile,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;destdir)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#onCompleteLazyPersist(java.lang.String,%20long,%20long,%20java.io.File[],%20org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsVolumeImpl)">onCompleteLazyPersist</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpId,
                                          long&nbsp;blockId,
                                          long&nbsp;creationTime,
                                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]&nbsp;savedFiles,
                                          <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&nbsp;targetVolume)</code>
<div class="block">Callback from RamDiskAsyncLazyPersistService upon async lazy persist task end</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#onFailLazyPersist(java.lang.String,%20long)">onFailLazyPersist</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpId,
                                  long&nbsp;blockId)</code>
<div class="block">Callback from RamDiskAsyncLazyPersistService upon async lazy persist task fail</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#openAndSeek(java.io.File,%20long)">openAndSeek</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file,
                      long&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#ramDiskConfigured()">ramDiskConfigured</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#recoverAppend(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">recoverAppend</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                          long&nbsp;newGS,
                          long&nbsp;expectedBlockLen)</code>
<div class="block">Recover a failed append to a finalized replica
 and returns the meta info of the replica</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#recoverCheck(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">recoverCheck</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                        long&nbsp;newGS,
                        long&nbsp;expectedBlockLen)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#recoverClose(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">recoverClose</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                        long&nbsp;newGS,
                        long&nbsp;expectedBlockLen)</code>
<div class="block">Recover a failed pipeline close
 It bumps the replica's generation stamp and finalize it if RBW replica</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#recoverRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long,%20long)">recoverRbw</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                    long&nbsp;newGS,
                    long&nbsp;minBytesRcvd,
                    long&nbsp;maxBytesRcvd)</code>
<div class="block">Recovers a RBW replica and returns the meta info of the replica</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#registerMBean(java.lang.String)">registerMBean</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;datanodeUuid)</code>
<div class="block">Register the FSDataset MBean using the name
        "hadoop:service=DataNode,name=FSDatasetState-<datanodeUuid>"</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#removeDeletedBlocks(java.lang.String,%20java.util.Set)">removeDeletedBlocks</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                      <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;blockIds)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#removeOldReplica(org.apache.hadoop.hdfs.server.datanode.ReplicaInfo,%20org.apache.hadoop.hdfs.server.datanode.ReplicaInfo,%20java.io.File,%20java.io.File,%20long,%20long,%20java.lang.String)">removeOldReplica</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;replicaInfo,
                                <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;newReplicaInfo,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockFile,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;metaFile,
                                long&nbsp;blockFileUsed,
                                long&nbsp;metaFileUsed,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#removeVolumes(java.util.Set,%20boolean)">removeVolumes</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;volumesToRemove,
                          boolean&nbsp;clearFailure)</code>
<div class="block">Removes a set of volumes from FsDataset.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#restoreTrash(java.lang.String)">restoreTrash</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Restore trash</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#setPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">setPinning</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>
<div class="block">Set a block to be pinned on this datanode so that it cannot be moved
 by Balancer/Mover.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#setRollingUpgradeMarker(java.lang.String)">setRollingUpgradeMarker</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Create a marker file indicating that a rolling upgrade is in progress.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#setupAsyncLazyPersistThread(org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsVolumeImpl)">setupAsyncLazyPersistThread</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&nbsp;v)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#setupAsyncLazyPersistThreads()">setupAsyncLazyPersistThreads</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#shutdown()">shutdown</a></strong>()</code>
<div class="block">Shutdown the FSDataset</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#shutdownBlockPool(java.lang.String)">shutdownBlockPool</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Shutdown and remove the block pool from underlying storage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#submitBackgroundSyncFileRangeRequest(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20java.io.FileDescriptor,%20long,%20long,%20int)">submitBackgroundSyncFileRangeRequest</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                                                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileDescriptor.html?is-external=true" title="class or interface in java.io">FileDescriptor</a>&nbsp;fd,
                                                                        long&nbsp;offset,
                                                                        long&nbsp;nbytes,
                                                                        int&nbsp;flags)</code>
<div class="block">submit a sync_file_range request to AsyncDiskService</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#trashEnabled(java.lang.String)">trashEnabled</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#truncateBlock(java.io.File,%20java.io.File,%20long,%20long)">truncateBlock</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockFile,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;metaFile,
                          long&nbsp;oldlen,
                          long&nbsp;newlen)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#uncache(java.lang.String,%20long[])">uncache</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
              long[]&nbsp;blockIds)</code>
<div class="block">Uncaches the specified blocks</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#unfinalizeBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">unfinalizeBlock</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</code>
<div class="block">Remove the temporary block file (if any)</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#updateReplicaUnderRecovery(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long,%20long)">updateReplicaUnderRecovery</a></strong>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;oldBlock,
                                                    long&nbsp;recoveryId,
                                                    long&nbsp;newBlockId,
                                                    long&nbsp;newlength)</code>
<div class="block">Update replica's generation stamp and length and finalize it.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#updateReplicaUnderRecovery(java.lang.String,%20org.apache.hadoop.hdfs.server.datanode.ReplicaUnderRecovery,%20long,%20long,%20long)">updateReplicaUnderRecovery</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                                    <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaUnderRecovery.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaUnderRecovery</a>&nbsp;rur,
                                                    long&nbsp;recoveryId,
                                                    long&nbsp;newBlockId,
                                                    long&nbsp;newlength)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#validateBlockFile(java.lang.String,%20long)">validateBlockFile</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                  long&nbsp;blockId)</code>
<div class="block">Find the file corresponding to the block and return it if it exists.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>static final&nbsp;org.apache.commons.logging.Log <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.128">LOG</a></pre>
</li>
</ul>
<a name="isNativeIOAvailable">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isNativeIOAvailable</h4>
<pre>private static final&nbsp;boolean <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.129">isNativeIOAvailable</a></pre>
</li>
</ul>
<a name="datanode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>datanode</h4>
<pre>final&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a> <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.230">datanode</a></pre>
</li>
</ul>
<a name="dataStorage">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataStorage</h4>
<pre>final&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage</a> <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.231">dataStorage</a></pre>
</li>
</ul>
<a name="volumes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>volumes</h4>
<pre>final&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeList.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeList</a> <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.232">volumes</a></pre>
</li>
</ul>
<a name="storageMap">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storageMap</h4>
<pre>final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>&gt; <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.233">storageMap</a></pre>
</li>
</ul>
<a name="asyncDiskService">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncDiskService</h4>
<pre>final&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetAsyncDiskService.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsDatasetAsyncDiskService</a> <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.234">asyncDiskService</a></pre>
</li>
</ul>
<a name="lazyWriter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lazyWriter</h4>
<pre>final&nbsp;org.apache.hadoop.util.Daemon <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.235">lazyWriter</a></pre>
</li>
</ul>
<a name="cacheManager">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheManager</h4>
<pre>final&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetCache.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsDatasetCache</a> <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.236">cacheManager</a></pre>
</li>
</ul>
<a name="conf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conf</h4>
<pre>private final&nbsp;org.apache.hadoop.conf.Configuration <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.237">conf</a></pre>
</li>
</ul>
<a name="validVolsRequired">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validVolsRequired</h4>
<pre>private final&nbsp;int <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.238">validVolsRequired</a></pre>
</li>
</ul>
<a name="fsRunning">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fsRunning</h4>
<pre>private volatile&nbsp;boolean <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.239">fsRunning</a></pre>
</li>
</ul>
<a name="volumeMap">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>volumeMap</h4>
<pre>final&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/ReplicaMap.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">ReplicaMap</a> <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.241">volumeMap</a></pre>
</li>
</ul>
<a name="deletingBlock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deletingBlock</h4>
<pre>final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&gt; <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.242">deletingBlock</a></pre>
</li>
</ul>
<a name="ramDiskReplicaTracker">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ramDiskReplicaTracker</h4>
<pre>final&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/RamDiskReplicaTracker.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">RamDiskReplicaTracker</a> <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.243">ramDiskReplicaTracker</a></pre>
</li>
</ul>
<a name="asyncLazyPersistService">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncLazyPersistService</h4>
<pre>final&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/RamDiskAsyncLazyPersistService.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">RamDiskAsyncLazyPersistService</a> <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.244">asyncLazyPersistService</a></pre>
</li>
</ul>
<a name="MAX_BLOCK_EVICTIONS_PER_ITERATION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_BLOCK_EVICTIONS_PER_ITERATION</h4>
<pre>private static final&nbsp;int <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.246">MAX_BLOCK_EVICTIONS_PER_ITERATION</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsDatasetImpl.MAX_BLOCK_EVICTIONS_PER_ITERATION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="statsLock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>statsLock</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a> <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.250">statsLock</a></pre>
</li>
</ul>
<a name="localFS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>localFS</h4>
<pre>final&nbsp;org.apache.hadoop.fs.LocalFileSystem <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.252">localFS</a></pre>
</li>
</ul>
<a name="blockPinningEnabled">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockPinningEnabled</h4>
<pre>private&nbsp;boolean <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.254">blockPinningEnabled</a></pre>
</li>
</ul>
<a name="mbeanName">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>mbeanName</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/javax/management/ObjectName.html?is-external=true" title="class or interface in javax.management">ObjectName</a> <a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2012">mbeanName</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FsDatasetImpl(org.apache.hadoop.hdfs.server.datanode.DataNode, org.apache.hadoop.hdfs.server.datanode.DataStorage, org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FsDatasetImpl</h4>
<pre><a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.259">FsDatasetImpl</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
             <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage</a>&nbsp;storage,
             org.apache.hadoop.conf.Configuration&nbsp;conf)
        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">An FSDataset has a directory where it loads its data files.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getVolumes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVolumes</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.139">getVolumes</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getVolumes()">getVolumes</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a list of volumes.</dd></dl>
</li>
</ul>
<a name="getStorage(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorage</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.144">getStorage</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageUuid)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getStorage(java.lang.String)">getStorage</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a storage with the given storage ID</dd></dl>
</li>
</ul>
<a name="getStorageReports(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorageReports</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/StorageReport.html" title="class in org.apache.hadoop.hdfs.server.protocol">StorageReport</a>[]&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.149">getStorageReports</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)
                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getStorageReports(java.lang.String)">getStorageReports</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>one or more storage reports for attached volumes.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getVolume(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVolume</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.174">getVolume</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getVolume(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getVolume</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the volume that contains a replica of the block.</dd></dl>
</li>
</ul>
<a name="getStoredBlock(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoredBlock</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.180">getStoredBlock</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                   long&nbsp;blkid)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getStoredBlock(java.lang.String,%20long)">getStoredBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the generation stamp stored with the block.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="fetchReplicaInfo(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchReplicaInfo</h4>
<pre><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.196">fetchReplicaInfo</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                           long&nbsp;blockId)</pre>
<div class="block">This should be primarily used for testing.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>clone of replica store in datanode memory</dd></dl>
</li>
</ul>
<a name="getMetaDataInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetaDataInputStream</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/LengthInputStream.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">LengthInputStream</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.216">getMetaDataInputStream</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getMetaDataInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getMetaDataInputStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - - the block</dd>
<dt><span class="strong">Returns:</span></dt><dd>a stream if the meta-data of the block exists;
         otherwise, return null.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getInitialVolumeFailureInfos(java.util.Collection, org.apache.hadoop.hdfs.server.datanode.DataStorage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInitialVolumeFailureInfos</h4>
<pre>private static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/VolumeFailureInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">VolumeFailureInfo</a>&gt;&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.333">getInitialVolumeFailureInfos</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;dataLocations,
                                                   <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage</a>&nbsp;storage)</pre>
<div class="block">Gets initial volume failure information for all volumes that failed
 immediately at startup.  The method works by determining the set difference
 between all configured storage locations and the actual storage locations in
 use after attempting to put all of them into service.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>each storage location that has failed</dd></dl>
</li>
</ul>
<a name="addVolume(java.util.Collection, org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addVolume</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.355">addVolume</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;dataLocations,
             <a href="../../../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createFsVolume(java.lang.String, java.io.File, org.apache.hadoop.fs.StorageType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFsVolume</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.384">createFsVolume</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageUuid,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;currentDir,
                          org.apache.hadoop.fs.StorageType&nbsp;storageType)
                            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="addVolume(org.apache.hadoop.hdfs.server.datanode.StorageLocation, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addVolume</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.390">addVolume</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&nbsp;location,
             <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&gt;&nbsp;nsInfos)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#addVolume(org.apache.hadoop.hdfs.server.datanode.StorageLocation,%20java.util.List)">FsDatasetSpi</a></code></strong></div>
<div class="block">Add a new volume to the FsDataset.<p/>

 If the FSDataset supports block scanning, this function registers
 the new volume with the block scanner.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#addVolume(org.apache.hadoop.hdfs.server.datanode.StorageLocation,%20java.util.List)">addVolume</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>location</code> - The storage location for the new volume.</dd><dd><code>nsInfos</code> - Namespace information for the new volume.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="removeVolumes(java.util.Set, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeVolumes</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.458">removeVolumes</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;volumesToRemove,
                 boolean&nbsp;clearFailure)</pre>
<div class="block">Removes a set of volumes from FsDataset.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#removeVolumes(java.util.Set,%20boolean)">removeVolumes</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>volumesToRemove</code> - a set of absolute root path of each volume.</dd><dd><code>clearFailure</code> - set true to clear failure information.

 DataNode should call this function before calling
 <code>DataStorage#removeVolumes(java.util.Collection)</code>.</dd></dl>
</li>
</ul>
<a name="getStorageTypeFromLocations(java.util.Collection, java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorageTypeFromLocations</h4>
<pre>private&nbsp;org.apache.hadoop.fs.StorageType&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.497">getStorageTypeFromLocations</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;dataLocations,
                                                           <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dir)</pre>
</li>
</ul>
<a name="getDfsUsed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDfsUsed</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.511">getDfsUsed</a>()
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Return the total space used by dfs datanode</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getDfsUsed()">getDfsUsed</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the total space used by dfs datanode</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockPoolUsed(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockPoolUsed</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.521">getBlockPoolUsed</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Return the total space used by dfs datanode</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getBlockPoolUsed(java.lang.String)">getBlockPoolUsed</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the total space used by a block pool</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="hasEnoughResource()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasEnoughResource</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.531">hasEnoughResource</a>()</pre>
<div class="block">Return true - if there are still valid volumes on the DataNode.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#hasEnoughResource()">hasEnoughResource</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true if more than the minimum number of valid volumes are left 
 in the FSDataSet.</dd></dl>
</li>
</ul>
<a name="getCapacity()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCapacity</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.539">getCapacity</a>()</pre>
<div class="block">Return total capacity, used and unused</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getCapacity()">getCapacity</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>total capacity of storage (used and unused)</dd></dl>
</li>
</ul>
<a name="getRemaining()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemaining</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.549">getRemaining</a>()
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Return how many bytes can still be stored in the FSDataset</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getRemaining()">getRemaining</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The amount of free storage space</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getNumFailedVolumes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumFailedVolumes</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.559">getNumFailedVolumes</a>()</pre>
<div class="block">Return the number of failed volumes in the FSDataset.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumFailedVolumes()">getNumFailedVolumes</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The number of failed volumes in the datanode.</dd></dl>
</li>
</ul>
<a name="getFailedStorageLocations()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFailedStorageLocations</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.564">getFailedStorageLocations</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getFailedStorageLocations()">FSDatasetMBean</a></code></strong></div>
<div class="block">Returns each storage location that has failed, sorted.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getFailedStorageLocations()">getFailedStorageLocations</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>each storage location that has failed, sorted</dd></dl>
</li>
</ul>
<a name="getLastVolumeFailureDate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastVolumeFailureDate</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.576">getLastVolumeFailureDate</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getLastVolumeFailureDate()">FSDatasetMBean</a></code></strong></div>
<div class="block">Returns the date/time of the last volume failure in milliseconds since
 epoch.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getLastVolumeFailureDate()">getLastVolumeFailureDate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>date/time of last volume failure in milliseconds since epoch</dd></dl>
</li>
</ul>
<a name="getEstimatedCapacityLostTotal()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEstimatedCapacityLostTotal</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.588">getEstimatedCapacityLostTotal</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getEstimatedCapacityLostTotal()">FSDatasetMBean</a></code></strong></div>
<div class="block">Returns an estimate of total capacity lost due to volume failures in bytes.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getEstimatedCapacityLostTotal()">getEstimatedCapacityLostTotal</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>estimate of total capacity lost in bytes</dd></dl>
</li>
</ul>
<a name="getVolumeFailureSummary()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVolumeFailureSummary</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/VolumeFailureSummary.html" title="class in org.apache.hadoop.hdfs.server.protocol">VolumeFailureSummary</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.597">getVolumeFailureSummary</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getVolumeFailureSummary()">FsDatasetSpi</a></code></strong></div>
<div class="block">Returns info about volume failures.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getVolumeFailureSummary()">getVolumeFailureSummary</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>info about volume failures, possibly null</dd></dl>
</li>
</ul>
<a name="getCacheUsed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCacheUsed</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.620">getCacheUsed</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getCacheUsed()">FSDatasetMBean</a></code></strong></div>
<div class="block">Returns the amount of cache used by the datanode (in bytes).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getCacheUsed()">getCacheUsed</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
</dl>
</li>
</ul>
<a name="getCacheCapacity()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCacheCapacity</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.625">getCacheCapacity</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getCacheCapacity()">FSDatasetMBean</a></code></strong></div>
<div class="block">Returns the total cache capacity of the datanode (in bytes).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getCacheCapacity()">getCacheCapacity</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
</dl>
</li>
</ul>
<a name="getNumBlocksFailedToCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumBlocksFailedToCache</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.630">getNumBlocksFailedToCache</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumBlocksFailedToCache()">FSDatasetMBean</a></code></strong></div>
<div class="block">Returns the number of blocks that the datanode was unable to cache</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumBlocksFailedToCache()">getNumBlocksFailedToCache</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
</dl>
</li>
</ul>
<a name="getNumBlocksFailedToUncache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumBlocksFailedToUncache</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.635">getNumBlocksFailedToUncache</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumBlocksFailedToUncache()">FSDatasetMBean</a></code></strong></div>
<div class="block">Returns the number of blocks that the datanode was unable to uncache</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumBlocksFailedToUncache()">getNumBlocksFailedToUncache</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
</dl>
</li>
</ul>
<a name="getNumBlocksCached()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumBlocksCached</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.640">getNumBlocksCached</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumBlocksCached()">FSDatasetMBean</a></code></strong></div>
<div class="block">Returns the number of blocks cached.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getNumBlocksCached()">getNumBlocksCached</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
</dl>
</li>
</ul>
<a name="getLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLength</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.648">getLength</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Find the block's on-disk length</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getLength</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the specified block's on-disk length (excluding metadta)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on error</dd></dl>
</li>
</ul>
<a name="getBlockFile(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockFile</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.655">getBlockFile</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Get File name for a given block.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockFile(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockFile</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.662">getBlockFile</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                long&nbsp;blockId)
            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Get File name for a given block.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockFileNoExistsCheck(org.apache.hadoop.hdfs.protocol.ExtendedBlock, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockFileNoExistsCheck</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.679">getBlockFileNoExistsCheck</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                             boolean&nbsp;touch)
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Return the File associated with a block, without first
 checking that it exists. This should be used when the
 next operation is going to open the file for read anyway,
 and thus the exists check is redundant.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>touch</code> - if true then update the last access timestamp of the
              block. Currently used for blocks on transient storage.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockInputStream</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.693">getBlockInputStream</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                              long&nbsp;seekOffset)
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getBlockInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long)">FsDatasetSpi</a></code></strong></div>
<div class="block">Returns an input stream at specified offset of the specified block</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getBlockInputStream(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long)">getBlockInputStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>seekOffset</code> - offset with in the block to seek to</dd>
<dt><span class="strong">Returns:</span></dt><dd>an input stream to read the contents of the specified block,
  starting at the offset</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getReplicaInfo(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicaInfo</h4>
<pre><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.716">getReplicaInfo</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                     throws <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaNotFoundException</a></pre>
<div class="block">Get the meta info of a block stored in volumeMap. To find a block,
 block pool Id, block Id and generation stamp must match.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - extended block</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meta replica information</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaNotFoundException</a></code> - if no entry is in the map or 
                        there is a generation stamp mismatch</dd></dl>
</li>
</ul>
<a name="getReplicaInfo(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicaInfo</h4>
<pre>private&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.735">getReplicaInfo</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                         long&nbsp;blkid)
                            throws <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaNotFoundException</a></pre>
<div class="block">Get the meta info of a block stored in volumeMap. Block is looked up
 without matching the generation stamp.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - block pool Id</dd><dd><code>blkid</code> - block Id</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meta replica information; null if block was not found</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaNotFoundException</a></code> - if no entry is in the map or 
                        there is a generation stamp mismatch</dd></dl>
</li>
</ul>
<a name="getTmpInputStreams(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTmpInputStreams</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/ReplicaInputStreams.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">ReplicaInputStreams</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.749">getTmpInputStreams</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                                     long&nbsp;blkOffset,
                                     long&nbsp;metaOffset)
                                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Returns handles to the block file and its metadata file</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getTmpInputStreams(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">getTmpInputStreams</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>an input stream to read the contents of the specified block,
  starting at the offset</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="openAndSeek(java.io.File, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openAndSeek</h4>
<pre>private static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.768">openAndSeek</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file,
                          long&nbsp;offset)
                                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="moveBlockFiles(org.apache.hadoop.hdfs.protocol.Block, java.io.File, java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveBlockFiles</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.783">moveBlockFiles</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcfile,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;destdir)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="copyBlockFiles(long, long, java.io.File, java.io.File, java.io.File, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copyBlockFiles</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.812">copyBlockFiles</a>(long&nbsp;blockId,
                    long&nbsp;genStamp,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcMeta,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcFile,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;destRoot,
                    boolean&nbsp;calculateChecksum)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Copy the block and meta files for the given block to the given destination.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the new meta and block files.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="copyBlockFiles(java.io.File, java.io.File, java.io.File, java.io.File, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copyBlockFiles</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.821">copyBlockFiles</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcMeta,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcFile,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dstMeta,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dstFile,
                    boolean&nbsp;calculateChecksum)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="moveBlockAcrossStorage(org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.fs.StorageType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveBlockAcrossStorage</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.856">moveBlockAcrossStorage</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                                 org.apache.hadoop.fs.StorageType&nbsp;targetStorageType)
                                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Move block files from one storage to another storage.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#moveBlockAcrossStorage(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.fs.StorageType)">moveBlockAcrossStorage</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns the Old replicaInfo</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="computeChecksum(java.io.File, java.io.File, java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeChecksum</h4>
<pre>private static&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.917">computeChecksum</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;srcMeta,
                   <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dstMeta,
                   <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockFile)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Compute and store the checksum for a block file that does not already have
 its checksum computed.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>srcMeta</code> - source meta file, containing only the checksum header, not a
     calculated checksum</dd><dd><code>dstMeta</code> - destination meta file, into which this method will write a
     full computed checksum</dd><dd><code>blockFile</code> - block file for which the checksum will be computed</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="truncateBlock(java.io.File, java.io.File, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>truncateBlock</h4>
<pre>private static&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.965">truncateBlock</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockFile,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;metaFile,
                 long&nbsp;oldlen,
                 long&nbsp;newlen)
                           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="append(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>append</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1018">append</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                    long&nbsp;newGS,
                    long&nbsp;expectedBlockLen)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#append(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">FsDatasetSpi</a></code></strong></div>
<div class="block">Append to a finalized replica and returns the meta info of the replica</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#append(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">append</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>newGS</code> - the new generation stamp for the replica</dd><dd><code>expectedBlockLen</code> - the number of bytes the replica is expected to have</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meata info of the replica which is being written to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="append(java.lang.String, org.apache.hadoop.hdfs.server.datanode.FinalizedReplica, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>append</h4>
<pre>private&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaBeingWritten.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaBeingWritten</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1067">append</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                         <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&nbsp;replicaInfo,
                         long&nbsp;newGS,
                         long&nbsp;estimateBlockLen)
                            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Append to a finalized replica
 Change a finalized replica to be a RBW replica and 
 bump its generation stamp to be the newGS</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - block pool Id</dd><dd><code>replicaInfo</code> - a finalized replica</dd><dd><code>newGS</code> - new generation stamp</dd><dd><code>estimateBlockLen</code> - estimate generation stamp</dd>
<dt><span class="strong">Returns:</span></dt><dd>a RBW replica</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if moving the replica from finalized directory 
         to rbw directory fails</dd></dl>
</li>
</ul>
<a name="recoverCheck(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverCheck</h4>
<pre>private&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1126">recoverCheck</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                       long&nbsp;newGS,
                       long&nbsp;expectedBlockLen)
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="recoverAppend(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverAppend</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1175">recoverAppend</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                           long&nbsp;newGS,
                           long&nbsp;expectedBlockLen)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#recoverAppend(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">FsDatasetSpi</a></code></strong></div>
<div class="block">Recover a failed append to a finalized replica
 and returns the meta info of the replica</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#recoverAppend(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">recoverAppend</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>newGS</code> - the new generation stamp for the replica</dd><dd><code>expectedBlockLen</code> - the number of bytes the replica is expected to have</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meta info of the replica which is being written to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="recoverClose(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverClose</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1200">recoverClose</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                  long&nbsp;newGS,
                  long&nbsp;expectedBlockLen)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#recoverClose(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">FsDatasetSpi</a></code></strong></div>
<div class="block">Recover a failed pipeline close
 It bumps the replica's generation stamp and finalize it if RBW replica</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#recoverClose(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long)">recoverClose</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>newGS</code> - the new generation stamp for the replica</dd><dd><code>expectedBlockLen</code> - the number of bytes the replica is expected to have</dd>
<dt><span class="strong">Returns:</span></dt><dd>the storage uuid of the replica.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="bumpReplicaGS(org.apache.hadoop.hdfs.server.datanode.ReplicaInfo, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bumpReplicaGS</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1222">bumpReplicaGS</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;replicaInfo,
                 long&nbsp;newGS)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Bump a replica's generation stamp to a new one.
 Its on-disk meta file name is renamed to be the new one too.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>replicaInfo</code> - a replica</dd><dd><code>newGS</code> - new generation stamp</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if rename fails</dd></dl>
</li>
</ul>
<a name="createRbw(org.apache.hadoop.fs.StorageType, org.apache.hadoop.hdfs.protocol.ExtendedBlock, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createRbw</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1244">createRbw</a>(org.apache.hadoop.fs.StorageType&nbsp;storageType,
                       <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                       boolean&nbsp;allowLazyPersist)
                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#createRbw(org.apache.hadoop.fs.StorageType,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20boolean)">FsDatasetSpi</a></code></strong></div>
<div class="block">Creates a RBW replica and returns the meta info of the replica</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#createRbw(org.apache.hadoop.fs.StorageType,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20boolean)">createRbw</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dd><code>b</code> - block</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meta info of the replica which is being written to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="recoverRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverRbw</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1292">recoverRbw</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                        long&nbsp;newGS,
                        long&nbsp;minBytesRcvd,
                        long&nbsp;maxBytesRcvd)
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#recoverRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long,%20long)">FsDatasetSpi</a></code></strong></div>
<div class="block">Recovers a RBW replica and returns the meta info of the replica</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#recoverRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long,%20long)">recoverRbw</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>newGS</code> - the new generation stamp for the replica</dd><dd><code>minBytesRcvd</code> - the minimum number of bytes that the replica could have</dd><dd><code>maxBytesRcvd</code> - the maximum number of bytes that the replica could have</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meta info of the replica which is being written to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="convertTemporaryToRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>convertTemporaryToRbw</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInPipeline.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInPipeline</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1354">convertTemporaryToRbw</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#convertTemporaryToRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">FsDatasetSpi</a></code></strong></div>
<div class="block">Covert a temporary replica to a RBW.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#convertTemporaryToRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">convertTemporaryToRbw</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - the temporary replica being converted</dd>
<dt><span class="strong">Returns:</span></dt><dd>the result RBW</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createTemporary(org.apache.hadoop.fs.StorageType, org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTemporary</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaHandler</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1415">createTemporary</a>(org.apache.hadoop.fs.StorageType&nbsp;storageType,
                             <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#createTemporary(org.apache.hadoop.fs.StorageType,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock)">FsDatasetSpi</a></code></strong></div>
<div class="block">Creates a temporary replica and returns the meta information of the replica</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#createTemporary(org.apache.hadoop.fs.StorageType,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock)">createTemporary</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dd><code>b</code> - block</dd>
<dt><span class="strong">Returns:</span></dt><dd>the meta info of the replica which is being written to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an error occurs</dd></dl>
</li>
</ul>
<a name="adjustCrcChannelPosition(org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.hdfs.server.datanode.fsdataset.ReplicaOutputStreams, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>adjustCrcChannelPosition</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1475">adjustCrcChannelPosition</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
                            <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/ReplicaOutputStreams.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset">ReplicaOutputStreams</a>&nbsp;streams,
                            int&nbsp;checksumSize)
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Sets the offset in the meta file so that the
 last checksum will be overwritten.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#adjustCrcChannelPosition(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.hdfs.server.datanode.fsdataset.ReplicaOutputStreams,%20int)">adjustCrcChannelPosition</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - block</dd><dd><code>streams</code> - The streams for the data file and checksum file</dd><dd><code>checksumSize</code> - number of bytes each checksum has</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="finalizeBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeBlock</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1500">finalizeBlock</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Complete the block write!</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#finalizeBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">finalizeBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaNotFoundException</a></code> - if the replica can not be found when the
 block is been finalized. For instance, the block resides on an HDFS volume
 that has been removed.</dd></dl>
</li>
</ul>
<a name="finalizeReplica(java.lang.String, org.apache.hadoop.hdfs.server.datanode.ReplicaInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeReplica</h4>
<pre>private&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1514">finalizeReplica</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                               <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;replicaInfo)
                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="unfinalizeBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unfinalizeBlock</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1548">unfinalizeBlock</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Remove the temporary block file (if any)</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#unfinalizeBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">unfinalizeBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="delBlockFromDisk(java.io.File, java.io.File, org.apache.hadoop.hdfs.protocol.Block)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delBlockFromDisk</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1573">delBlockFromDisk</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockFile,
                       <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;metaFile,
                       <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;b)</pre>
<div class="block">Remove a block from disk</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blockFile</code> - block file</dd><dd><code>metaFile</code> - block meta file</dd><dd><code>b</code> - a block</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if on-disk files are deleted; false otherwise</dd></dl>
</li>
</ul>
<a name="getBlockReports(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockReports</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>,<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/BlockListAsLongs.html" title="class in org.apache.hadoop.hdfs.protocol">BlockListAsLongs</a>&gt;&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1592">getBlockReports</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getBlockReports(java.lang.String)">FsDatasetSpi</a></code></strong></div>
<div class="block">Returns one block report per volume.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getBlockReports(java.lang.String)">getBlockReports</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block Pool Id</dd>
<dt><span class="strong">Returns:</span></dt><dd>- a map of DatanodeStorage to block report for the volume.</dd></dl>
</li>
</ul>
<a name="getCacheReport(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCacheReport</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1634">getCacheReport</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getCacheReport(java.lang.String)">FsDatasetSpi</a></code></strong></div>
<div class="block">Returns the cache report - the full list of cached block IDs of a
 block pool.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getCacheReport(java.lang.String)">getCacheReport</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block Pool Id</dd>
<dt><span class="strong">Returns:</span></dt><dd>the cache report - the full list of cached block IDs.</dd></dl>
</li>
</ul>
<a name="getFinalizedBlocks(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFinalizedBlocks</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&gt;&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1642">getFinalizedBlocks</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Get the list of finalized blocks from in-memory blockmap for a block pool.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getFinalizedBlocks(java.lang.String)">getFinalizedBlocks</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a list of finalized blocks for the given block pool.</dd></dl>
</li>
</ul>
<a name="getFinalizedBlocksOnPersistentStorage(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFinalizedBlocksOnPersistentStorage</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&gt;&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1657">getFinalizedBlocksOnPersistentStorage</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Get the list of finalized blocks from in-memory blockmap for a block pool.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getFinalizedBlocksOnPersistentStorage(java.lang.String)">getFinalizedBlocksOnPersistentStorage</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a list of finalized blocks for the given block pool.</dd></dl>
</li>
</ul>
<a name="checkBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkBlock</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1687">checkBlock</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
              long&nbsp;minLength,
              <a href="../../../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;state)
                throws <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaNotFoundException</a>,
                       <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/UnexpectedReplicaStateException.html" title="class in org.apache.hadoop.hdfs.server.datanode">UnexpectedReplicaStateException</a>,
                       <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a>,
                       <a href="https://docs.oracle.com/javase/7/docs/api/java/io/EOFException.html?is-external=true" title="class or interface in java.io">EOFException</a>,
                       <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Check if a block is valid.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#checkBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState)">checkBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - The block to check.</dd><dd><code>minLength</code> - The minimum length that the block must have.  May be 0.</dd><dd><code>state</code> - If this is null, it is ignored.  If it is non-null, we
                        will check that the replica has this state.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaNotFoundException</a></code> - If the replica is not found</dd>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/UnexpectedReplicaStateException.html" title="class in org.apache.hadoop.hdfs.server.datanode">UnexpectedReplicaStateException</a></code> - If the replica is not in the 
                                             expected state.</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a></code> - If the block file is not found or there
                                              was an error locating it.</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/EOFException.html?is-external=true" title="class or interface in java.io">EOFException</a></code> - If the replica length is too short.</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - May be thrown from the methods called.</dd></dl>
</li>
</ul>
<a name="isValidBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValidBlock</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1713">isValidBlock</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</pre>
<div class="block">Check whether the given block is a valid one.
 valid means finalized</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#isValidBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">isValidBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>- true if the specified block is valid</dd></dl>
</li>
</ul>
<a name="isValidRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValidRbw</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1721">isValidRbw</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b)</pre>
<div class="block">Check whether the given block is a valid RBW.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#isValidRbw(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">isValidRbw</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>- true if the specified block is a valid RBW</dd></dl>
</li>
</ul>
<a name="isValid(org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.ReplicaState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValid</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1726">isValid</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;b,
              <a href="../../../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.ReplicaState.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.ReplicaState</a>&nbsp;state)</pre>
<div class="block">Does the block exist and have the given state?</div>
</li>
</ul>
<a name="validateBlockFile(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validateBlockFile</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1738">validateBlockFile</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                     long&nbsp;blockId)</pre>
<div class="block">Find the file corresponding to the block and return it if it exists.</div>
</li>
</ul>
<a name="checkReplicaFiles(org.apache.hadoop.hdfs.server.datanode.ReplicaInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkReplicaFiles</h4>
<pre>static&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1760">checkReplicaFiles</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;r)
                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Check the files of a replica.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="invalidate(java.lang.String, org.apache.hadoop.hdfs.protocol.Block[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>invalidate</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1787">invalidate</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
              <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>[]&nbsp;invalidBlks)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">We're informed that a block is no longer valid.  We
 could lazily garbage-collect the block, but why bother?
 just get rid of it.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#invalidate(java.lang.String,%20org.apache.hadoop.hdfs.protocol.Block[])">invalidate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool Id</dd><dd><code>invalidBlks</code> - - the blocks to be invalidated</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="invalidate(java.lang.String, org.apache.hadoop.hdfs.server.datanode.ReplicaInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>invalidate</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1878">invalidate</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
              <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;block)</pre>
<div class="block">Invalidate a block but does not delete the actual on-disk block file.

 It should only be used when deactivating disks.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - the block pool ID.</dd><dd><code>block</code> - The block to be invalidated.</dd></dl>
</li>
</ul>
<a name="cacheBlock(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheBlock</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1898">cacheBlock</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
              long&nbsp;blockId)</pre>
<div class="block">Asynchronously attempts to cache a single block via <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetCache.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl"><code>FsDatasetCache</code></a>.</div>
</li>
</ul>
<a name="cache(java.lang.String, long[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cache</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1952">cache</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
         long[]&nbsp;blockIds)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#cache(java.lang.String,%20long[])">FsDatasetSpi</a></code></strong></div>
<div class="block">Caches the specified blocks</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#cache(java.lang.String,%20long[])">cache</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool id</dd><dd><code>blockIds</code> - - block ids to cache</dd></dl>
</li>
</ul>
<a name="uncache(java.lang.String, long[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uncache</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1959">uncache</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
           long[]&nbsp;blockIds)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#uncache(java.lang.String,%20long[])">FsDatasetSpi</a></code></strong></div>
<div class="block">Uncaches the specified blocks</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#uncache(java.lang.String,%20long[])">uncache</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool id</dd><dd><code>blockIds</code> - - blocks ids to uncache</dd></dl>
</li>
</ul>
<a name="isCached(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCached</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1966">isCached</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
               long&nbsp;blockId)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#isCached(java.lang.String,%20long)">FsDatasetSpi</a></code></strong></div>
<div class="block">Determine if the specified block is cached.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#isCached(java.lang.String,%20long)">isCached</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool id</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the block is cached</dd></dl>
</li>
</ul>
<a name="contains(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>contains</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1971">contains</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#contains(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">FsDatasetSpi</a></code></strong></div>
<div class="block">Does the dataset contain the block?</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#contains(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">contains</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getFile(java.lang.String, long, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFile</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.1982">getFile</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
           long&nbsp;blockId,
           boolean&nbsp;touch)</pre>
<div class="block">Turn the block identifier into a filename</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool Id</dd><dd><code>blockId</code> - a block's id</dd>
<dt><span class="strong">Returns:</span></dt><dd>on disk data file path; null if the replica does not exist</dd></dl>
</li>
</ul>
<a name="checkDataDir()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkDataDir</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2002">checkDataDir</a>()</pre>
<div class="block">check if a data directory is healthy

 if some volumes failed - the caller must emove all the blocks that belong
 to these failed volumes.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#checkDataDir()">checkDataDir</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the failed volumes. Returns null if no volume failed.</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2008">toString</a>()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="registerMBean(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerMBean</h4>
<pre>void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2018">registerMBean</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;datanodeUuid)</pre>
<div class="block">Register the FSDataset MBean using the name
        "hadoop:service=DataNode,name=FSDatasetState-<datanodeUuid>"</div>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2032">shutdown</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#shutdown()">FsDatasetSpi</a></code></strong></div>
<div class="block">Shutdown the FSDataset</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#shutdown()">shutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getStorageInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStorageInfo</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2063">getStorageInfo</a>()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getStorageInfo()">FSDatasetMBean</a></code></strong></div>
<div class="block">Returns the storage id of the underlying storage</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html#getStorageInfo()">getStorageInfo</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/metrics/FSDatasetMBean.html" title="interface in org.apache.hadoop.hdfs.server.datanode.metrics">FSDatasetMBean</a></code></dd>
</dl>
</li>
</ul>
<a name="checkAndUpdate(java.lang.String, long, java.io.File, java.io.File, org.apache.hadoop.hdfs.server.datanode.fsdataset.FsVolumeSpi)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkAndUpdate</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2091">checkAndUpdate</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                  long&nbsp;blockId,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;diskFile,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;diskMetaFile,
                  <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi</a>&nbsp;vol)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Reconcile the difference between blocks on the disk and blocks in
 volumeMap

 Check the given block for inconsistencies. Look at the
 current state of the block and reconcile the differences as follows:
 <ul>
 <li>If the block file is missing, delete the block from volumeMap</li>
 <li>If the block file exists and the block is missing in volumeMap,
 add the block to volumeMap <li>
 <li>If generation stamp does not match, then update the block with right
 generation stamp</li>
 <li>If the block length in memory does not match the actual block file length
 then mark the block as corrupt and update the block length in memory</li>
 <li>If the file in <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode"><code>ReplicaInfo</code></a> does not match the file on
 the disk, update <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode"><code>ReplicaInfo</code></a> with the correct file</li>
 </ul></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#checkAndUpdate(java.lang.String,%20long,%20java.io.File,%20java.io.File,%20org.apache.hadoop.hdfs.server.datanode.fsdataset.FsVolumeSpi)">checkAndUpdate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>blockId</code> - Block that differs</dd><dd><code>diskFile</code> - Block file on the disk</dd><dd><code>diskMetaFile</code> - Metadata file from on the disk</dd><dd><code>vol</code> - Volume of the block file</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getReplica(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplica</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang">@Deprecated</a>
public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2241">getReplica</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                long&nbsp;blockId)</pre>
<div class="block"><span class="strong">Deprecated.</span>&nbsp;<i>use <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#fetchReplicaInfo(java.lang.String,%20long)"><code>fetchReplicaInfo(String, long)</code></a> instead.</i></div>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getReplica(java.lang.String,%20long)">FsDatasetSpi</a></code></strong></div>
<div class="block">Get reference to the replica meta info in the replicasMap. 
 To be called from methods that are synchronized on <code>FSDataset</code></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getReplica(java.lang.String,%20long)">getReplica</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>replica from the replicas map</dd></dl>
</li>
</ul>
<a name="getReplicaString(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicaString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2246">getReplicaString</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                      long&nbsp;blockId)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getReplicaString(java.lang.String,%20long)">getReplicaString</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>replica meta information</dd></dl>
</li>
</ul>
<a name="initReplicaRecovery(org.apache.hadoop.hdfs.server.protocol.BlockRecoveryCommand.RecoveringBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initReplicaRecovery</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/ReplicaRecoveryInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReplicaRecoveryInfo</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2252">initReplicaRecovery</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/BlockRecoveryCommand.RecoveringBlock.html" title="class in org.apache.hadoop.hdfs.server.protocol">BlockRecoveryCommand.RecoveringBlock</a>&nbsp;rBlock)
                                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#initReplicaRecovery(org.apache.hadoop.hdfs.server.protocol.BlockRecoveryCommand.RecoveringBlock)">FsDatasetSpi</a></code></strong></div>
<div class="block">Initialize a replica recovery.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#initReplicaRecovery(org.apache.hadoop.hdfs.server.protocol.BlockRecoveryCommand.RecoveringBlock)">initReplicaRecovery</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>actual state of the replica on this data-node or 
 null if data-node does not have the replica.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="initReplicaRecovery(java.lang.String, org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.ReplicaMap, org.apache.hadoop.hdfs.protocol.Block, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initReplicaRecovery</h4>
<pre>static&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/protocol/ReplicaRecoveryInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReplicaRecoveryInfo</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2260">initReplicaRecovery</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                      <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/ReplicaMap.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">ReplicaMap</a>&nbsp;map,
                                      <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/Block.html" title="class in org.apache.hadoop.hdfs.protocol">Block</a>&nbsp;block,
                                      long&nbsp;recoveryId,
                                      long&nbsp;xceiverStopTimeout)
                                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">static version of <code>#initReplicaRecovery(RecoveringBlock)</code>.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="updateReplicaUnderRecovery(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateReplicaUnderRecovery</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2325">updateReplicaUnderRecovery</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;oldBlock,
                                long&nbsp;recoveryId,
                                long&nbsp;newBlockId,
                                long&nbsp;newlength)
                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#updateReplicaUnderRecovery(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long,%20long)">FsDatasetSpi</a></code></strong></div>
<div class="block">Update replica's generation stamp and length and finalize it.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#updateReplicaUnderRecovery(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long,%20long,%20long)">updateReplicaUnderRecovery</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the ID of storage that stores the block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="updateReplicaUnderRecovery(java.lang.String, org.apache.hadoop.hdfs.server.datanode.ReplicaUnderRecovery, long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateReplicaUnderRecovery</h4>
<pre>private&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/FinalizedReplica.html" title="class in org.apache.hadoop.hdfs.server.datanode">FinalizedReplica</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2389">updateReplicaUnderRecovery</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                          <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaUnderRecovery.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaUnderRecovery</a>&nbsp;rur,
                                          long&nbsp;recoveryId,
                                          long&nbsp;newBlockId,
                                          long&nbsp;newlength)
                                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="copyReplicaWithNewBlockIdAndGS(org.apache.hadoop.hdfs.server.datanode.ReplicaUnderRecovery, java.lang.String, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copyReplicaWithNewBlockIdAndGS</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2443">copyReplicaWithNewBlockIdAndGS</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaUnderRecovery.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaUnderRecovery</a>&nbsp;replicaInfo,
                                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                    long&nbsp;newBlkId,
                                    long&nbsp;newGS)
                                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getReplicaVisibleLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicaVisibleLength</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2459">getReplicaVisibleLength</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getReplicaVisibleLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">FsDatasetSpi</a></code></strong></div>
<div class="block">Get visible length of the specified replica.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getReplicaVisibleLength(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getReplicaVisibleLength</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="addBlockPool(java.lang.String, org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addBlockPool</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2472">addBlockPool</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                org.apache.hadoop.conf.Configuration&nbsp;conf)
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#addBlockPool(java.lang.String,%20org.apache.hadoop.conf.Configuration)">FsDatasetSpi</a></code></strong></div>
<div class="block">add new block pool ID</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#addBlockPool(java.lang.String,%20org.apache.hadoop.conf.Configuration)">addBlockPool</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool Id</dd><dd><code>conf</code> - Configuration</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="shutdownBlockPool(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdownBlockPool</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2483">shutdownBlockPool</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#shutdownBlockPool(java.lang.String)">FsDatasetSpi</a></code></strong></div>
<div class="block">Shutdown and remove the block pool from underlying storage.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#shutdownBlockPool(java.lang.String)">shutdownBlockPool</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - Block pool Id to be removed</dd></dl>
</li>
</ul>
<a name="getVolumeInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVolumeInfo</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.VolumeInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsDatasetImpl.VolumeInfo</a>&gt;&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2506">getVolumeInfo</a>()</pre>
</li>
</ul>
<a name="getVolumeInfoMap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVolumeInfoMap</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2528">getVolumeInfoMap</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getVolumeInfoMap()">getVolumeInfoMap</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a volume information map (name => info).</dd></dl>
</li>
</ul>
<a name="deleteBlockPool(java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteBlockPool</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2542">deleteBlockPool</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                   boolean&nbsp;force)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#deleteBlockPool(java.lang.String,%20boolean)">FsDatasetSpi</a></code></strong></div>
<div class="block">Deletes the block pool directories. If force is false, directories are 
 deleted only if no block files exist for the block pool. If force 
 is true entire directory for the blockpool is deleted along with its
 contents.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#deleteBlockPool(java.lang.String,%20boolean)">deleteBlockPool</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - BlockPool Id to be deleted.</dd><dd><code>force</code> - If force is false, directories are deleted only if no
        block files exist for the block pool, otherwise entire 
        directory for the blockpool is deleted along with its contents.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getBlockLocalPathInfo(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockLocalPathInfo</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol">BlockLocalPathInfo</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2568">getBlockLocalPathInfo</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)
                                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getBlockLocalPathInfo(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">FsDatasetSpi</a></code></strong></div>
<div class="block">Get <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol"><code>BlockLocalPathInfo</code></a> for the given block.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getBlockLocalPathInfo(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getBlockLocalPathInfo</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getHdfsBlocksMetadata(java.lang.String, long[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHdfsBlocksMetadata</h4>
<pre>public&nbsp;<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/HdfsBlocksMetadata.html" title="class in org.apache.hadoop.hdfs.protocol">HdfsBlocksMetadata</a>&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2593">getHdfsBlocksMetadata</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;poolId,
                                       long[]&nbsp;blockIds)
                                         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getHdfsBlocksMetadata(java.lang.String,%20long[])">FsDatasetSpi</a></code></strong></div>
<div class="block">Get a <a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/HdfsBlocksMetadata.html" title="class in org.apache.hadoop.hdfs.protocol"><code>HdfsBlocksMetadata</code></a> corresponding to the list of blocks in 
 <code>blocks</code>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getHdfsBlocksMetadata(java.lang.String,%20long[])">getHdfsBlocksMetadata</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>poolId</code> - pool to query</dd><dd><code>blockIds</code> - List of block ids for which to return metadata</dd>
<dt><span class="strong">Returns:</span></dt><dd>metadata Metadata for the list of blocks</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="enableTrash(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableTrash</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2635">enableTrash</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#enableTrash(java.lang.String)">FsDatasetSpi</a></code></strong></div>
<div class="block">Enable 'trash' for the given dataset. When trash is enabled, files are
 moved to a separate trash directory instead of being deleted immediately.
 This can be useful for example during rolling upgrades.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#enableTrash(java.lang.String)">enableTrash</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="restoreTrash(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreTrash</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2640">restoreTrash</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#restoreTrash(java.lang.String)">FsDatasetSpi</a></code></strong></div>
<div class="block">Restore trash</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#restoreTrash(java.lang.String)">restoreTrash</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="trashEnabled(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trashEnabled</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2645">trashEnabled</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#trashEnabled(java.lang.String)">trashEnabled</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true when trash is enabled</dd></dl>
</li>
</ul>
<a name="setRollingUpgradeMarker(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRollingUpgradeMarker</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2650">setRollingUpgradeMarker</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#setRollingUpgradeMarker(java.lang.String)">FsDatasetSpi</a></code></strong></div>
<div class="block">Create a marker file indicating that a rolling upgrade is in progress.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#setRollingUpgradeMarker(java.lang.String)">setRollingUpgradeMarker</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="clearRollingUpgradeMarker(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearRollingUpgradeMarker</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2655">clearRollingUpgradeMarker</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)
                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#clearRollingUpgradeMarker(java.lang.String)">FsDatasetSpi</a></code></strong></div>
<div class="block">Delete the rolling upgrade marker file if it exists.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#clearRollingUpgradeMarker(java.lang.String)">clearRollingUpgradeMarker</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="onCompleteLazyPersist(java.lang.String, long, long, java.io.File[], org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsVolumeImpl)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onCompleteLazyPersist</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2661">onCompleteLazyPersist</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpId,
                         long&nbsp;blockId,
                         long&nbsp;creationTime,
                         <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>[]&nbsp;savedFiles,
                         <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&nbsp;targetVolume)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#onCompleteLazyPersist(java.lang.String,%20long,%20long,%20java.io.File[],%20V)">FsDatasetSpi</a></code></strong></div>
<div class="block">Callback from RamDiskAsyncLazyPersistService upon async lazy persist task end</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#onCompleteLazyPersist(java.lang.String,%20long,%20long,%20java.io.File[],%20V)">onCompleteLazyPersist</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="onFailLazyPersist(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onFailLazyPersist</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2685">onFailLazyPersist</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpId,
                     long&nbsp;blockId)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#onFailLazyPersist(java.lang.String,%20long)">FsDatasetSpi</a></code></strong></div>
<div class="block">Callback from RamDiskAsyncLazyPersistService upon async lazy persist task fail</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#onFailLazyPersist(java.lang.String,%20long)">onFailLazyPersist</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="submitBackgroundSyncFileRangeRequest(org.apache.hadoop.hdfs.protocol.ExtendedBlock, java.io.FileDescriptor, long, long, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submitBackgroundSyncFileRangeRequest</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2695">submitBackgroundSyncFileRangeRequest</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileDescriptor.html?is-external=true" title="class or interface in java.io">FileDescriptor</a>&nbsp;fd,
                                        long&nbsp;offset,
                                        long&nbsp;nbytes,
                                        int&nbsp;flags)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#submitBackgroundSyncFileRangeRequest(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20java.io.FileDescriptor,%20long,%20long,%20int)">FsDatasetSpi</a></code></strong></div>
<div class="block">submit a sync_file_range request to AsyncDiskService</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#submitBackgroundSyncFileRangeRequest(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20java.io.FileDescriptor,%20long,%20long,%20int)">submitBackgroundSyncFileRangeRequest</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="ramDiskConfigured()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ramDiskConfigured</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2702">ramDiskConfigured</a>()</pre>
</li>
</ul>
<a name="setupAsyncLazyPersistThreads()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupAsyncLazyPersistThreads</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2714">setupAsyncLazyPersistThreads</a>()</pre>
</li>
</ul>
<a name="setupAsyncLazyPersistThread(org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.FsVolumeImpl)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupAsyncLazyPersistThread</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2720">setupAsyncLazyPersistThread</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&nbsp;v)</pre>
</li>
</ul>
<a name="removeOldReplica(org.apache.hadoop.hdfs.server.datanode.ReplicaInfo, org.apache.hadoop.hdfs.server.datanode.ReplicaInfo, java.io.File, java.io.File, long, long, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeOldReplica</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2739">removeOldReplica</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;replicaInfo,
                    <a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/ReplicaInfo.html" title="class in org.apache.hadoop.hdfs.server.datanode">ReplicaInfo</a>&nbsp;newReplicaInfo,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockFile,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;metaFile,
                    long&nbsp;blockFileUsed,
                    long&nbsp;metaFileUsed,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
</li>
</ul>
<a name="setPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPinning</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2969">setPinning</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#setPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">FsDatasetSpi</a></code></strong></div>
<div class="block">Set a block to be pinned on this datanode so that it cannot be moved
 by Balancer/Mover.

 It is a no-op when dfs.datanode.block-pinning.enabled is set to false.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#setPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">setPinning</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPinning</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2986">getPinning</a>(<a href="../../../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">FsDatasetSpi</a></code></strong></div>
<div class="block">Check whether the block was pinned</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#getPinning(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">getPinning</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="isDeletingBlock(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDeletingBlock</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.2997">isDeletingBlock</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                      long&nbsp;blockId)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#isDeletingBlock(java.lang.String,%20long)">FsDatasetSpi</a></code></strong></div>
<div class="block">Confirm whether the block is deleting</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html#isDeletingBlock(java.lang.String,%20long)">isDeletingBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsDatasetSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsDatasetSpi</a>&lt;<a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsVolumeImpl.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl">FsVolumeImpl</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="removeDeletedBlocks(java.lang.String, java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeDeletedBlocks</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.3004">removeDeletedBlocks</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                       <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;blockIds)</pre>
</li>
</ul>
<a name="addDeletingBlock(java.lang.String, java.lang.Long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>addDeletingBlock</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html#line.3015">addDeletingBlock</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;blockId)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FsDatasetImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetFactory.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.LazyWriter.html" title="class in org.apache.hadoop.hdfs.server.datanode.fsdataset.impl"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/apache/hadoop/hdfs/server/datanode/fsdataset/impl/FsDatasetImpl.html" target="_top">Frames</a></li>
<li><a href="FsDatasetImpl.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
