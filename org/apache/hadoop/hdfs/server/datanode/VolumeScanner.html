<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:40:46 EDT 2015 -->
<title>VolumeScanner</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="VolumeScanner";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VolumeScanner.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/UnexpectedReplicaStateException.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.ScanResultHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html" target="_top">Frames</a></li>
<li><a href="VolumeScanner.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.datanode</div>
<h2 title="Class VolumeScanner" class="title">Class VolumeScanner</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">java.lang.Thread</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.datanode.VolumeScanner</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">VolumeScanner</span>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a></pre>
<div class="block">VolumeScanner scans a single volume.  Each VolumeScanner has its own thread.<p/>
 They are all managed by the DataNode's BlockScanner.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.ScanResultHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">VolumeScanner.ScanResultHandler</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.Statistics.html" title="class in org.apache.hadoop.hdfs.server.datanode">VolumeScanner.Statistics</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_java.lang.Thread">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.State.html?is-external=true" title="class or interface in java.lang">Thread.State</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.UncaughtExceptionHandler.html?is-external=true" title="class or interface in java.lang">Thread.UncaughtExceptionHandler</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#BLOCK_ITERATOR_NAME">BLOCK_ITERATOR_NAME</a></strong></code>
<div class="block">Name of the block iterator used by this scanner.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.BlockIterator.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi.BlockIterator</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#blockIters">blockIters</a></strong></code>
<div class="block">The block iterators associated with this VolumeScanner.<p/>

 Each block pool has its own BlockIterator.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BlockScanner.Conf.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockScanner.Conf</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#conf">conf</a></strong></code>
<div class="block">The configuration.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.BlockIterator.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi.BlockIterator</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#curBlockIter">curBlockIter</a></strong></code>
<div class="block">The current block iterator, or null if there is none.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#curMinute">curMinute</a></strong></code>
<div class="block">The current minute, in monotonic terms.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#datanode">datanode</a></strong></code>
<div class="block">The DataNode this VolumEscanner is associated with.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.slf4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#MINUTES_PER_HOUR">MINUTES_PER_HOUR</a></strong></code>
<div class="block">Number of minutes in an hour.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#nullStream">nullStream</a></strong></code>
<div class="block">The null output stream to use with BlockSender objects.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private com.google.common.cache.Cache&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#recentSuspectBlocks">recentSuspectBlocks</a></strong></code>
<div class="block">Blocks which were suspect which we have scanned.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeReference.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeReference</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#ref">ref</a></strong></code>
<div class="block">A reference to the volume that we're scanning.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.ScanResultHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">VolumeScanner.ScanResultHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#resultHandler">resultHandler</a></strong></code>
<div class="block">Handles scan results.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#scannedBytes">scannedBytes</a></strong></code>
<div class="block">The number of scanned bytes in each minute of the last hour.<p/>

 This array is managed as a circular buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#scannedBytesSum">scannedBytesSum</a></strong></code>
<div class="block">The sum of all the values of scannedBytes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#SECONDS_PER_MINUTE">SECONDS_PER_MINUTE</a></strong></code>
<div class="block">Number of seconds in a minute.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#startMinute">startMinute</a></strong></code>
<div class="block">The monotonic minute that the volume scanner was started on.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.Statistics.html" title="class in org.apache.hadoop.hdfs.server.datanode">VolumeScanner.Statistics</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#stats">stats</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#stopping">stopping</a></strong></code>
<div class="block">True if the thread is stopping.<p/>
 Protected by this object's lock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html?is-external=true" title="class or interface in java.util">LinkedHashSet</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#suspectBlocks">suspectBlocks</a></strong></code>
<div class="block">Blocks which are suspect.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/util/DataTransferThrottler.html" title="class in org.apache.hadoop.hdfs.util">DataTransferThrottler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#throttler">throttler</a></strong></code>
<div class="block">The throttler to use with BlockSender objects.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#volume">volume</a></strong></code>
<div class="block">The volume that we're scanning.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_java.lang.Thread">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#MAX_PRIORITY" title="class or interface in java.lang">MAX_PRIORITY</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#MIN_PRIORITY" title="class or interface in java.lang">MIN_PRIORITY</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#NORM_PRIORITY" title="class or interface in java.lang">NORM_PRIORITY</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#VolumeScanner(org.apache.hadoop.hdfs.server.datanode.BlockScanner.Conf,%20org.apache.hadoop.hdfs.server.datanode.DataNode,%20org.apache.hadoop.hdfs.server.datanode.fsdataset.FsVolumeReference)">VolumeScanner</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BlockScanner.Conf.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockScanner.Conf</a>&nbsp;conf,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeReference.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeReference</a>&nbsp;ref)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#calculateShouldScan(java.lang.String,%20long,%20long,%20long,%20long)">calculateShouldScan</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageId,
                   long&nbsp;targetBytesPerSec,
                   long&nbsp;scannedBytesSum,
                   long&nbsp;startMinute,
                   long&nbsp;curMinute)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#disableBlockPoolId(java.lang.String)">disableBlockPoolId</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Disallow the scanner from scanning the given block pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#enableBlockPoolId(java.lang.String)">enableBlockPoolId</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Allow the scanner to scan the given block pool.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#expireOldScannedBytesRecords(long)">expireOldScannedBytesRecords</a></strong>(long&nbsp;monotonicMs)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#findNextUsableBlockIter()">findNextUsableBlockIter</a></strong>()</code>
<div class="block">Find a usable block iterator.<p/>

 We will consider available block iterators in order.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.Statistics.html" title="class in org.apache.hadoop.hdfs.server.datanode">VolumeScanner.Statistics</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#getStatistics()">getStatistics</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#markSuspectBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">markSuspectBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#popNextSuspectBlock()">popNextSuspectBlock</a></strong>()</code>
<div class="block">If there are elements in the suspectBlocks list, removes
 and returns the first one.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static double</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#positiveMsToHours(long)">positiveMsToHours</a></strong>(long&nbsp;ms)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#printStats(java.lang.StringBuilder)">printStats</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html?is-external=true" title="class or interface in java.lang">StringBuilder</a>&nbsp;p)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#run()">run</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#runLoop(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">runLoop</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;suspectBlock)</code>
<div class="block">Run an iteration of the VolumeScanner loop.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#saveBlockIterator(org.apache.hadoop.hdfs.server.datanode.fsdataset.FsVolumeSpi.BlockIterator)">saveBlockIterator</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.BlockIterator.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi.BlockIterator</a>&nbsp;iter)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#scanBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20long)">scanBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;cblock,
         long&nbsp;bytesPerSec)</code>
<div class="block">Scan a block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#shutdown()">shutdown</a></strong>()</code>
<div class="block">Shut down this scanner.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Thread">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#activeCount()" title="class or interface in java.lang">activeCount</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#checkAccess()" title="class or interface in java.lang">checkAccess</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#countStackFrames()" title="class or interface in java.lang">countStackFrames</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#currentThread()" title="class or interface in java.lang">currentThread</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#destroy()" title="class or interface in java.lang">destroy</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#dumpStack()" title="class or interface in java.lang">dumpStack</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#enumerate(java.lang.Thread[])" title="class or interface in java.lang">enumerate</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getAllStackTraces()" title="class or interface in java.lang">getAllStackTraces</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getContextClassLoader()" title="class or interface in java.lang">getContextClassLoader</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getDefaultUncaughtExceptionHandler()" title="class or interface in java.lang">getDefaultUncaughtExceptionHandler</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getId()" title="class or interface in java.lang">getId</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getName()" title="class or interface in java.lang">getName</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getPriority()" title="class or interface in java.lang">getPriority</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getStackTrace()" title="class or interface in java.lang">getStackTrace</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getState()" title="class or interface in java.lang">getState</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getThreadGroup()" title="class or interface in java.lang">getThreadGroup</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getUncaughtExceptionHandler()" title="class or interface in java.lang">getUncaughtExceptionHandler</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#holdsLock(java.lang.Object)" title="class or interface in java.lang">holdsLock</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang">interrupt</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupted()" title="class or interface in java.lang">interrupted</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#isAlive()" title="class or interface in java.lang">isAlive</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#isDaemon()" title="class or interface in java.lang">isDaemon</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#isInterrupted()" title="class or interface in java.lang">isInterrupted</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#join()" title="class or interface in java.lang">join</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#join(long)" title="class or interface in java.lang">join</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#join(long,%20int)" title="class or interface in java.lang">join</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#resume()" title="class or interface in java.lang">resume</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#setContextClassLoader(java.lang.ClassLoader)" title="class or interface in java.lang">setContextClassLoader</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#setDaemon(boolean)" title="class or interface in java.lang">setDaemon</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#setDefaultUncaughtExceptionHandler(java.lang.Thread.UncaughtExceptionHandler)" title="class or interface in java.lang">setDefaultUncaughtExceptionHandler</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#setName(java.lang.String)" title="class or interface in java.lang">setName</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#setPriority(int)" title="class or interface in java.lang">setPriority</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#setUncaughtExceptionHandler(java.lang.Thread.UncaughtExceptionHandler)" title="class or interface in java.lang">setUncaughtExceptionHandler</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#sleep(long)" title="class or interface in java.lang">sleep</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#sleep(long,%20int)" title="class or interface in java.lang">sleep</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#start()" title="class or interface in java.lang">start</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#stop()" title="class or interface in java.lang">stop</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#stop(java.lang.Throwable)" title="class or interface in java.lang">stop</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#suspend()" title="class or interface in java.lang">suspend</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#yield()" title="class or interface in java.lang">yield</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>public static final&nbsp;org.slf4j.Logger LOG</pre>
</li>
</ul>
<a name="SECONDS_PER_MINUTE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SECONDS_PER_MINUTE</h4>
<pre>private static final&nbsp;int SECONDS_PER_MINUTE</pre>
<div class="block">Number of seconds in a minute.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.VolumeScanner.SECONDS_PER_MINUTE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MINUTES_PER_HOUR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MINUTES_PER_HOUR</h4>
<pre>private static final&nbsp;int MINUTES_PER_HOUR</pre>
<div class="block">Number of minutes in an hour.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.VolumeScanner.MINUTES_PER_HOUR">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="BLOCK_ITERATOR_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BLOCK_ITERATOR_NAME</h4>
<pre>private static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> BLOCK_ITERATOR_NAME</pre>
<div class="block">Name of the block iterator used by this scanner.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.VolumeScanner.BLOCK_ITERATOR_NAME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="conf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conf</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BlockScanner.Conf.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockScanner.Conf</a> conf</pre>
<div class="block">The configuration.</div>
</li>
</ul>
<a name="datanode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>datanode</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a> datanode</pre>
<div class="block">The DataNode this VolumEscanner is associated with.</div>
</li>
</ul>
<a name="ref">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ref</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeReference.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeReference</a> ref</pre>
<div class="block">A reference to the volume that we're scanning.</div>
</li>
</ul>
<a name="volume">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>volume</h4>
<pre>final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi</a> volume</pre>
<div class="block">The volume that we're scanning.</div>
</li>
</ul>
<a name="scannedBytes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scannedBytes</h4>
<pre>private final&nbsp;long[] scannedBytes</pre>
<div class="block">The number of scanned bytes in each minute of the last hour.<p/>

 This array is managed as a circular buffer.  We take the monotonic time and
 divide it up into one-minute periods.  Each entry in the array represents
 how many bytes were scanned during that period.</div>
</li>
</ul>
<a name="scannedBytesSum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scannedBytesSum</h4>
<pre>private&nbsp;long scannedBytesSum</pre>
<div class="block">The sum of all the values of scannedBytes.</div>
</li>
</ul>
<a name="throttler">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>throttler</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/util/DataTransferThrottler.html" title="class in org.apache.hadoop.hdfs.util">DataTransferThrottler</a> throttler</pre>
<div class="block">The throttler to use with BlockSender objects.</div>
</li>
</ul>
<a name="nullStream">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nullStream</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html?is-external=true" title="class or interface in java.io">DataOutputStream</a> nullStream</pre>
<div class="block">The null output stream to use with BlockSender objects.</div>
</li>
</ul>
<a name="blockIters">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockIters</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.BlockIterator.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi.BlockIterator</a>&gt; blockIters</pre>
<div class="block">The block iterators associated with this VolumeScanner.<p/>

 Each block pool has its own BlockIterator.</div>
</li>
</ul>
<a name="suspectBlocks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspectBlocks</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html?is-external=true" title="class or interface in java.util">LinkedHashSet</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&gt; suspectBlocks</pre>
<div class="block">Blocks which are suspect.
 The scanner prioritizes scanning these blocks.</div>
</li>
</ul>
<a name="recentSuspectBlocks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recentSuspectBlocks</h4>
<pre>private final&nbsp;com.google.common.cache.Cache&lt;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&gt; recentSuspectBlocks</pre>
<div class="block">Blocks which were suspect which we have scanned.
 This is used to avoid scanning the same suspect block over and over.</div>
</li>
</ul>
<a name="curBlockIter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>curBlockIter</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.BlockIterator.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi.BlockIterator</a> curBlockIter</pre>
<div class="block">The current block iterator, or null if there is none.</div>
</li>
</ul>
<a name="stopping">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopping</h4>
<pre>private&nbsp;boolean stopping</pre>
<div class="block">True if the thread is stopping.<p/>
 Protected by this object's lock.</div>
</li>
</ul>
<a name="startMinute">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startMinute</h4>
<pre>private&nbsp;long startMinute</pre>
<div class="block">The monotonic minute that the volume scanner was started on.</div>
</li>
</ul>
<a name="curMinute">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>curMinute</h4>
<pre>private&nbsp;long curMinute</pre>
<div class="block">The current minute, in monotonic terms.</div>
</li>
</ul>
<a name="resultHandler">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resultHandler</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.ScanResultHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode">VolumeScanner.ScanResultHandler</a> resultHandler</pre>
<div class="block">Handles scan results.</div>
</li>
</ul>
<a name="stats">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>stats</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.Statistics.html" title="class in org.apache.hadoop.hdfs.server.datanode">VolumeScanner.Statistics</a> stats</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="VolumeScanner(org.apache.hadoop.hdfs.server.datanode.BlockScanner.Conf, org.apache.hadoop.hdfs.server.datanode.DataNode, org.apache.hadoop.hdfs.server.datanode.fsdataset.FsVolumeReference)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>VolumeScanner</h4>
<pre>VolumeScanner(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BlockScanner.Conf.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockScanner.Conf</a>&nbsp;conf,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeReference.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeReference</a>&nbsp;ref)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="positiveMsToHours(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>positiveMsToHours</h4>
<pre>private static&nbsp;double&nbsp;positiveMsToHours(long&nbsp;ms)</pre>
</li>
</ul>
<a name="printStats(java.lang.StringBuilder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>printStats</h4>
<pre>public&nbsp;void&nbsp;printStats(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html?is-external=true" title="class or interface in java.lang">StringBuilder</a>&nbsp;p)</pre>
</li>
</ul>
<a name="saveBlockIterator(org.apache.hadoop.hdfs.server.datanode.fsdataset.FsVolumeSpi.BlockIterator)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveBlockIterator</h4>
<pre>private&nbsp;void&nbsp;saveBlockIterator(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/fsdataset/FsVolumeSpi.BlockIterator.html" title="interface in org.apache.hadoop.hdfs.server.datanode.fsdataset">FsVolumeSpi.BlockIterator</a>&nbsp;iter)</pre>
</li>
</ul>
<a name="expireOldScannedBytesRecords(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>expireOldScannedBytesRecords</h4>
<pre>private&nbsp;void&nbsp;expireOldScannedBytesRecords(long&nbsp;monotonicMs)</pre>
</li>
</ul>
<a name="findNextUsableBlockIter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNextUsableBlockIter</h4>
<pre>private&nbsp;long&nbsp;findNextUsableBlockIter()</pre>
<div class="block">Find a usable block iterator.<p/>

 We will consider available block iterators in order.  This property is
 important so that we don't keep rescanning the same block pool id over
 and over, while other block pools stay unscanned.<p/>

 A block pool is always ready to scan if the iterator is not at EOF.  If
 the iterator is at EOF, the block pool will be ready to scan when
 conf.scanPeriodMs milliseconds have elapsed since the iterator was last
 rewound.<p/></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>0 if we found a usable block iterator; the
                               length of time we should delay before
                               checking again otherwise.</dd></dl>
</li>
</ul>
<a name="scanBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scanBlock</h4>
<pre>private&nbsp;long&nbsp;scanBlock(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;cblock,
             long&nbsp;bytesPerSec)</pre>
<div class="block">Scan a block.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cblock</code> - The block to scan.</dd><dd><code>bytesPerSec</code> - The bytes per second to scan at.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The length of the block that was scanned, or
                               -1 if the block could not be scanned.</dd></dl>
</li>
</ul>
<a name="calculateShouldScan(java.lang.String, long, long, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateShouldScan</h4>
<pre>static&nbsp;boolean&nbsp;calculateShouldScan(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageId,
                          long&nbsp;targetBytesPerSec,
                          long&nbsp;scannedBytesSum,
                          long&nbsp;startMinute,
                          long&nbsp;curMinute)</pre>
</li>
</ul>
<a name="runLoop(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runLoop</h4>
<pre>private&nbsp;long&nbsp;runLoop(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;suspectBlock)</pre>
<div class="block">Run an iteration of the VolumeScanner loop.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>suspectBlock</code> - A suspect block which we should scan, or null to
                       scan the next regularly scheduled block.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The number of milliseconds to delay before running the loop
               again, or 0 to re-run the loop immediately.</dd></dl>
</li>
</ul>
<a name="popNextSuspectBlock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>popNextSuspectBlock</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;popNextSuspectBlock()</pre>
<div class="block">If there are elements in the suspectBlocks list, removes
 and returns the first one.  Otherwise, returns null.</div>
</li>
</ul>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true#run()" title="class or interface in java.lang">run</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#run()" title="class or interface in java.lang">run</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a></code></dd>
</dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a></code></dd>
</dl>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
<div class="block">Shut down this scanner.</div>
</li>
</ul>
<a name="markSuspectBlock(org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markSuspectBlock</h4>
<pre>public&nbsp;void&nbsp;markSuspectBlock(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</pre>
</li>
</ul>
<a name="enableBlockPoolId(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableBlockPoolId</h4>
<pre>public&nbsp;void&nbsp;enableBlockPoolId(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Allow the scanner to scan the given block pool.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - The block pool id.</dd></dl>
</li>
</ul>
<a name="disableBlockPoolId(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disableBlockPoolId</h4>
<pre>public&nbsp;void&nbsp;disableBlockPoolId(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Disallow the scanner from scanning the given block pool.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bpid</code> - The block pool id.</dd></dl>
</li>
</ul>
<a name="getStatistics()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getStatistics</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.Statistics.html" title="class in org.apache.hadoop.hdfs.server.datanode">VolumeScanner.Statistics</a>&nbsp;getStatistics()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VolumeScanner.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/UnexpectedReplicaStateException.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/VolumeScanner.ScanResultHandler.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/datanode/VolumeScanner.html" target="_top">Frames</a></li>
<li><a href="VolumeScanner.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
