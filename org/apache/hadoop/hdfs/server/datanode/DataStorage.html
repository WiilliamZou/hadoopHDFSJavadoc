<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:54:06 EDT 2015 -->
<title>DataStorage</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DataStorage";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DataStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DatanodeUtil.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/datanode/DataStorage.html" target="_top">Frames</a></li>
<li><a href="DataStorage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.datanode</div>
<h2 title="Class DataStorage" class="title">Class DataStorage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">org.apache.hadoop.hdfs.server.common.StorageInfo</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">org.apache.hadoop.hdfs.server.common.Storage</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.datanode.DataStorage</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@InterfaceAudience.Private
public class <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.83">DataStorage</a>
extends <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></pre>
<div class="block">Data storage information file.
 <p></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common"><code>Storage</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.VolumeBuilder.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.VolumeBuilder</a></strong></code>
<div class="block">VolumeBuilder holds the metadata (e.g., the storage directories) of the
 prepared volume returned from <code>prepareVolume()</code>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_org.apache.hadoop.hdfs.server.common.Storage">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.apache.hadoop.hdfs.server.common.<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.FormatConfirmable.html" title="interface in org.apache.hadoop.hdfs.server.common">Storage.FormatConfirmable</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirType.html" title="interface in org.apache.hadoop.hdfs.server.common">Storage.StorageDirType</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageState.html" title="enum in org.apache.hadoop.hdfs.server.common">Storage.StorageState</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#BLOCK_SUBDIR_PREFIX">BLOCK_SUBDIR_PREFIX</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BlockPoolSliceStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockPoolSliceStorage</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#bpStorageMap">bpStorageMap</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#COPY_FILE_PREFIX">COPY_FILE_PREFIX</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#datanodeUuid">datanodeUuid</a></strong></code>
<div class="block">Datanode UUID that this storage is currently attached to.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#initialized">initialized</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#STORAGE_DIR_DETACHED">STORAGE_DIR_DETACHED</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#STORAGE_DIR_FINALIZED">STORAGE_DIR_FINALIZED</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#STORAGE_DIR_LAZY_PERSIST">STORAGE_DIR_LAZY_PERSIST</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#STORAGE_DIR_RBW">STORAGE_DIR_RBW</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#STORAGE_DIR_TMP">STORAGE_DIR_TMP</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#trashEnabledBpids">trashEnabledBpids</a></strong></code>
<div class="block">Set of bpids for which 'trash' is currently enabled.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.hadoop.hdfs.server.common.Storage">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.hadoop.hdfs.server.common.<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#LAST_PRE_UPGRADE_LAYOUT_VERSION">LAST_PRE_UPGRADE_LAYOUT_VERSION</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#LAST_UPGRADABLE_HADOOP_VERSION">LAST_UPGRADABLE_HADOOP_VERSION</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#LAST_UPGRADABLE_LAYOUT_VERSION">LAST_UPGRADABLE_LAYOUT_VERSION</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#LAYOUT_VERSIONS_203">LAYOUT_VERSIONS_203</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#LOG">LOG</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_1_BBW">STORAGE_1_BBW</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_DIR_CURRENT">STORAGE_DIR_CURRENT</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_DIR_PREVIOUS">STORAGE_DIR_PREVIOUS</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_FILE_LOCK">STORAGE_FILE_LOCK</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_PREVIOUS_CKPT">STORAGE_PREVIOUS_CKPT</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_TMP_FINALIZED">STORAGE_TMP_FINALIZED</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_TMP_LAST_CKPT">STORAGE_TMP_LAST_CKPT</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_TMP_PREVIOUS">STORAGE_TMP_PREVIOUS</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#STORAGE_TMP_REMOVED">STORAGE_TMP_REMOVED</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#storageDirs">storageDirs</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.hadoop.hdfs.server.common.StorageInfo">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.hadoop.hdfs.server.common.<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#clusterID">clusterID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#cTime">cTime</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#layoutVersion">layoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#namespaceID">namespaceID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#STORAGE_FILE_VERSION">STORAGE_FILE_VERSION</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#storageType">storageType</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#DataStorage()">DataStorage</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#DataStorage(org.apache.hadoop.hdfs.server.common.StorageInfo)">DataStorage</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;storageInfo)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#addBlockPoolStorage(java.lang.String,%20org.apache.hadoop.hdfs.server.datanode.BlockPoolSliceStorage)">addBlockPoolStorage</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpID,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BlockPoolSliceStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockPoolSliceStorage</a>&nbsp;bpStorage)</code>
<div class="block">Add bpStorage into bpStorageMap</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#addStorageLocations(org.apache.hadoop.hdfs.server.datanode.DataNode,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo,%20java.util.Collection,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">addStorageLocations</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                                      <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;dataDirs,
                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt)</code>
<div class="block">Add a list of volumes to be managed by DataStorage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#cleanupDetachDir(java.io.File)">cleanupDetachDir</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;detachDir)</code>
<div class="block">Cleanup the detachDir.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#clearRollingUpgradeMarker(java.lang.String)">clearRollingUpgradeMarker</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#createStorageID(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20boolean)">createStorageID</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                              boolean&nbsp;regenerateStorageIds)</code>
<div class="block">Create an ID for this storage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#doFinalize(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">doFinalize</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>
<div class="block">Finalize procedure deletes an existing snapshot.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#doRollback(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">doRollback</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)</code>
<div class="block">Rolling back to a snapshot in previous directory by moving it to current
 directory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#doTransition(org.apache.hadoop.hdfs.server.datanode.DataNode,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">doTransition</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                        <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                        <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                        <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt)</code>
<div class="block">Analize which and whether a transition of the fs state is required
 and perform it if necessary.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#doUpgrade(org.apache.hadoop.hdfs.server.datanode.DataNode,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">doUpgrade</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)</code>
<div class="block">Upgrade -- Move current storage into a backup directory,
 and hardlink all its blocks into the new current directory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#enableTrash(java.lang.String)">enableTrash</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>
<div class="block">Enable trash for the specified block pool storage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#finalizeUpgrade(java.lang.String)">finalizeUpgrade</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpID)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#findDuplicateEntries(java.util.ArrayList)">findDuplicateEntries</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a>&gt;&nbsp;all)</code>
<div class="block">Find duplicate entries with an array of LinkArgs.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#format(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo,%20java.lang.String)">format</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
            <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
            <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;datanodeUuid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BlockPoolSliceStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockPoolSliceStorage</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#getBPStorage(java.lang.String)">getBPStorage</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#getDatanodeUuid()">getDatanodeUuid</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#getTrashDirectoryForBlockFile(java.lang.String,%20java.io.File)">getTrashDirectoryForBlockFile</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockFile)</code>
<div class="block">If rolling upgrades are in progress then do not delete block files
 immediately.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#isPreUpgradableLayout(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">isPreUpgradableLayout</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>
<div class="block">Return true if the layout of the given storage directory is from a version
 of Hadoop prior to the introduction of the "current" and "previous"
 directories which allow upgrade and rollback.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#linkAllBlocks(org.apache.hadoop.hdfs.server.datanode.DataNode,%20java.io.File,%20java.io.File,%20java.io.File)">linkAllBlocks</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;fromDir,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;fromBbwDir,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;toDir)</code>
<div class="block">Hardlink all finalized and RBW blocks in fromDir to toDir</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#linkBlocks(org.apache.hadoop.hdfs.server.datanode.DataNode,%20java.io.File,%20java.io.File,%20int,%20org.apache.hadoop.fs.HardLink)">linkBlocks</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;from,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;to,
                    int&nbsp;oldLV,
                    org.apache.hadoop.fs.HardLink&nbsp;hl)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#linkBlocksHelper(java.io.File,%20java.io.File,%20int,%20org.apache.hadoop.fs.HardLink,%20boolean,%20java.io.File,%20java.util.List)">linkBlocksHelper</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;from,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;to,
                                int&nbsp;oldLV,
                                org.apache.hadoop.fs.HardLink&nbsp;hl,
                                boolean&nbsp;upgradeToIdBasedLayout,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockRoot,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a>&gt;&nbsp;idBasedLayoutSingleLinks)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#loadStorageDirectory(org.apache.hadoop.hdfs.server.datanode.DataNode,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo,%20java.io.File,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">loadStorageDirectory</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dataDir,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#makeBlockPoolDataDir(java.util.Collection,%20org.apache.hadoop.conf.Configuration)">makeBlockPoolDataDir</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;dataDirs,
                                        org.apache.hadoop.conf.Configuration&nbsp;conf)</code>
<div class="block">Create physical directory for block pools on the data node</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.VolumeBuilder.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.VolumeBuilder</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#prepareVolume(org.apache.hadoop.hdfs.server.datanode.DataNode,%20java.io.File,%20java.util.List)">prepareVolume</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;volume,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&gt;&nbsp;nsInfos)</code>
<div class="block">Prepare a storage directory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#readProperties(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20int)">readProperties</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                            int&nbsp;rollbackLayoutVersion)</code>
<div class="block">Read VERSION file for rollback</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#recoverTransitionRead(org.apache.hadoop.hdfs.server.datanode.DataNode,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo,%20java.util.Collection,%20org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">recoverTransitionRead</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                                          <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                                          <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;dataDirs,
                                          <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt)</code>
<div class="block">Analyze storage directories for a specific block pool.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#removeBlockPoolStorage(java.lang.String)">removeBlockPoolStorage</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#removeDuplicateEntries(java.util.ArrayList,%20java.util.ArrayList)">removeDuplicateEntries</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a>&gt;&nbsp;all,
                                            <a href="https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a>&gt;&nbsp;duplicates)</code>
<div class="block">Remove duplicate entries from the list.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#removeVolumes(java.util.Set)">removeVolumes</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;dirsToRemove)</code>
<div class="block">Remove storage dirs from DataStorage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#restoreTrash(java.lang.String)">restoreTrash</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#setDatanodeUuid(java.lang.String)">setDatanodeUuid</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;newDatanodeUuid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#setFieldsFromProperties(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setFieldsFromProperties</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props,
                                              <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>
<div class="block">Get common storage fields.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#setFieldsFromProperties(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20boolean,%20int)">setFieldsFromProperties</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props,
                                              <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                                              boolean&nbsp;overrideLayoutVersion,
                                              int&nbsp;toLayoutVersion)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#setPropertiesFromFields(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setPropertiesFromFields</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props,
                                              <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)</code>
<div class="block">Set common storage fields into the given properties object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#setRollingUpgradeMarker(java.lang.String)">setRollingUpgradeMarker</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.html#trashEnabled(java.lang.String)">trashEnabled</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.hadoop.hdfs.server.common.Storage">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.hadoop.hdfs.server.common.<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#addStorageDir(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">addStorageDir</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#checkVersionUpgradable(int)">checkVersionUpgradable</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#confirmFormat(java.lang.Iterable,%20boolean,%20boolean)">confirmFormat</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#containsStorageDir(java.io.File)">containsStorageDir</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#deleteDir(java.io.File)">deleteDir</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#dirIterable(org.apache.hadoop.hdfs.server.common.Storage.StorageDirType)">dirIterable</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#dirIterator()">dirIterator</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#dirIterator(boolean)">dirIterator</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#dirIterator(org.apache.hadoop.hdfs.server.common.Storage.StorageDirType)">dirIterator</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#dirIterator(org.apache.hadoop.hdfs.server.common.Storage.StorageDirType,%20boolean)">dirIterator</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getBuildVersion()">getBuildVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getFiles(org.apache.hadoop.hdfs.server.common.Storage.StorageDirType,%20java.lang.String)">getFiles</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getNumStorageDirs()">getNumStorageDirs</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getRegistrationID(org.apache.hadoop.hdfs.server.common.StorageInfo)">getRegistrationID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getSingularStorageDir()">getSingularStorageDir</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#getStorageDir(int)">getStorageDir</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#is203LayoutVersion(int)">is203LayoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#listStorageDirectories()">listStorageDirectories</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#nativeCopyFileUnbuffered(java.io.File,%20java.io.File,%20boolean)">nativeCopyFileUnbuffered</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#rename(java.io.File,%20java.io.File)">rename</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#unlockAll()">unlockAll</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#writeAll()">writeAll</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#writeProperties(java.io.File,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">writeProperties</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#writeProperties(java.io.File,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20java.util.Properties)">writeProperties</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#writeProperties(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">writeProperties</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.hadoop.hdfs.server.common.StorageInfo">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.hadoop.hdfs.server.common.<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#checkStorageType(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">checkStorageType</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getClusterID()">getClusterID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getClusterIdFromColonSeparatedString(java.lang.String)">getClusterIdFromColonSeparatedString</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getCTime()">getCTime</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getLayoutVersion()">getLayoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getNamespaceID()">getNamespaceID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getNsIdFromColonSeparatedString(java.lang.String)">getNsIdFromColonSeparatedString</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getProperty(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory,%20java.lang.String)">getProperty</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getServiceLayoutFeatureMap()">getServiceLayoutFeatureMap</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#getServiceLayoutVersion()">getServiceLayoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#readPreviousVersionProperties(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">readPreviousVersionProperties</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#readProperties(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">readProperties</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#readPropertiesFile(java.io.File)">readPropertiesFile</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setClusterId(java.util.Properties,%20int,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setClusterId</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setcTime(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setcTime</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setLayoutVersion(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setLayoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setNamespaceID(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setNamespaceID</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setServiceLayoutVersion(int)">setServiceLayoutVersion</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setStorageInfo(org.apache.hadoop.hdfs.server.common.StorageInfo)">setStorageInfo</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#toColonSeparatedString()">toColonSeparatedString</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#toString()">toString</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#versionSupportsFederation(java.util.Map)">versionSupportsFederation</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="BLOCK_SUBDIR_PREFIX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BLOCK_SUBDIR_PREFIX</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.85">BLOCK_SUBDIR_PREFIX</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.DataStorage.BLOCK_SUBDIR_PREFIX">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="COPY_FILE_PREFIX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>COPY_FILE_PREFIX</h4>
<pre>static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.86">COPY_FILE_PREFIX</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.DataStorage.COPY_FILE_PREFIX">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="STORAGE_DIR_DETACHED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STORAGE_DIR_DETACHED</h4>
<pre>static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.87">STORAGE_DIR_DETACHED</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.DataStorage.STORAGE_DIR_DETACHED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="STORAGE_DIR_RBW">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STORAGE_DIR_RBW</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.88">STORAGE_DIR_RBW</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.DataStorage.STORAGE_DIR_RBW">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="STORAGE_DIR_FINALIZED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STORAGE_DIR_FINALIZED</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.89">STORAGE_DIR_FINALIZED</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.DataStorage.STORAGE_DIR_FINALIZED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="STORAGE_DIR_LAZY_PERSIST">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STORAGE_DIR_LAZY_PERSIST</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.90">STORAGE_DIR_LAZY_PERSIST</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.DataStorage.STORAGE_DIR_LAZY_PERSIST">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="STORAGE_DIR_TMP">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STORAGE_DIR_TMP</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.91">STORAGE_DIR_TMP</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.server.datanode.DataStorage.STORAGE_DIR_TMP">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="trashEnabledBpids">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trashEnabledBpids</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.104">trashEnabledBpids</a></pre>
<div class="block">Set of bpids for which 'trash' is currently enabled.
 When trash is enabled block files are moved under a separate
 'trash' folder instead of being deleted right away. This can
 be useful during rolling upgrades, for example.
 The set is backed by a concurrent HashMap.

 Even if trash is enabled, it is not used if a layout upgrade
 is in progress for a storage directory i.e. if the previous
 directory exists.</div>
</li>
</ul>
<a name="datanodeUuid">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>datanodeUuid</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.112">datanodeUuid</a></pre>
<div class="block">Datanode UUID that this storage is currently attached to. This
  is the same as the legacy StorageID for datanodes that were
  upgraded from a pre-UUID version. For compatibility with prior
  versions of Datanodes we cannot make this field a UUID.</div>
</li>
</ul>
<a name="initialized">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialized</h4>
<pre>private&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.115">initialized</a></pre>
</li>
</ul>
<a name="bpStorageMap">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>bpStorageMap</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BlockPoolSliceStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockPoolSliceStorage</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.118">bpStorageMap</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DataStorage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DataStorage</h4>
<pre><a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.122">DataStorage</a>()</pre>
</li>
</ul>
<a name="DataStorage(org.apache.hadoop.hdfs.server.common.StorageInfo)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DataStorage</h4>
<pre>public&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.132">DataStorage</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;storageInfo)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getBPStorage(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBPStorage</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BlockPoolSliceStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockPoolSliceStorage</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.128">getBPStorage</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
</li>
</ul>
<a name="getDatanodeUuid()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDatanodeUuid</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.136">getDatanodeUuid</a>()</pre>
</li>
</ul>
<a name="setDatanodeUuid(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDatanodeUuid</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.140">setDatanodeUuid</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;newDatanodeUuid)</pre>
</li>
</ul>
<a name="createStorageID(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createStorageID</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.147">createStorageID</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                      boolean&nbsp;regenerateStorageIds)</pre>
<div class="block">Create an ID for this storage.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if a new storage ID was generated.</dd></dl>
</li>
</ul>
<a name="enableTrash(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableTrash</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.165">enableTrash</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
<div class="block">Enable trash for the specified block pool storage. Even if trash is
 enabled by the caller, it is superseded by the 'previous' directory
 if a layout upgrade is in progress.</div>
</li>
</ul>
<a name="restoreTrash(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreTrash</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.171">restoreTrash</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
</li>
</ul>
<a name="trashEnabled(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trashEnabled</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.179">trashEnabled</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)</pre>
</li>
</ul>
<a name="setRollingUpgradeMarker(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRollingUpgradeMarker</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.183">setRollingUpgradeMarker</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="clearRollingUpgradeMarker(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearRollingUpgradeMarker</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.187">clearRollingUpgradeMarker</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid)
                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getTrashDirectoryForBlockFile(java.lang.String, java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTrashDirectoryForBlockFile</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.200">getTrashDirectoryForBlockFile</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpid,
                                   <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockFile)</pre>
<div class="block">If rolling upgrades are in progress then do not delete block files
 immediately. Instead we move the block files to an intermediate
 'trash' directory. If there is a subsequent rollback, then the block
 files will be restored from trash.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>trash directory if rolling upgrade is in progress, null
         otherwise.</dd></dl>
</li>
</ul>
<a name="loadStorageDirectory(org.apache.hadoop.hdfs.server.datanode.DataNode, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo, java.io.File, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadStorageDirectory</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.258">loadStorageDirectory</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                                            <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dataDir,
                                            <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt)
                                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="prepareVolume(org.apache.hadoop.hdfs.server.datanode.DataNode, java.io.File, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareVolume</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.VolumeBuilder.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.VolumeBuilder</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.313">prepareVolume</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                                      <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;volume,
                                      <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&gt;&nbsp;nsInfos)
                                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Prepare a storage directory. It creates a builder which can be used to add
 to the volume. If the volume cannot be added, it is OK to discard the
 builder later.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>datanode</code> - DataNode object.</dd><dd><code>volume</code> - the root path of a storage directory.</dd><dd><code>nsInfos</code> - an array of namespace infos.</dd>
<dt><span class="strong">Returns:</span></dt><dd>a VolumeBuilder that holds the metadata of this storage directory
 and can be added to DataStorage later.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if encounters I/O errors.

 Note that if there is IOException, the state of DataStorage is not modified.</dd></dl>
</li>
</ul>
<a name="addStorageLocations(org.apache.hadoop.hdfs.server.datanode.DataNode, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo, java.util.Collection, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addStorageLocations</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.361">addStorageLocations</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;dataDirs,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt)
                                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Add a list of volumes to be managed by DataStorage. If the volume is empty,
 format it, otherwise recover it from previous transitions if required.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>datanode</code> - the reference to DataNode.</dd><dd><code>nsInfo</code> - namespace information</dd><dd><code>dataDirs</code> - array of data storage directories</dd><dd><code>startOpt</code> - startup option</dd>
<dt><span class="strong">Returns:</span></dt><dd>a list of successfully loaded volumes.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="removeVolumes(java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeVolumes</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.413">removeVolumes</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;dirsToRemove)
             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Remove storage dirs from DataStorage. All storage dirs are removed even when the
 IOException is thrown.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>dirsToRemove</code> - a set of storage directories to be removed.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if I/O error when unlocking storage directory.</dd></dl>
</li>
</ul>
<a name="recoverTransitionRead(org.apache.hadoop.hdfs.server.datanode.DataNode, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo, java.util.Collection, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverTransitionRead</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.466">recoverTransitionRead</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                         <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/StorageLocation.html" title="class in org.apache.hadoop.hdfs.server.datanode">StorageLocation</a>&gt;&nbsp;dataDirs,
                         <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Analyze storage directories for a specific block pool.
 Recover from previous transitions if required.
 Perform fs state transition if necessary depending on the namespace info.
 Read storage info.
 <br>
 This method should be synchronized between multiple DN threads.  Only the
 first DN thread does DN level storage dir recoverTransitionRead.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>datanode</code> - DataNode</dd><dd><code>nsInfo</code> - Namespace info of namenode corresponding to the block pool</dd><dd><code>dataDirs</code> - Storage directories</dd><dd><code>startOpt</code> - startup option</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on error</dd></dl>
</li>
</ul>
<a name="makeBlockPoolDataDir(java.util.Collection, org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeBlockPoolDataDir</h4>
<pre>static&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.490">makeBlockPoolDataDir</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;dataDirs,
                        org.apache.hadoop.conf.Configuration&nbsp;conf)
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create physical directory for block pools on the data node</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>dataDirs</code> - List of data directories</dd><dd><code>conf</code> - Configuration instance to use.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on errors</dd></dl>
</li>
</ul>
<a name="format(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>format</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.509">format</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
          <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
          <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;datanodeUuid)
      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="setPropertiesFromFields(java.util.Properties, org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPropertiesFromFields</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.533">setPropertiesFromFields</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props,
                           <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#setPropertiesFromFields(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">Storage</a></code></strong></div>
<div class="block">Set common storage fields into the given properties object.
 Should be overloaded if additional fields need to be set.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#setPropertiesFromFields(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setPropertiesFromFields</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>props</code> - the Properties object to write into</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="setFieldsFromProperties(java.util.Properties, org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFieldsFromProperties</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.560">setFieldsFromProperties</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props,
                           <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setFieldsFromProperties(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">StorageInfo</a></code></strong></div>
<div class="block">Get common storage fields.
 Should be overloaded if additional fields need to be get.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html#setFieldsFromProperties(java.util.Properties,%20org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">setFieldsFromProperties</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>props</code> - properties</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on error</dd></dl>
</li>
</ul>
<a name="setFieldsFromProperties(java.util.Properties, org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, boolean, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFieldsFromProperties</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.565">setFieldsFromProperties</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;props,
                           <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                           boolean&nbsp;overrideLayoutVersion,
                           int&nbsp;toLayoutVersion)
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="isPreUpgradableLayout(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isPreUpgradableLayout</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.616">isPreUpgradableLayout</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#isPreUpgradableLayout(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">Storage</a></code></strong></div>
<div class="block">Return true if the layout of the given storage directory is from a version
 of Hadoop prior to the introduction of the "current" and "previous"
 directories which allow upgrade and rollback.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html#isPreUpgradableLayout(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">isPreUpgradableLayout</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readProperties(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readProperties</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.637">readProperties</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                  int&nbsp;rollbackLayoutVersion)
              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Read VERSION file for rollback</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doTransition(org.apache.hadoop.hdfs.server.datanode.DataNode, org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo, org.apache.hadoop.hdfs.server.common.HdfsServerConstants.StartupOption)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doTransition</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.657">doTransition</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
                <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                <a href="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsServerConstants.StartupOption.html" title="enum in org.apache.hadoop.hdfs.server.common">HdfsServerConstants.StartupOption</a>&nbsp;startOpt)
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Analize which and whether a transition of the fs state is required
 and perform it if necessary.
 
 Rollback if the rollback startup option was specified.
 Upgrade if this.LV > LAYOUT_VERSION
 Regular startup if this.LV = LAYOUT_VERSION</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>datanode</code> - Datanode to which this storage belongs to</dd><dd><code>sd</code> - storage directory</dd><dd><code>nsInfo</code> - namespace info</dd><dd><code>startOpt</code> - startup option</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doUpgrade(org.apache.hadoop.hdfs.server.datanode.DataNode, org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doUpgrade</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.742">doUpgrade</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)
         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Upgrade -- Move current storage into a backup directory,
 and hardlink all its blocks into the new current directory.
 
 Upgrade from pre-0.22 to 0.22 or later release e.g. 0.19/0.20/ => 0.22/0.23
 <ul>
 <li> If <SD>/previous exists then delete it </li>
 <li> Rename <SD>/current to <SD>/previous.tmp </li>
 <li>Create new <SD>/current/<bpid>/current directory<li>
 <ul>
 <li> Hard links for block files are created from <SD>/previous.tmp 
 to <SD>/current/<bpid>/current </li>
 <li> Saves new version file in <SD>/current/<bpid>/current directory </li>
 </ul>
 <li> Rename <SD>/previous.tmp to <SD>/previous </li>
 </ul>
 
 There should be only ONE namenode in the cluster for first 
 time upgrade to 0.22</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sd</code> - storage directory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on error</dd></dl>
</li>
</ul>
<a name="cleanupDetachDir(java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanupDetachDir</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.812">cleanupDetachDir</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;detachDir)
                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Cleanup the detachDir. 
 
 If the directory is not empty report an error; 
 Otherwise remove the directory.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>detachDir</code> - detach directory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the directory is not empty or it can not be removed</dd></dl>
</li>
</ul>
<a name="doRollback(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doRollback</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.844">doRollback</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd,
              <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)
          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Rolling back to a snapshot in previous directory by moving it to current
 directory.
 Rollback procedure:
 <br>
 If previous directory exists:
 <ol>
 <li> Rename current to removed.tmp </li>
 <li> Rename previous to current </li>
 <li> Remove removed.tmp </li>
 </ol>
 
 If previous directory does not exist and the current version supports
 federation, perform a simple rollback of layout version. This does not
 involve saving/restoration of actual data.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doFinalize(org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doFinalize</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.898">doFinalize</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" title="class in org.apache.hadoop.hdfs.server.common">Storage.StorageDirectory</a>&nbsp;sd)
          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Finalize procedure deletes an existing snapshot.
 <ol>
 <li>Rename previous to finalized.tmp directory</li>
 <li>Fully delete the finalized.tmp directory</li>
 </ol>
 
 Do nothing, if previous directory does not exist</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="finalizeUpgrade(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeUpgrade</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.941">finalizeUpgrade</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpID)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="linkAllBlocks(org.apache.hadoop.hdfs.server.datanode.DataNode, java.io.File, java.io.File, java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>linkAllBlocks</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.968">linkAllBlocks</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;fromDir,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;fromBbwDir,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;toDir)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Hardlink all finalized and RBW blocks in fromDir to toDir</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fromDir</code> - The directory where the 'from' snapshot is stored</dd><dd><code>fromBbwDir</code> - In HDFS 1.x, the directory where blocks
                     that are under construction are stored.</dd><dd><code>toDir</code> - The current data directory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - If error occurs during hardlink</dd></dl>
</li>
</ul>
<a name="linkBlocks(org.apache.hadoop.hdfs.server.datanode.DataNode, java.io.File, java.io.File, int, org.apache.hadoop.fs.HardLink)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>linkBlocks</h4>
<pre>static&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.1009">linkBlocks</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a>&nbsp;datanode,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;from,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;to,
              int&nbsp;oldLV,
              org.apache.hadoop.fs.HardLink&nbsp;hl)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="findDuplicateEntries(java.util.ArrayList)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findDuplicateEntries</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.1064">findDuplicateEntries</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a>&gt;&nbsp;all)</pre>
<div class="block">Find duplicate entries with an array of LinkArgs.
 Duplicate entries are entries with the same last path component.</div>
</li>
</ul>
<a name="removeDuplicateEntries(java.util.ArrayList, java.util.ArrayList)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeDuplicateEntries</h4>
<pre>private static&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.1120">removeDuplicateEntries</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a>&gt;&nbsp;all,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a>&gt;&nbsp;duplicates)</pre>
<div class="block">Remove duplicate entries from the list.
 We do this by choosing:
 1. the entries with the highest genstamp (this takes priority),
 2. the entries with the longest block files,
 3. arbitrarily, if neither #1 nor #2 gives a clear winner.

 Block and metadata files form a pair-- if you take a metadata file from
 one subdirectory, you must also take the block file from that
 subdirectory.</div>
</li>
</ul>
<a name="linkBlocksHelper(java.io.File, java.io.File, int, org.apache.hadoop.fs.HardLink, boolean, java.io.File, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>linkBlocksHelper</h4>
<pre>static&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.1215">linkBlocksHelper</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;from,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;to,
                    int&nbsp;oldLV,
                    org.apache.hadoop.fs.HardLink&nbsp;hl,
                    boolean&nbsp;upgradeToIdBasedLayout,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;blockRoot,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataStorage.LinkArgs</a>&gt;&nbsp;idBasedLayoutSingleLinks)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="addBlockPoolStorage(java.lang.String, org.apache.hadoop.hdfs.server.datanode.BlockPoolSliceStorage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addBlockPoolStorage</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.1302">addBlockPoolStorage</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpID,
                       <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BlockPoolSliceStorage.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockPoolSliceStorage</a>&nbsp;bpStorage)</pre>
<div class="block">Add bpStorage into bpStorageMap</div>
</li>
</ul>
<a name="removeBlockPoolStorage(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>removeBlockPoolStorage</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/DataStorage.html#line.1309">removeBlockPoolStorage</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;bpId)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DataStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DatanodeUtil.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataStorage.LinkArgs.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/datanode/DataStorage.html" target="_top">Frames</a></li>
<li><a href="DataStorage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
