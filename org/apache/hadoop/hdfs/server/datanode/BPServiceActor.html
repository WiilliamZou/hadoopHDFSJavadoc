<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:54:06 EDT 2015 -->
<title>BPServiceActor</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BPServiceActor";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BPServiceActor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPOfferService.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.PerStoragePendingIncrementalBR.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html" target="_top">Frames</a></li>
<li><a href="BPServiceActor.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.server.datanode</div>
<h2 title="Class BPServiceActor" class="title">Class BPServiceActor</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.server.datanode.BPServiceActor</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
 class <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.77">BPServiceActor</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a></pre>
<div class="block">A thread per active or standby namenode to perform:
 <ul>
 <li> Pre-registration handshake with namenode</li>
 <li> Registration with namenode</li>
 <li> Send periodic heartbeats to the namenode</li>
 <li> Handle commands received from the namenode</li>
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.PerStoragePendingIncrementalBR.html" title="class in org.apache.hadoop.hdfs.server.datanode">BPServiceActor.PerStoragePendingIncrementalBR</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.RunningState.html" title="enum in org.apache.hadoop.hdfs.server.datanode">BPServiceActor.RunningState</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/protocolPB/DatanodeProtocolClientSideTranslatorPB.html" title="class in org.apache.hadoop.hdfs.protocolPB">DatanodeProtocolClientSideTranslatorPB</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#bpNamenode">bpNamenode</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPOfferService.html" title="class in org.apache.hadoop.hdfs.server.datanode">BPOfferService</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#bpos">bpos</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeRegistration.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeRegistration</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#bpRegistration">bpRegistration</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#bpThread">bpThread</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html?is-external=true" title="class or interface in java.util">LinkedList</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActorAction.html" title="interface in org.apache.hadoop.hdfs.server.datanode">BPServiceActorAction</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#bpThreadQueue">bpThreadQueue</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#dn">dn</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DNConf.html" title="class in org.apache.hadoop.hdfs.server.datanode">DNConf</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#dnConf">dnConf</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#lastBlockReport">lastBlockReport</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#lastCacheReport">lastCacheReport</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#lastDeletedReport">lastDeletedReport</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#lastHeartbeat">lastHeartbeat</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#nnAddr">nnAddr</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>,<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.PerStoragePendingIncrementalBR.html" title="class in org.apache.hadoop.hdfs.server.datanode">BPServiceActor.PerStoragePendingIncrementalBR</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#pendingIncrementalBRperStorage">pendingIncrementalBRperStorage</a></strong></code>
<div class="block">Between block reports (which happen on the order of once an hour) the
 DN reports smaller incremental changes to its block list.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#prevBlockReportId">prevBlockReportId</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#resetBlockReportTime">resetBlockReportTime</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.RunningState.html" title="enum in org.apache.hadoop.hdfs.server.datanode">BPServiceActor.RunningState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#runningState">runningState</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#sendImmediateIBR">sendImmediateIBR</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#shouldServiceRun">shouldServiceRun</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) org.apache.hadoop.ha.HAServiceProtocol.HAServiceState</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#state">state</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#BPServiceActor(java.net.InetSocketAddress,%20org.apache.hadoop.hdfs.server.datanode.BPOfferService)">BPServiceActor</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;nnAddr,
                            <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPOfferService.html" title="class in org.apache.hadoop.hdfs.server.datanode">BPOfferService</a>&nbsp;bpos)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#addPendingReplicationBlockInfo(org.apache.hadoop.hdfs.server.protocol.ReceivedDeletedBlockInfo,%20org.apache.hadoop.hdfs.server.protocol.DatanodeStorage)">addPendingReplicationBlockInfo</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/ReceivedDeletedBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReceivedDeletedBlockInfo</a>&nbsp;bInfo,
                                                            <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>&nbsp;storage)</code>
<div class="block">Add a blockInfo for notification to NameNode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeCommand</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#blockReport()">blockReport</a></strong>()</code>
<div class="block">Report the list blocks to the Namenode</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#bpThreadEnqueue(org.apache.hadoop.hdfs.server.datanode.BPServiceActorAction)">bpThreadEnqueue</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActorAction.html" title="interface in org.apache.hadoop.hdfs.server.datanode">BPServiceActorAction</a>&nbsp;action)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeCommand</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#cacheReport()">cacheReport</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#checkNNVersion(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">checkNNVersion</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#cleanUp()">cleanUp</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#connectToNNAndHandshake()">connectToNNAndHandshake</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#formatThreadName()">formatThreadName</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#generateUniqueBlockReportId()">generateUniqueBlockReportId</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.PerStoragePendingIncrementalBR.html" title="class in org.apache.hadoop.hdfs.server.datanode">BPServiceActor.PerStoragePendingIncrementalBR</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#getIncrementalBRMapForStorage(org.apache.hadoop.hdfs.server.protocol.DatanodeStorage)">getIncrementalBRMapForStorage</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>&nbsp;storage)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/protocolPB/DatanodeProtocolClientSideTranslatorPB.html" title="class in org.apache.hadoop.hdfs.protocolPB">DatanodeProtocolClientSideTranslatorPB</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#getNameNodeProxy()">getNameNodeProxy</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#getNNSocketAddress()">getNNSocketAddress</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#handleRollingUpgradeStatus(org.apache.hadoop.hdfs.server.protocol.HeartbeatResponse)">handleRollingUpgradeStatus</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/HeartbeatResponse.html" title="class in org.apache.hadoop.hdfs.server.protocol">HeartbeatResponse</a>&nbsp;resp)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#hasPendingIBR()">hasPendingIBR</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#isAlive()">isAlive</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#join()">join</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#notifyNamenodeBlock(org.apache.hadoop.hdfs.server.protocol.ReceivedDeletedBlockInfo,%20java.lang.String,%20boolean)">notifyNamenodeBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/ReceivedDeletedBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReceivedDeletedBlockInfo</a>&nbsp;bInfo,
                                      <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageUuid,
                                      boolean&nbsp;now)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#notifyNamenodeDeletedBlock(org.apache.hadoop.hdfs.server.protocol.ReceivedDeletedBlockInfo,%20java.lang.String)">notifyNamenodeDeletedBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/ReceivedDeletedBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReceivedDeletedBlockInfo</a>&nbsp;bInfo,
                                                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageUuid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#offerService()">offerService</a></strong>()</code>
<div class="block">Main loop for each BP thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#processCommand(org.apache.hadoop.hdfs.server.protocol.DatanodeCommand[])">processCommand</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeCommand</a>[]&nbsp;cmds)</code>
<div class="block">Process an array of datanode commands</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#processQueueMessages()">processQueueMessages</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#register(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">register</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)</code>
<div class="block">Register one bp with the corresponding NameNode</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#reportReceivedDeletedBlocks()">reportReceivedDeletedBlocks</a></strong>()</code>
<div class="block">Report received blocks and delete hints to the Namenode for each
 storage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#reportRemoteBadBlock(org.apache.hadoop.hdfs.protocol.DatanodeInfo,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock)">reportRemoteBadBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;dnInfo,
                                        <a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)</code>
<div class="block">Report a bad block from another DN in this cluster.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#reRegister()">reRegister</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#retrieveNamespaceInfo()">retrieveNamespaceInfo</a></strong>()</code>
<div class="block">Perform the first part of the handshake with the NameNode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#run()">run</a></strong>()</code>
<div class="block">No matter what kind of exception we get, keep retrying to offerService().</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#scheduleBlockReport(long)">scheduleBlockReport</a></strong>(long&nbsp;delay)</code>
<div class="block">This methods  arranges for the data node to send the block report at 
 the next heartbeat.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#scheduleHeartbeat()">scheduleHeartbeat</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#scheduleNextBlockReport(long)">scheduleNextBlockReport</a></strong>(long&nbsp;previousReportStartTime)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/HeartbeatResponse.html" title="class in org.apache.hadoop.hdfs.server.protocol">HeartbeatResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#sendHeartBeat()">sendHeartBeat</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#setNameNode(org.apache.hadoop.hdfs.protocolPB.DatanodeProtocolClientSideTranslatorPB)">setNameNode</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/protocolPB/DatanodeProtocolClientSideTranslatorPB.html" title="class in org.apache.hadoop.hdfs.protocolPB">DatanodeProtocolClientSideTranslatorPB</a>&nbsp;dnProtocol)</code>
<div class="block">Used to inject a spy NN in the unit tests.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#shouldRetryInit()">shouldRetryInit</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#shouldRun()">shouldRun</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#sleepAndLogInterrupts(int,%20java.lang.String)">sleepAndLogInterrupts</a></strong>(int&nbsp;millis,
                                          <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stateString)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#start()">start</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#stop()">stop</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#triggerBlockReport(org.apache.hadoop.hdfs.client.BlockReportOptions)">triggerBlockReport</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/client/BlockReportOptions.html" title="class in org.apache.hadoop.hdfs.client">BlockReportOptions</a>&nbsp;options)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#triggerBlockReportForTests()">triggerBlockReportForTests</a></strong>()</code>
<div class="block">Run an immediate block report on this thread.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#triggerDeletionReportForTests()">triggerDeletionReportForTests</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#triggerHeartbeatForTests()">triggerHeartbeatForTests</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>static final&nbsp;org.apache.commons.logging.Log <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.79">LOG</a></pre>
</li>
</ul>
<a name="nnAddr">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nnAddr</h4>
<pre>final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.80">nnAddr</a></pre>
</li>
</ul>
<a name="state">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>state</h4>
<pre>org.apache.hadoop.ha.HAServiceProtocol.HAServiceState <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.81">state</a></pre>
</li>
</ul>
<a name="bpos">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bpos</h4>
<pre>final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPOfferService.html" title="class in org.apache.hadoop.hdfs.server.datanode">BPOfferService</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.83">bpos</a></pre>
</li>
</ul>
<a name="lastBlockReport">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastBlockReport</h4>
<pre>volatile&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.89">lastBlockReport</a></pre>
</li>
</ul>
<a name="lastDeletedReport">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastDeletedReport</h4>
<pre>volatile&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.90">lastDeletedReport</a></pre>
</li>
</ul>
<a name="resetBlockReportTime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetBlockReportTime</h4>
<pre>boolean <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.92">resetBlockReportTime</a></pre>
</li>
</ul>
<a name="lastCacheReport">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastCacheReport</h4>
<pre>volatile&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.94">lastCacheReport</a></pre>
</li>
</ul>
<a name="bpThread">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bpThread</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.96">bpThread</a></pre>
</li>
</ul>
<a name="bpNamenode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bpNamenode</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/protocolPB/DatanodeProtocolClientSideTranslatorPB.html" title="class in org.apache.hadoop.hdfs.protocolPB">DatanodeProtocolClientSideTranslatorPB</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.97">bpNamenode</a></pre>
</li>
</ul>
<a name="lastHeartbeat">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastHeartbeat</h4>
<pre>private volatile&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.98">lastHeartbeat</a></pre>
</li>
</ul>
<a name="runningState">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runningState</h4>
<pre>private volatile&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.RunningState.html" title="enum in org.apache.hadoop.hdfs.server.datanode">BPServiceActor.RunningState</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.104">runningState</a></pre>
</li>
</ul>
<a name="pendingIncrementalBRperStorage">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pendingIncrementalBRperStorage</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>,<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.PerStoragePendingIncrementalBR.html" title="class in org.apache.hadoop.hdfs.server.datanode">BPServiceActor.PerStoragePendingIncrementalBR</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.113">pendingIncrementalBRperStorage</a></pre>
<div class="block">Between block reports (which happen on the order of once an hour) the
 DN reports smaller incremental changes to its block list. This map,
 keyed by block ID, contains the pending changes which have yet to be
 reported to the NN. Access should be synchronized on this object.</div>
</li>
</ul>
<a name="sendImmediateIBR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendImmediateIBR</h4>
<pre>private volatile&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.118">sendImmediateIBR</a></pre>
</li>
</ul>
<a name="shouldServiceRun">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldServiceRun</h4>
<pre>private volatile&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.119">shouldServiceRun</a></pre>
</li>
</ul>
<a name="dn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dn</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DataNode.html" title="class in org.apache.hadoop.hdfs.server.datanode">DataNode</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.120">dn</a></pre>
</li>
</ul>
<a name="dnConf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dnConf</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/DNConf.html" title="class in org.apache.hadoop.hdfs.server.datanode">DNConf</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.121">dnConf</a></pre>
</li>
</ul>
<a name="bpRegistration">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bpRegistration</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeRegistration.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeRegistration</a> <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.123">bpRegistration</a></pre>
</li>
</ul>
<a name="bpThreadQueue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bpThreadQueue</h4>
<pre>final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html?is-external=true" title="class or interface in java.util">LinkedList</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActorAction.html" title="interface in org.apache.hadoop.hdfs.server.datanode">BPServiceActorAction</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.124">bpThreadQueue</a></pre>
</li>
</ul>
<a name="prevBlockReportId">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>prevBlockReportId</h4>
<pre>private&nbsp;long <a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.438">prevBlockReportId</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BPServiceActor(java.net.InetSocketAddress, org.apache.hadoop.hdfs.server.datanode.BPOfferService)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BPServiceActor</h4>
<pre><a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.127">BPServiceActor</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;nnAddr,
              <a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPOfferService.html" title="class in org.apache.hadoop.hdfs.server.datanode">BPOfferService</a>&nbsp;bpos)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="isAlive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAlive</h4>
<pre>boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.134">isAlive</a>()</pre>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.143">toString</a>()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="getNNSocketAddress()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNNSocketAddress</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.147">getNNSocketAddress</a>()</pre>
</li>
</ul>
<a name="setNameNode(org.apache.hadoop.hdfs.protocolPB.DatanodeProtocolClientSideTranslatorPB)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNameNode</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.155">setNameNode</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocolPB/DatanodeProtocolClientSideTranslatorPB.html" title="class in org.apache.hadoop.hdfs.protocolPB">DatanodeProtocolClientSideTranslatorPB</a>&nbsp;dnProtocol)</pre>
<div class="block">Used to inject a spy NN in the unit tests.</div>
</li>
</ul>
<a name="getNameNodeProxy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNameNodeProxy</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/protocolPB/DatanodeProtocolClientSideTranslatorPB.html" title="class in org.apache.hadoop.hdfs.protocolPB">DatanodeProtocolClientSideTranslatorPB</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.160">getNameNodeProxy</a>()</pre>
</li>
</ul>
<a name="retrieveNamespaceInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrieveNamespaceInfo</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.173">retrieveNamespaceInfo</a>()
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Perform the first part of the handshake with the NameNode.
 This calls <code>versionRequest</code> to determine the NN's
 namespace and version info. It automatically retries until
 the NN responds or the DN is shutting down.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the NamespaceInfo</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="checkNNVersion(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkNNVersion</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.198">checkNNVersion</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)
                     throws <a href="../../../../../../org/apache/hadoop/hdfs/server/common/IncorrectVersionException.html" title="class in org.apache.hadoop.hdfs.server.common">IncorrectVersionException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/IncorrectVersionException.html" title="class in org.apache.hadoop.hdfs.server.common">IncorrectVersionException</a></code></dd></dl>
</li>
</ul>
<a name="connectToNNAndHandshake()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectToNNAndHandshake</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.217">connectToNNAndHandshake</a>()
                              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="scheduleHeartbeat()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleHeartbeat</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.242">scheduleHeartbeat</a>()</pre>
</li>
</ul>
<a name="scheduleBlockReport(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleBlockReport</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.250">scheduleBlockReport</a>(long&nbsp;delay)</pre>
<div class="block">This methods  arranges for the data node to send the block report at 
 the next heartbeat.</div>
</li>
</ul>
<a name="reportReceivedDeletedBlocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reportReceivedDeletedBlocks</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.267">reportReceivedDeletedBlocks</a>()
                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Report received blocks and delete hints to the Namenode for each
 storage.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getIncrementalBRMapForStorage(org.apache.hadoop.hdfs.server.protocol.DatanodeStorage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIncrementalBRMapForStorage</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.PerStoragePendingIncrementalBR.html" title="class in org.apache.hadoop.hdfs.server.datanode">BPServiceActor.PerStoragePendingIncrementalBR</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.321">getIncrementalBRMapForStorage</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>&nbsp;storage)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>pending incremental block report for given <code>storage</code></dd></dl>
</li>
</ul>
<a name="addPendingReplicationBlockInfo(org.apache.hadoop.hdfs.server.protocol.ReceivedDeletedBlockInfo, org.apache.hadoop.hdfs.server.protocol.DatanodeStorage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addPendingReplicationBlockInfo</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.343">addPendingReplicationBlockInfo</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/ReceivedDeletedBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReceivedDeletedBlockInfo</a>&nbsp;bInfo,
                                  <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeStorage.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeStorage</a>&nbsp;storage)</pre>
<div class="block">Add a blockInfo for notification to NameNode. If another entry
 exists for the same block it is removed.

 Caller must synchronize access using pendingIncrementalBRperStorage.</div>
</li>
</ul>
<a name="notifyNamenodeBlock(org.apache.hadoop.hdfs.server.protocol.ReceivedDeletedBlockInfo, java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyNamenodeBlock</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.361">notifyNamenodeBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/ReceivedDeletedBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReceivedDeletedBlockInfo</a>&nbsp;bInfo,
                       <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageUuid,
                       boolean&nbsp;now)</pre>
</li>
</ul>
<a name="notifyNamenodeDeletedBlock(org.apache.hadoop.hdfs.server.protocol.ReceivedDeletedBlockInfo, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyNamenodeDeletedBlock</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.375">notifyNamenodeDeletedBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/ReceivedDeletedBlockInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">ReceivedDeletedBlockInfo</a>&nbsp;bInfo,
                              <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;storageUuid)</pre>
</li>
</ul>
<a name="triggerBlockReportForTests()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerBlockReportForTests</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.387">triggerBlockReportForTests</a>()</pre>
<div class="block">Run an immediate block report on this thread. Used by tests.</div>
</li>
</ul>
<a name="triggerHeartbeatForTests()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerHeartbeatForTests</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.403">triggerHeartbeatForTests</a>()</pre>
</li>
</ul>
<a name="triggerDeletionReportForTests()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerDeletionReportForTests</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.418">triggerDeletionReportForTests</a>()</pre>
</li>
</ul>
<a name="hasPendingIBR()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasPendingIBR</h4>
<pre>boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.434">hasPendingIBR</a>()</pre>
</li>
</ul>
<a name="generateUniqueBlockReportId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateUniqueBlockReportId</h4>
<pre>private&nbsp;long&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.440">generateUniqueBlockReportId</a>()</pre>
</li>
</ul>
<a name="blockReport()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blockReport</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeCommand</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.454">blockReport</a>()
                            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Report the list blocks to the Namenode</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>DatanodeCommands returned by the NN. May be null.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="scheduleNextBlockReport(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleNextBlockReport</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.543">scheduleNextBlockReport</a>(long&nbsp;previousReportStartTime)</pre>
</li>
</ul>
<a name="cacheReport()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheReport</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeCommand</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.562">cacheReport</a>()
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="sendHeartBeat()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendHeartBeat</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/HeartbeatResponse.html" title="class in org.apache.hadoop.hdfs.server.protocol">HeartbeatResponse</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.592">sendHeartBeat</a>()
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.615">start</a>()</pre>
</li>
</ul>
<a name="formatThreadName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>formatThreadName</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.625">formatThreadName</a>()</pre>
</li>
</ul>
<a name="stop()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.633">stop</a>()</pre>
</li>
</ul>
<a name="join()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>join</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.641">join</a>()</pre>
</li>
</ul>
<a name="cleanUp()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanUp</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.650">cleanUp</a>()</pre>
</li>
</ul>
<a name="handleRollingUpgradeStatus(org.apache.hadoop.hdfs.server.protocol.HeartbeatResponse)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleRollingUpgradeStatus</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.657">handleRollingUpgradeStatus</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/HeartbeatResponse.html" title="class in org.apache.hadoop.hdfs.server.protocol">HeartbeatResponse</a>&nbsp;resp)
                                 throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="offerService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>offerService</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.675">offerService</a>()
                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Main loop for each BP thread. Run until shutdown,
 forever calling remote NameNode functions.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd></dl>
</li>
</ul>
<a name="register(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>register</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.795">register</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)
        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Register one bp with the corresponding NameNode
 <p>
 The bpDatanode needs to register with the namenode on startup in order
 1) to report which storage it is serving now and 
 2) to receive a registrationID
  
 issued by the namenode to recognize registered datanodes.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>nsInfo</code> - current NamespaceInfo</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.html#registerDatanode(org.apache.hadoop.hdfs.server.protocol.DatanodeRegistration)"><code>FSNamesystem.registerDatanode(DatanodeRegistration)</code></a></dd></dl>
</li>
</ul>
<a name="sleepAndLogInterrupts(int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sleepAndLogInterrupts</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.826">sleepAndLogInterrupts</a>(int&nbsp;millis,
                         <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stateString)</pre>
</li>
</ul>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.844">run</a>()</pre>
<div class="block">No matter what kind of exception we get, keep retrying to offerService().
 That's the loop that connects to the NameNode and provides basic DataNode
 functionality.

 Only stop when "shouldRun" or "shouldServiceRun" is turned off, which can
 happen either at shutdown or due to refreshNamenodes.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true#run()" title="class or interface in java.lang">run</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a></code></dd>
</dl>
</li>
</ul>
<a name="shouldRetryInit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldRetryInit</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.890">shouldRetryInit</a>()</pre>
</li>
</ul>
<a name="shouldRun()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldRun</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.894">shouldRun</a>()</pre>
</li>
</ul>
<a name="processCommand(org.apache.hadoop.hdfs.server.protocol.DatanodeCommand[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processCommand</h4>
<pre>boolean&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.904">processCommand</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/DatanodeCommand.html" title="class in org.apache.hadoop.hdfs.server.protocol">DatanodeCommand</a>[]&nbsp;cmds)</pre>
<div class="block">Process an array of datanode commands</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cmds</code> - an array of datanode commands</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if further processing may be required or false otherwise.</dd></dl>
</li>
</ul>
<a name="reportRemoteBadBlock(org.apache.hadoop.hdfs.protocol.DatanodeInfo, org.apache.hadoop.hdfs.protocol.ExtendedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reportRemoteBadBlock</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.923">reportRemoteBadBlock</a>(<a href="../../../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;dnInfo,
                        <a href="../../../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Report a bad block from another DN in this cluster.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="reRegister()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reRegister</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.930">reRegister</a>()
          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="triggerBlockReport(org.apache.hadoop.hdfs.client.BlockReportOptions)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>triggerBlockReport</h4>
<pre>void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.1005">triggerBlockReport</a>(<a href="../../../../../../org/apache/hadoop/hdfs/client/BlockReportOptions.html" title="class in org.apache.hadoop.hdfs.client">BlockReportOptions</a>&nbsp;options)
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="bpThreadEnqueue(org.apache.hadoop.hdfs.server.datanode.BPServiceActorAction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bpThreadEnqueue</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.1021">bpThreadEnqueue</a>(<a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActorAction.html" title="interface in org.apache.hadoop.hdfs.server.datanode">BPServiceActorAction</a>&nbsp;action)</pre>
</li>
</ul>
<a name="processQueueMessages()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>processQueueMessages</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html#line.1029">processQueueMessages</a>()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BPServiceActor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPOfferService.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/server/datanode/BPServiceActor.PerStoragePendingIncrementalBR.html" title="class in org.apache.hadoop.hdfs.server.datanode"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/server/datanode/BPServiceActor.html" target="_top">Frames</a></li>
<li><a href="BPServiceActor.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
