<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:40:13 EDT 2015 -->
<title>IPCLoggerChannel</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="IPCLoggerChannel";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IPCLoggerChannel.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLoggerSet.html" title="class in org.apache.hadoop.hdfs.qjournal.client"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannelMetrics.html" title="class in org.apache.hadoop.hdfs.qjournal.client"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html" target="_top">Frames</a></li>
<li><a href="IPCLoggerChannel.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.qjournal.client</div>
<h2 title="Class IPCLoggerChannel" class="title">Class IPCLoggerChannel</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.qjournal.client.IPCLoggerChannel</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
public class <span class="strong">IPCLoggerChannel</span>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></pre>
<div class="block">Channel to a remote JournalNode using Hadoop IPC.
 All of the calls are run on a separate thread, and return
 <code>ListenableFuture</code> instances to wait for their result.
 This allows calls to be bound together using the <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumCall.html" title="class in org.apache.hadoop.hdfs.qjournal.client"><code>QuorumCall</code></a>
 class.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_org.apache.hadoop.hdfs.qjournal.client.AsyncLogger">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;org.apache.hadoop.hdfs.qjournal.client.<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.Factory.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger.Factory</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#addr">addr</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#committedTxId">committedTxId</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.hadoop.conf.Configuration</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#conf">conf</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#epoch">epoch</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.Factory.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger.Factory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#FACTORY">FACTORY</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#HEARTBEAT_INTERVAL_MILLIS">HEARTBEAT_INTERVAL_MILLIS</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#highestAckedTxId">highestAckedTxId</a></strong></code>
<div class="block">The highest txid that has been successfully logged on the remote JN.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#httpServerURL">httpServerURL</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#ipcSerial">ipcSerial</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#journalId">journalId</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#lastAckNanos">lastAckNanos</a></strong></code>
<div class="block">Nanotime of the last time we successfully journaled some edits
 to the remote node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#lastCommitNanos">lastCommitNanos</a></strong></code>
<div class="block">Nanotime of the last time that committedTxId was update.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.hadoop.util.StopWatch</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#lastHeartbeatStopwatch">lastHeartbeatStopwatch</a></strong></code>
<div class="block">Stopwatch which starts counting on each heartbeat that is sent</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannelMetrics.html" title="class in org.apache.hadoop.hdfs.qjournal.client">IPCLoggerChannelMetrics</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#metrics">metrics</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#nsInfo">nsInfo</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#outOfSync">outOfSync</a></strong></code>
<div class="block">If this logger misses some edits, or restarts in the middle of
 a segment, the writer won't be able to write any more edits until
 the beginning of the next segment.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private com.google.common.util.concurrent.ListeningExecutorService</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#parallelExecutor">parallelExecutor</a></strong></code>
<div class="block">Executes tasks submitted to it in parallel with each other and with those
 submitted to singleThreadExecutor (generally used for read tasks that can
 be safely reordered and interleaved with writes).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/protocol/QJournalProtocol.html" title="interface in org.apache.hadoop.hdfs.qjournal.protocol">QJournalProtocol</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#proxy">proxy</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#queuedEditsSizeBytes">queuedEditsSizeBytes</a></strong></code>
<div class="block">The number of bytes of edits data still in the queue.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#queueSizeLimitBytes">queueSizeLimitBytes</a></strong></code>
<div class="block">The maximum number of bytes that can be pending in the queue.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private com.google.common.util.concurrent.ListeningExecutorService</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#singleThreadExecutor">singleThreadExecutor</a></strong></code>
<div class="block">Executes tasks submitted to it serially, on a single thread, in FIFO order
 (generally used for write tasks that should not be reordered).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#WARN_JOURNAL_MILLIS_THRESHOLD">WARN_JOURNAL_MILLIS_THRESHOLD</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#IPCLoggerChannel(org.apache.hadoop.conf.Configuration,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo,%20java.lang.String,%20java.net.InetSocketAddress)">IPCLoggerChannel</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;journalId,
                <a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;addr)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#acceptRecovery(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.SegmentStateProto,%20java.net.URL)">acceptRecovery</a></strong>(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.SegmentStateProto&nbsp;log,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</a>&nbsp;url)</code>
<div class="block">Accept a recovery proposal.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#appendReport(java.lang.StringBuilder)">appendReport</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html?is-external=true" title="class or interface in java.lang">StringBuilder</a>&nbsp;sb)</code>
<div class="block">Append an HTML-formatted report for this logger's status to the provided
 StringBuilder.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#buildURLToFetchLogs(long)">buildURLToFetchLogs</a></strong>(long&nbsp;segmentTxId)</code>
<div class="block">Build an HTTP URL to fetch the log segment with the given startTxId.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#canRollBack(org.apache.hadoop.hdfs.server.common.StorageInfo,%20org.apache.hadoop.hdfs.server.common.StorageInfo,%20int)">canRollBack</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;storage,
           <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;prevStorage,
           int&nbsp;targetLayoutVersion)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#close()">close</a></strong>()</code>
<div class="block">Tear down any resources, connections, etc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#constructHttpServerURI(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.GetEditLogManifestResponseProto)">constructHttpServerURI</a></strong>(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.GetEditLogManifestResponseProto&nbsp;ret)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#constructHttpServerURI(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.GetJournalStateResponseProto)">constructHttpServerURI</a></strong>(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.GetJournalStateResponseProto&nbsp;ret)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#createParallelExecutor()">createParallelExecutor</a></strong>()</code>
<div class="block">Separated out for easy overriding in tests.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/protocol/QJournalProtocol.html" title="interface in org.apache.hadoop.hdfs.qjournal.protocol">QJournalProtocol</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#createProxy()">createProxy</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/protocol/RequestInfo.html" title="class in org.apache.hadoop.hdfs.qjournal.protocol">RequestInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#createReqInfo()">createReqInfo</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#createSingleThreadExecutor()">createSingleThreadExecutor</a></strong>()</code>
<div class="block">Separated out for easy overriding in tests.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#discardSegments(long)">discardSegments</a></strong>(long&nbsp;startTxId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#doFinalize()">doFinalize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#doPreUpgrade()">doPreUpgrade</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#doRollback()">doRollback</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#doUpgrade(org.apache.hadoop.hdfs.server.common.StorageInfo)">doUpgrade</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;sInfo)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#finalizeLogSegment(long,%20long)">finalizeLogSegment</a></strong>(long&nbsp;startTxId,
                  long&nbsp;endTxId)</code>
<div class="block">Finalize a log segment.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">format</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)</code>
<div class="block">Format the log directory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/RemoteEditLogManifest.html" title="class in org.apache.hadoop.hdfs.server.protocol">RemoteEditLogManifest</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#getEditLogManifest(long,%20boolean)">getEditLogManifest</a></strong>(long&nbsp;fromTxnId,
                  boolean&nbsp;inProgressOk)</code>
<div class="block">Fetch the list of edit logs available on the remote node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#getHttpServerURI(java.lang.String,%20int)">getHttpServerURI</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;scheme,
                int&nbsp;port)</code>
<div class="block">Construct the http server based on the response.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#getJournalCTime()">getJournalCTime</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.GetJournalStateResponseProto&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#getJournalState()">getJournalState</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#getLagTimeMillis()">getLagTimeMillis</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#getLagTxns()">getLagTxns</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#getNextIpcSerial()">getNextIpcSerial</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/protocol/QJournalProtocol.html" title="interface in org.apache.hadoop.hdfs.qjournal.protocol">QJournalProtocol</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#getProxy()">getProxy</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#getQueuedEditsSize()">getQueuedEditsSize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#getRemoteAddress()">getRemoteAddress</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#hasHttpServerEndPoint()">hasHttpServerEndPoint</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#heartbeatIfNecessary()">heartbeatIfNecessary</a></strong>()</code>
<div class="block">When we've entered an out-of-sync state, it's still useful to periodically
 send an empty RPC to the server, such that it has the up to date
 committedTxId.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#isFormatted()">isFormatted</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#isOutOfSync()">isOutOfSync</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.NewEpochResponseProto&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#newEpoch(long)">newEpoch</a></strong>(long&nbsp;epoch)</code>
<div class="block">Begin a new epoch on the target node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.PrepareRecoveryResponseProto&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#prepareRecovery(long)">prepareRecovery</a></strong>(long&nbsp;segmentTxId)</code>
<div class="block">Prepare recovery.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#purgeLogsOlderThan(long)">purgeLogsOlderThan</a></strong>(long&nbsp;minTxIdToKeep)</code>
<div class="block">Allow the remote node to purge edit logs earlier than this.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#reserveQueueSpace(int)">reserveQueueSpace</a></strong>(int&nbsp;size)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#sendEdits(long,%20long,%20int,%20byte[])">sendEdits</a></strong>(long&nbsp;segmentTxId,
         long&nbsp;firstTxnId,
         int&nbsp;numTxns,
         byte[]&nbsp;data)</code>
<div class="block">Send a batch of edits to the logger.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#setCommittedTxId(long)">setCommittedTxId</a></strong>(long&nbsp;txid)</code>
<div class="block">Let the logger know the highest committed txid across all loggers in the
 set.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#setEpoch(long)">setEpoch</a></strong>(long&nbsp;epoch)</code>
<div class="block">Set the epoch number used for all future calls.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#startLogSegment(long,%20int)">startLogSegment</a></strong>(long&nbsp;txid,
               int&nbsp;layoutVersion)</code>
<div class="block">Begin writing a new log segment.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#throwIfOutOfSync()">throwIfOutOfSync</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#unreserveQueueSpace(int)">unreserveQueueSpace</a></strong>(int&nbsp;size)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html#waitForAllPendingCalls()">waitForAllPendingCalls</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="conf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conf</h4>
<pre>private final&nbsp;org.apache.hadoop.conf.Configuration conf</pre>
</li>
</ul>
<a name="addr">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addr</h4>
<pre>protected final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a> addr</pre>
</li>
</ul>
<a name="proxy">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>proxy</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/protocol/QJournalProtocol.html" title="interface in org.apache.hadoop.hdfs.qjournal.protocol">QJournalProtocol</a> proxy</pre>
</li>
</ul>
<a name="singleThreadExecutor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>singleThreadExecutor</h4>
<pre>private final&nbsp;com.google.common.util.concurrent.ListeningExecutorService singleThreadExecutor</pre>
<div class="block">Executes tasks submitted to it serially, on a single thread, in FIFO order
 (generally used for write tasks that should not be reordered).</div>
</li>
</ul>
<a name="parallelExecutor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parallelExecutor</h4>
<pre>private final&nbsp;com.google.common.util.concurrent.ListeningExecutorService parallelExecutor</pre>
<div class="block">Executes tasks submitted to it in parallel with each other and with those
 submitted to singleThreadExecutor (generally used for read tasks that can
 be safely reordered and interleaved with writes).</div>
</li>
</ul>
<a name="ipcSerial">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ipcSerial</h4>
<pre>private&nbsp;long ipcSerial</pre>
</li>
</ul>
<a name="epoch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>epoch</h4>
<pre>private&nbsp;long epoch</pre>
</li>
</ul>
<a name="committedTxId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>committedTxId</h4>
<pre>private&nbsp;long committedTxId</pre>
</li>
</ul>
<a name="journalId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>journalId</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> journalId</pre>
</li>
</ul>
<a name="nsInfo">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nsInfo</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a> nsInfo</pre>
</li>
</ul>
<a name="httpServerURL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>httpServerURL</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</a> httpServerURL</pre>
</li>
</ul>
<a name="metrics">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>metrics</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannelMetrics.html" title="class in org.apache.hadoop.hdfs.qjournal.client">IPCLoggerChannelMetrics</a> metrics</pre>
</li>
</ul>
<a name="queuedEditsSizeBytes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queuedEditsSizeBytes</h4>
<pre>private&nbsp;int queuedEditsSizeBytes</pre>
<div class="block">The number of bytes of edits data still in the queue.</div>
</li>
</ul>
<a name="highestAckedTxId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>highestAckedTxId</h4>
<pre>private&nbsp;long highestAckedTxId</pre>
<div class="block">The highest txid that has been successfully logged on the remote JN.</div>
</li>
</ul>
<a name="lastAckNanos">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastAckNanos</h4>
<pre>private&nbsp;long lastAckNanos</pre>
<div class="block">Nanotime of the last time we successfully journaled some edits
 to the remote node.</div>
</li>
</ul>
<a name="lastCommitNanos">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastCommitNanos</h4>
<pre>private&nbsp;long lastCommitNanos</pre>
<div class="block">Nanotime of the last time that committedTxId was update. Used
 to calculate the lag in terms of time, rather than just a number
 of txns.</div>
</li>
</ul>
<a name="queueSizeLimitBytes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queueSizeLimitBytes</h4>
<pre>private final&nbsp;int queueSizeLimitBytes</pre>
<div class="block">The maximum number of bytes that can be pending in the queue.
 This keeps the writer from hitting OOME if one of the loggers
 starts responding really slowly. Eventually, the queue
 overflows and it starts to treat the logger as having errored.</div>
</li>
</ul>
<a name="outOfSync">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outOfSync</h4>
<pre>private&nbsp;boolean outOfSync</pre>
<div class="block">If this logger misses some edits, or restarts in the middle of
 a segment, the writer won't be able to write any more edits until
 the beginning of the next segment. Upon detecting this situation,
 the writer sets this flag to true to avoid sending useless RPCs.</div>
</li>
</ul>
<a name="lastHeartbeatStopwatch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastHeartbeatStopwatch</h4>
<pre>private final&nbsp;org.apache.hadoop.util.StopWatch lastHeartbeatStopwatch</pre>
<div class="block">Stopwatch which starts counting on each heartbeat that is sent</div>
</li>
</ul>
<a name="HEARTBEAT_INTERVAL_MILLIS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HEARTBEAT_INTERVAL_MILLIS</h4>
<pre>private static final&nbsp;long HEARTBEAT_INTERVAL_MILLIS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.IPCLoggerChannel.HEARTBEAT_INTERVAL_MILLIS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="WARN_JOURNAL_MILLIS_THRESHOLD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WARN_JOURNAL_MILLIS_THRESHOLD</h4>
<pre>private static final&nbsp;long WARN_JOURNAL_MILLIS_THRESHOLD</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.IPCLoggerChannel.WARN_JOURNAL_MILLIS_THRESHOLD">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FACTORY">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FACTORY</h4>
<pre>static final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.Factory.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger.Factory</a> FACTORY</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="IPCLoggerChannel(org.apache.hadoop.conf.Configuration, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo, java.lang.String, java.net.InetSocketAddress)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>IPCLoggerChannel</h4>
<pre>public&nbsp;IPCLoggerChannel(org.apache.hadoop.conf.Configuration&nbsp;conf,
                <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;journalId,
                <a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;addr)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setEpoch(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEpoch</h4>
<pre>public&nbsp;void&nbsp;setEpoch(long&nbsp;epoch)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#setEpoch(long)">AsyncLogger</a></code></strong></div>
<div class="block">Set the epoch number used for all future calls.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#setEpoch(long)">setEpoch</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="setCommittedTxId(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCommittedTxId</h4>
<pre>public&nbsp;void&nbsp;setCommittedTxId(long&nbsp;txid)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#setCommittedTxId(long)">AsyncLogger</a></code></strong></div>
<div class="block">Let the logger know the highest committed txid across all loggers in the
 set. This txid may be higher than the last committed txid for <em>this</em>
 logger. See HDFS-3863 for details.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#setCommittedTxId(long)">setCommittedTxId</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#close()">AsyncLogger</a></code></strong></div>
<div class="block">Tear down any resources, connections, etc. The proxy may not be used
 after this point, and any in-flight RPCs may throw an exception.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="getProxy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProxy</h4>
<pre>protected&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/protocol/QJournalProtocol.html" title="interface in org.apache.hadoop.hdfs.qjournal.protocol">QJournalProtocol</a>&nbsp;getProxy()
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createProxy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createProxy</h4>
<pre>protected&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/protocol/QJournalProtocol.html" title="interface in org.apache.hadoop.hdfs.qjournal.protocol">QJournalProtocol</a>&nbsp;createProxy()
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createSingleThreadExecutor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createSingleThreadExecutor</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a>&nbsp;createSingleThreadExecutor()</pre>
<div class="block">Separated out for easy overriding in tests.</div>
</li>
</ul>
<a name="createParallelExecutor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createParallelExecutor</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a>&nbsp;createParallelExecutor()</pre>
<div class="block">Separated out for easy overriding in tests.</div>
</li>
</ul>
<a name="buildURLToFetchLogs(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildURLToFetchLogs</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</a>&nbsp;buildURLToFetchLogs(long&nbsp;segmentTxId)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#buildURLToFetchLogs(long)">AsyncLogger</a></code></strong></div>
<div class="block">Build an HTTP URL to fetch the log segment with the given startTxId.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#buildURLToFetchLogs(long)">buildURLToFetchLogs</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="createReqInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createReqInfo</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/protocol/RequestInfo.html" title="class in org.apache.hadoop.hdfs.qjournal.protocol">RequestInfo</a>&nbsp;createReqInfo()</pre>
</li>
</ul>
<a name="getNextIpcSerial()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextIpcSerial</h4>
<pre>long&nbsp;getNextIpcSerial()</pre>
</li>
</ul>
<a name="getQueuedEditsSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQueuedEditsSize</h4>
<pre>public&nbsp;int&nbsp;getQueuedEditsSize()</pre>
</li>
</ul>
<a name="getRemoteAddress()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemoteAddress</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;getRemoteAddress()</pre>
</li>
</ul>
<a name="isOutOfSync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOutOfSync</h4>
<pre>public&nbsp;boolean&nbsp;isOutOfSync()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the server has gotten out of sync from the client,
 and thus a log roll is required for this logger to successfully start
 logging more edits.</dd></dl>
</li>
</ul>
<a name="waitForAllPendingCalls()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForAllPendingCalls</h4>
<pre>void&nbsp;waitForAllPendingCalls()
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="isFormatted()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFormatted</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&gt;&nbsp;isFormatted()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#isFormatted()">isFormatted</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>whether or not the remote node has any valid data.</dd></dl>
</li>
</ul>
<a name="getJournalState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJournalState</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.GetJournalStateResponseProto&gt;&nbsp;getJournalState()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#getJournalState()">getJournalState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the state of the last epoch on the target node.</dd></dl>
</li>
</ul>
<a name="newEpoch(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newEpoch</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.NewEpochResponseProto&gt;&nbsp;newEpoch(long&nbsp;epoch)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#newEpoch(long)">AsyncLogger</a></code></strong></div>
<div class="block">Begin a new epoch on the target node.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#newEpoch(long)">newEpoch</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="sendEdits(long, long, int, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendEdits</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;sendEdits(long&nbsp;segmentTxId,
                                                                 long&nbsp;firstTxnId,
                                                                 int&nbsp;numTxns,
                                                                 byte[]&nbsp;data)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#sendEdits(long,%20long,%20int,%20byte[])">AsyncLogger</a></code></strong></div>
<div class="block">Send a batch of edits to the logger.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#sendEdits(long,%20long,%20int,%20byte[])">sendEdits</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>segmentTxId</code> - the first txid in the current segment</dd><dd><code>firstTxnId</code> - the first txid of the edits.</dd><dd><code>numTxns</code> - the number of transactions in the batch</dd><dd><code>data</code> - the actual data to be sent</dd></dl>
</li>
</ul>
<a name="throwIfOutOfSync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>throwIfOutOfSync</h4>
<pre>private&nbsp;void&nbsp;throwIfOutOfSync()
                       throws <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/protocol/JournalOutOfSyncException.html" title="class in org.apache.hadoop.hdfs.qjournal.protocol">JournalOutOfSyncException</a>,
                              <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/protocol/JournalOutOfSyncException.html" title="class in org.apache.hadoop.hdfs.qjournal.protocol">JournalOutOfSyncException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="heartbeatIfNecessary()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heartbeatIfNecessary</h4>
<pre>private&nbsp;void&nbsp;heartbeatIfNecessary()
                           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">When we've entered an out-of-sync state, it's still useful to periodically
 send an empty RPC to the server, such that it has the up to date
 committedTxId. This acts as a sanity check during recovery, and also allows
 that node's metrics to be up-to-date about its lag.
 
 In the future, this method may also be used in order to check that the
 current node is still the current writer, even if no edits are being
 written.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="reserveQueueSpace(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reserveQueueSpace</h4>
<pre>private&nbsp;void&nbsp;reserveQueueSpace(int&nbsp;size)
                        throws <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/LoggerTooFarBehindException.html" title="class in org.apache.hadoop.hdfs.qjournal.client">LoggerTooFarBehindException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/LoggerTooFarBehindException.html" title="class in org.apache.hadoop.hdfs.qjournal.client">LoggerTooFarBehindException</a></code></dd></dl>
</li>
</ul>
<a name="unreserveQueueSpace(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unreserveQueueSpace</h4>
<pre>private&nbsp;void&nbsp;unreserveQueueSpace(int&nbsp;size)</pre>
</li>
</ul>
<a name="format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>format</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;format(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">AsyncLogger</a></code></strong></div>
<div class="block">Format the log directory.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">format</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>nsInfo</code> - the namespace info to format with</dd></dl>
</li>
</ul>
<a name="startLogSegment(long, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startLogSegment</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;startLogSegment(long&nbsp;txid,
                                                                       int&nbsp;layoutVersion)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#startLogSegment(long,%20int)">AsyncLogger</a></code></strong></div>
<div class="block">Begin writing a new log segment.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#startLogSegment(long,%20int)">startLogSegment</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>txid</code> - the first txid to be written to the new log</dd><dd><code>layoutVersion</code> - the LayoutVersion of the log</dd></dl>
</li>
</ul>
<a name="finalizeLogSegment(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeLogSegment</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;finalizeLogSegment(long&nbsp;startTxId,
                                                                          long&nbsp;endTxId)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#finalizeLogSegment(long,%20long)">AsyncLogger</a></code></strong></div>
<div class="block">Finalize a log segment.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#finalizeLogSegment(long,%20long)">finalizeLogSegment</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>startTxId</code> - the first txid that was written to the segment</dd><dd><code>endTxId</code> - the last txid that was written to the segment</dd></dl>
</li>
</ul>
<a name="purgeLogsOlderThan(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeLogsOlderThan</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;purgeLogsOlderThan(long&nbsp;minTxIdToKeep)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#purgeLogsOlderThan(long)">AsyncLogger</a></code></strong></div>
<div class="block">Allow the remote node to purge edit logs earlier than this.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#purgeLogsOlderThan(long)">purgeLogsOlderThan</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>minTxIdToKeep</code> - the min txid which must be retained</dd></dl>
</li>
</ul>
<a name="getEditLogManifest(long, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEditLogManifest</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/RemoteEditLogManifest.html" title="class in org.apache.hadoop.hdfs.server.protocol">RemoteEditLogManifest</a>&gt;&nbsp;getEditLogManifest(long&nbsp;fromTxnId,
                                                                                           boolean&nbsp;inProgressOk)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#getEditLogManifest(long,%20boolean)">AsyncLogger</a></code></strong></div>
<div class="block">Fetch the list of edit logs available on the remote node.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#getEditLogManifest(long,%20boolean)">getEditLogManifest</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="prepareRecovery(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareRecovery</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.PrepareRecoveryResponseProto&gt;&nbsp;prepareRecovery(long&nbsp;segmentTxId)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#prepareRecovery(long)">AsyncLogger</a></code></strong></div>
<div class="block">Prepare recovery. See the HDFS-3077 design document for details.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#prepareRecovery(long)">prepareRecovery</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="acceptRecovery(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.SegmentStateProto, java.net.URL)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acceptRecovery</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;acceptRecovery(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.SegmentStateProto&nbsp;log,
                                                                      <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</a>&nbsp;url)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#acceptRecovery(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.SegmentStateProto,%20java.net.URL)">AsyncLogger</a></code></strong></div>
<div class="block">Accept a recovery proposal. See the HDFS-3077 design document for details.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#acceptRecovery(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.SegmentStateProto,%20java.net.URL)">acceptRecovery</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="discardSegments(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>discardSegments</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;discardSegments(long&nbsp;startTxId)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#discardSegments(long)">discardSegments</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="doPreUpgrade()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doPreUpgrade</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;doPreUpgrade()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#doPreUpgrade()">doPreUpgrade</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="doUpgrade(org.apache.hadoop.hdfs.server.common.StorageInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doUpgrade</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;doUpgrade(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;sInfo)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#doUpgrade(org.apache.hadoop.hdfs.server.common.StorageInfo)">doUpgrade</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="doFinalize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doFinalize</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;doFinalize()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#doFinalize()">doFinalize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="canRollBack(org.apache.hadoop.hdfs.server.common.StorageInfo, org.apache.hadoop.hdfs.server.common.StorageInfo, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canRollBack</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&gt;&nbsp;canRollBack(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;storage,
                                                                      <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;prevStorage,
                                                                      int&nbsp;targetLayoutVersion)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#canRollBack(org.apache.hadoop.hdfs.server.common.StorageInfo,%20org.apache.hadoop.hdfs.server.common.StorageInfo,%20int)">canRollBack</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="doRollback()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doRollback</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;doRollback()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#doRollback()">doRollback</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="getJournalCTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJournalCTime</h4>
<pre>public&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;getJournalCTime()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#getJournalCTime()">getJournalCTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="appendReport(java.lang.StringBuilder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendReport</h4>
<pre>public&nbsp;void&nbsp;appendReport(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html?is-external=true" title="class or interface in java.lang">StringBuilder</a>&nbsp;sb)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#appendReport(java.lang.StringBuilder)">AsyncLogger</a></code></strong></div>
<div class="block">Append an HTML-formatted report for this logger's status to the provided
 StringBuilder. This is displayed on the NN web UI.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html#appendReport(java.lang.StringBuilder)">appendReport</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a></code></dd>
</dl>
</li>
</ul>
<a name="getLagTxns()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLagTxns</h4>
<pre>public&nbsp;long&nbsp;getLagTxns()</pre>
</li>
</ul>
<a name="getLagTimeMillis()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLagTimeMillis</h4>
<pre>public&nbsp;long&nbsp;getLagTimeMillis()</pre>
</li>
</ul>
<a name="constructHttpServerURI(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.GetEditLogManifestResponseProto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>constructHttpServerURI</h4>
<pre>private&nbsp;void&nbsp;constructHttpServerURI(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.GetEditLogManifestResponseProto&nbsp;ret)</pre>
</li>
</ul>
<a name="constructHttpServerURI(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.GetJournalStateResponseProto)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>constructHttpServerURI</h4>
<pre>private&nbsp;void&nbsp;constructHttpServerURI(org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.GetJournalStateResponseProto&nbsp;ret)</pre>
</li>
</ul>
<a name="getHttpServerURI(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHttpServerURI</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</a>&nbsp;getHttpServerURI(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;scheme,
                   int&nbsp;port)</pre>
<div class="block">Construct the http server based on the response.

 The fromURL field in the response specifies the endpoint of the http
 server. However, the address might not be accurate since the server can
 bind to multiple interfaces. Here the client plugs in the address specified
 in the configuration and generates the URI.</div>
</li>
</ul>
<a name="hasHttpServerEndPoint()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>hasHttpServerEndPoint</h4>
<pre>private&nbsp;boolean&nbsp;hasHttpServerEndPoint()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IPCLoggerChannel.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLoggerSet.html" title="class in org.apache.hadoop.hdfs.qjournal.client"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannelMetrics.html" title="class in org.apache.hadoop.hdfs.qjournal.client"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/qjournal/client/IPCLoggerChannel.html" target="_top">Frames</a></li>
<li><a href="IPCLoggerChannel.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
