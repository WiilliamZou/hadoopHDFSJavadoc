<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:40:13 EDT 2015 -->
<title>QuorumJournalManager</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="QuorumJournalManager";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/QuorumJournalManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumException.html" title="class in org.apache.hadoop.hdfs.qjournal.client"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumOutputStream.html" title="class in org.apache.hadoop.hdfs.qjournal.client"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html" target="_top">Frames</a></li>
<li><a href="QuorumJournalManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.qjournal.client</div>
<h2 title="Class QuorumJournalManager" class="title">Class QuorumJournalManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.FormatConfirmable.html" title="interface in org.apache.hadoop.hdfs.server.common">Storage.FormatConfirmable</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a>, <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/LogsPurgeable.html" title="interface in org.apache.hadoop.hdfs.server.namenode">LogsPurgeable</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
public class <span class="strong">QuorumJournalManager</span>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></pre>
<div class="block">A JournalManager that writes to a set of remote JournalNodes,
 requiring a quorum of nodes to ack each write.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_org.apache.hadoop.hdfs.server.namenode.JournalManager">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;org.apache.hadoop.hdfs.server.namenode.<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></h3>
<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.CorruptionException.html" title="class in org.apache.hadoop.hdfs.server.namenode">JournalManager.CorruptionException</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#acceptRecoveryTimeoutMs">acceptRecoveryTimeoutMs</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#CAN_ROLL_BACK_TIMEOUT_MS">CAN_ROLL_BACK_TIMEOUT_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.hadoop.conf.Configuration</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#conf">conf</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/web/URLConnectionFactory.html" title="class in org.apache.hadoop.hdfs.web">URLConnectionFactory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#connectionFactory">connectionFactory</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#DISCARD_SEGMENTS_TIMEOUT_MS">DISCARD_SEGMENTS_TIMEOUT_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#FINALIZE_TIMEOUT_MS">FINALIZE_TIMEOUT_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#finalizeSegmentTimeoutMs">finalizeSegmentTimeoutMs</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#FORMAT_TIMEOUT_MS">FORMAT_TIMEOUT_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#GET_JOURNAL_CTIME_TIMEOUT_MS">GET_JOURNAL_CTIME_TIMEOUT_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#getJournalStateTimeoutMs">getJournalStateTimeoutMs</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#HASDATA_TIMEOUT_MS">HASDATA_TIMEOUT_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#isActiveWriter">isActiveWriter</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLoggerSet.html" title="class in org.apache.hadoop.hdfs.qjournal.client">AsyncLoggerSet</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#loggers">loggers</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#newEpochTimeoutMs">newEpochTimeoutMs</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#nsInfo">nsInfo</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#outputBufferCapacity">outputBufferCapacity</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#PRE_UPGRADE_TIMEOUT_MS">PRE_UPGRADE_TIMEOUT_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#prepareRecoveryTimeoutMs">prepareRecoveryTimeoutMs</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#ROLL_BACK_TIMEOUT_MS">ROLL_BACK_TIMEOUT_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#selectInputStreamsTimeoutMs">selectInputStreamsTimeoutMs</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#startSegmentTimeoutMs">startSegmentTimeoutMs</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#UPGRADE_TIMEOUT_MS">UPGRADE_TIMEOUT_MS</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#uri">uri</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#writeTxnsTimeoutMs">writeTxnsTimeoutMs</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#QuorumJournalManager(org.apache.hadoop.conf.Configuration,%20java.net.URI,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">QuorumJournalManager</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#QuorumJournalManager(org.apache.hadoop.conf.Configuration,%20java.net.URI,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo,%20org.apache.hadoop.hdfs.qjournal.client.AsyncLogger.Factory)">QuorumJournalManager</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                    <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.Factory.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger.Factory</a>&nbsp;loggerFactory)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#canRollBack(org.apache.hadoop.hdfs.server.common.StorageInfo,%20org.apache.hadoop.hdfs.server.common.StorageInfo,%20int)">canRollBack</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;storage,
           <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;prevStorage,
           int&nbsp;targetLayoutVersion)</code>
<div class="block">Return true if this JM can roll back to the previous storage state, false
 otherwise.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#checkJournalId(java.lang.String)">checkJournalId</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;jid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#close()">close</a></strong>()</code>
<div class="block">Close the journal manager, freeing any resources it may hold.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#createLoggers(org.apache.hadoop.hdfs.qjournal.client.AsyncLogger.Factory)">createLoggers</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.Factory.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger.Factory</a>&nbsp;factory)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#createLoggers(org.apache.hadoop.conf.Configuration,%20java.net.URI,%20org.apache.hadoop.hdfs.server.protocol.NamespaceInfo,%20org.apache.hadoop.hdfs.qjournal.client.AsyncLogger.Factory)">createLoggers</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf,
             <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri,
             <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
             <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.Factory.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger.Factory</a>&nbsp;factory)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a>,org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.NewEpochResponseProto&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#createNewUniqueEpoch()">createNewUniqueEpoch</a></strong>()</code>
<div class="block">Fence any previous writers, and obtain a unique epoch number
 for write-access to the journal nodes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#discardSegments(long)">discardSegments</a></strong>(long&nbsp;startTxId)</code>
<div class="block">Discard the segments whose first txid is >= the given txid.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#doFinalize()">doFinalize</a></strong>()</code>
<div class="block">Finalize the upgrade.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#doPreUpgrade()">doPreUpgrade</a></strong>()</code>
<div class="block">Perform any steps that must succeed across all JournalManagers involved in
 an upgrade before proceeding onto the actual upgrade stage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#doRollback()">doRollback</a></strong>()</code>
<div class="block">Perform the rollback to the previous FS state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#doUpgrade(org.apache.hadoop.hdfs.server.common.Storage)">doUpgrade</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a>&nbsp;storage)</code>
<div class="block">Perform the actual upgrade of the JM.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#finalizeLogSegment(long,%20long)">finalizeLogSegment</a></strong>(long&nbsp;firstTxId,
                  long&nbsp;lastTxId)</code>
<div class="block">Mark the log segment that spans from firstTxId to lastTxId
 as finalized and complete.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">format</a></strong>(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)</code>
<div class="block">Format the underlying storage, removing any previously
 stored data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#getJournalCTime()">getJournalCTime</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#getLoggerAddresses(java.net.URI)">getLoggerAddresses</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLoggerSet.html" title="class in org.apache.hadoop.hdfs.qjournal.client">AsyncLoggerSet</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#getLoggerSetForTests()">getLoggerSetForTests</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#hasSomeData()">hasSomeData</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#parseJournalId(java.net.URI)">parseJournalId</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#purgeLogsOlderThan(long)">purgeLogsOlderThan</a></strong>(long&nbsp;minTxIdToKeep)</code>
<div class="block">Remove all edit logs with transaction IDs lower than the given transaction
 ID.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#recoverUnclosedSegment(long)">recoverUnclosedSegment</a></strong>(long&nbsp;segmentTxId)</code>
<div class="block">Run recovery/synchronization for a specific segment.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#recoverUnfinalizedSegments()">recoverUnfinalizedSegments</a></strong>()</code>
<div class="block">Recover segments which have not been finalized.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#selectInputStreams(java.util.Collection,%20long,%20boolean)">selectInputStreams</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/EditLogInputStream.html" title="class in org.apache.hadoop.hdfs.server.namenode">EditLogInputStream</a>&gt;&nbsp;streams,
                  long&nbsp;fromTxnId,
                  boolean&nbsp;inProgressOk)</code>
<div class="block">Get a list of edit log input streams.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#setOutputBufferCapacity(int)">setOutputBufferCapacity</a></strong>(int&nbsp;size)</code>
<div class="block">Set the amount of memory that this stream should use to buffer edits</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/EditLogOutputStream.html" title="class in org.apache.hadoop.hdfs.server.namenode">EditLogOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#startLogSegment(long,%20int)">startLogSegment</a></strong>(long&nbsp;txId,
               int&nbsp;layoutVersion)</code>
<div class="block">Begin writing to a new segment of the log stream, which starts at
 the given transaction ID.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>static final&nbsp;org.apache.commons.logging.Log LOG</pre>
</li>
</ul>
<a name="startSegmentTimeoutMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startSegmentTimeoutMs</h4>
<pre>private final&nbsp;int startSegmentTimeoutMs</pre>
</li>
</ul>
<a name="prepareRecoveryTimeoutMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareRecoveryTimeoutMs</h4>
<pre>private final&nbsp;int prepareRecoveryTimeoutMs</pre>
</li>
</ul>
<a name="acceptRecoveryTimeoutMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acceptRecoveryTimeoutMs</h4>
<pre>private final&nbsp;int acceptRecoveryTimeoutMs</pre>
</li>
</ul>
<a name="finalizeSegmentTimeoutMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeSegmentTimeoutMs</h4>
<pre>private final&nbsp;int finalizeSegmentTimeoutMs</pre>
</li>
</ul>
<a name="selectInputStreamsTimeoutMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>selectInputStreamsTimeoutMs</h4>
<pre>private final&nbsp;int selectInputStreamsTimeoutMs</pre>
</li>
</ul>
<a name="getJournalStateTimeoutMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJournalStateTimeoutMs</h4>
<pre>private final&nbsp;int getJournalStateTimeoutMs</pre>
</li>
</ul>
<a name="newEpochTimeoutMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newEpochTimeoutMs</h4>
<pre>private final&nbsp;int newEpochTimeoutMs</pre>
</li>
</ul>
<a name="writeTxnsTimeoutMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeTxnsTimeoutMs</h4>
<pre>private final&nbsp;int writeTxnsTimeoutMs</pre>
</li>
</ul>
<a name="FORMAT_TIMEOUT_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FORMAT_TIMEOUT_MS</h4>
<pre>private static final&nbsp;int FORMAT_TIMEOUT_MS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager.FORMAT_TIMEOUT_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="HASDATA_TIMEOUT_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HASDATA_TIMEOUT_MS</h4>
<pre>private static final&nbsp;int HASDATA_TIMEOUT_MS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager.HASDATA_TIMEOUT_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="CAN_ROLL_BACK_TIMEOUT_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CAN_ROLL_BACK_TIMEOUT_MS</h4>
<pre>private static final&nbsp;int CAN_ROLL_BACK_TIMEOUT_MS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager.CAN_ROLL_BACK_TIMEOUT_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FINALIZE_TIMEOUT_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FINALIZE_TIMEOUT_MS</h4>
<pre>private static final&nbsp;int FINALIZE_TIMEOUT_MS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager.FINALIZE_TIMEOUT_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="PRE_UPGRADE_TIMEOUT_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PRE_UPGRADE_TIMEOUT_MS</h4>
<pre>private static final&nbsp;int PRE_UPGRADE_TIMEOUT_MS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager.PRE_UPGRADE_TIMEOUT_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ROLL_BACK_TIMEOUT_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ROLL_BACK_TIMEOUT_MS</h4>
<pre>private static final&nbsp;int ROLL_BACK_TIMEOUT_MS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager.ROLL_BACK_TIMEOUT_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="UPGRADE_TIMEOUT_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>UPGRADE_TIMEOUT_MS</h4>
<pre>private static final&nbsp;int UPGRADE_TIMEOUT_MS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager.UPGRADE_TIMEOUT_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GET_JOURNAL_CTIME_TIMEOUT_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GET_JOURNAL_CTIME_TIMEOUT_MS</h4>
<pre>private static final&nbsp;int GET_JOURNAL_CTIME_TIMEOUT_MS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager.GET_JOURNAL_CTIME_TIMEOUT_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DISCARD_SEGMENTS_TIMEOUT_MS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DISCARD_SEGMENTS_TIMEOUT_MS</h4>
<pre>private static final&nbsp;int DISCARD_SEGMENTS_TIMEOUT_MS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#org.apache.hadoop.hdfs.qjournal.client.QuorumJournalManager.DISCARD_SEGMENTS_TIMEOUT_MS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="conf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conf</h4>
<pre>private final&nbsp;org.apache.hadoop.conf.Configuration conf</pre>
</li>
</ul>
<a name="uri">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uri</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a> uri</pre>
</li>
</ul>
<a name="nsInfo">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nsInfo</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a> nsInfo</pre>
</li>
</ul>
<a name="isActiveWriter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isActiveWriter</h4>
<pre>private&nbsp;boolean isActiveWriter</pre>
</li>
</ul>
<a name="loggers">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loggers</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLoggerSet.html" title="class in org.apache.hadoop.hdfs.qjournal.client">AsyncLoggerSet</a> loggers</pre>
</li>
</ul>
<a name="outputBufferCapacity">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outputBufferCapacity</h4>
<pre>private&nbsp;int outputBufferCapacity</pre>
</li>
</ul>
<a name="connectionFactory">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>connectionFactory</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/web/URLConnectionFactory.html" title="class in org.apache.hadoop.hdfs.web">URLConnectionFactory</a> connectionFactory</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="QuorumJournalManager(org.apache.hadoop.conf.Configuration, java.net.URI, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>QuorumJournalManager</h4>
<pre>public&nbsp;QuorumJournalManager(org.apache.hadoop.conf.Configuration&nbsp;conf,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="QuorumJournalManager(org.apache.hadoop.conf.Configuration, java.net.URI, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo, org.apache.hadoop.hdfs.qjournal.client.AsyncLogger.Factory)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>QuorumJournalManager</h4>
<pre>QuorumJournalManager(org.apache.hadoop.conf.Configuration&nbsp;conf,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri,
                    <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                    <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.Factory.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger.Factory</a>&nbsp;loggerFactory)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createLoggers(org.apache.hadoop.hdfs.qjournal.client.AsyncLogger.Factory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLoggers</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a>&gt;&nbsp;createLoggers(<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.Factory.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger.Factory</a>&nbsp;factory)
                                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="parseJournalId(java.net.URI)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseJournalId</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parseJournalId(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri)</pre>
</li>
</ul>
<a name="checkJournalId(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkJournalId</h4>
<pre>public static&nbsp;void&nbsp;checkJournalId(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;jid)</pre>
</li>
</ul>
<a name="createNewUniqueEpoch()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNewUniqueEpoch</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a>,org.apache.hadoop.hdfs.qjournal.protocol.QJournalProtocolProtos.NewEpochResponseProto&gt;&nbsp;createNewUniqueEpoch()
                                                                                                                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Fence any previous writers, and obtain a unique epoch number
 for write-access to the journal nodes.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the new, unique epoch number</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>format</h4>
<pre>public&nbsp;void&nbsp;format(<a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo)
            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">JournalManager</a></code></strong></div>
<div class="block">Format the underlying storage, removing any previously
 stored data.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">format</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="hasSomeData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasSomeData</h4>
<pre>public&nbsp;boolean&nbsp;hasSomeData()
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.FormatConfirmable.html#hasSomeData()">hasSomeData</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.FormatConfirmable.html" title="interface in org.apache.hadoop.hdfs.server.common">Storage.FormatConfirmable</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the storage seems to have some valid data in it,
 and the user should be required to confirm the format. Otherwise,
 false.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the storage cannot be accessed at all.</dd></dl>
</li>
</ul>
<a name="recoverUnclosedSegment(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverUnclosedSegment</h4>
<pre>private&nbsp;void&nbsp;recoverUnclosedSegment(long&nbsp;segmentTxId)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Run recovery/synchronization for a specific segment.
 Postconditions:
 <ul>
 <li>This segment will be finalized on a majority
 of nodes.</li>
 <li>All nodes which contain the finalized segment will
 agree on the length.</li>
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>segmentTxId</code> - the starting txid of the segment</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createLoggers(org.apache.hadoop.conf.Configuration, java.net.URI, org.apache.hadoop.hdfs.server.protocol.NamespaceInfo, org.apache.hadoop.hdfs.qjournal.client.AsyncLogger.Factory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLoggers</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger</a>&gt;&nbsp;createLoggers(org.apache.hadoop.conf.Configuration&nbsp;conf,
                              <a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri,
                              <a href="../../../../../../org/apache/hadoop/hdfs/server/protocol/NamespaceInfo.html" title="class in org.apache.hadoop.hdfs.server.protocol">NamespaceInfo</a>&nbsp;nsInfo,
                              <a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLogger.Factory.html" title="interface in org.apache.hadoop.hdfs.qjournal.client">AsyncLogger.Factory</a>&nbsp;factory)
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getLoggerAddresses(java.net.URI)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLoggerAddresses</h4>
<pre>private static&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&gt;&nbsp;getLoggerAddresses(<a href="https://docs.oracle.com/javase/7/docs/api/java/net/URI.html?is-external=true" title="class or interface in java.net">URI</a>&nbsp;uri)
                                                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="startLogSegment(long, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startLogSegment</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/EditLogOutputStream.html" title="class in org.apache.hadoop.hdfs.server.namenode">EditLogOutputStream</a>&nbsp;startLogSegment(long&nbsp;txId,
                                  int&nbsp;layoutVersion)
                                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#startLogSegment(long,%20int)">JournalManager</a></code></strong></div>
<div class="block">Begin writing to a new segment of the log stream, which starts at
 the given transaction ID.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#startLogSegment(long,%20int)">startLogSegment</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="finalizeLogSegment(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeLogSegment</h4>
<pre>public&nbsp;void&nbsp;finalizeLogSegment(long&nbsp;firstTxId,
                      long&nbsp;lastTxId)
                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#finalizeLogSegment(long,%20long)">JournalManager</a></code></strong></div>
<div class="block">Mark the log segment that spans from firstTxId to lastTxId
 as finalized and complete.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#finalizeLogSegment(long,%20long)">finalizeLogSegment</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="setOutputBufferCapacity(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setOutputBufferCapacity</h4>
<pre>public&nbsp;void&nbsp;setOutputBufferCapacity(int&nbsp;size)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#setOutputBufferCapacity(int)">JournalManager</a></code></strong></div>
<div class="block">Set the amount of memory that this stream should use to buffer edits</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#setOutputBufferCapacity(int)">setOutputBufferCapacity</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
</dl>
</li>
</ul>
<a name="purgeLogsOlderThan(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeLogsOlderThan</h4>
<pre>public&nbsp;void&nbsp;purgeLogsOlderThan(long&nbsp;minTxIdToKeep)
                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/LogsPurgeable.html#purgeLogsOlderThan(long)">LogsPurgeable</a></code></strong></div>
<div class="block">Remove all edit logs with transaction IDs lower than the given transaction
 ID.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/LogsPurgeable.html#purgeLogsOlderThan(long)">purgeLogsOlderThan</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/LogsPurgeable.html" title="interface in org.apache.hadoop.hdfs.server.namenode">LogsPurgeable</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>minTxIdToKeep</code> - the lowest transaction ID that should be retained</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - in the event of error</dd></dl>
</li>
</ul>
<a name="recoverUnfinalizedSegments()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverUnfinalizedSegments</h4>
<pre>public&nbsp;void&nbsp;recoverUnfinalizedSegments()
                                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#recoverUnfinalizedSegments()">JournalManager</a></code></strong></div>
<div class="block">Recover segments which have not been finalized.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#recoverUnfinalizedSegments()">recoverUnfinalizedSegments</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#close()">JournalManager</a></code></strong></div>
<div class="block">Close the journal manager, freeing any resources it may hold.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true#close()" title="class or interface in java.io">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true#close()" title="class or interface in java.lang">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="selectInputStreams(java.util.Collection, long, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>selectInputStreams</h4>
<pre>public&nbsp;void&nbsp;selectInputStreams(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/EditLogInputStream.html" title="class in org.apache.hadoop.hdfs.server.namenode">EditLogInputStream</a>&gt;&nbsp;streams,
                      long&nbsp;fromTxnId,
                      boolean&nbsp;inProgressOk)
                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/LogsPurgeable.html#selectInputStreams(java.util.Collection,%20long,%20boolean)">LogsPurgeable</a></code></strong></div>
<div class="block">Get a list of edit log input streams.  The list will start with the
 stream that contains fromTxnId, and continue until the end of the journal
 being managed.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/LogsPurgeable.html#selectInputStreams(java.util.Collection,%20long,%20boolean)">selectInputStreams</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/LogsPurgeable.html" title="interface in org.apache.hadoop.hdfs.server.namenode">LogsPurgeable</a></code></dd>
<dd><code>fromTxnId</code> - the first transaction id we want to read</dd><dd><code>inProgressOk</code> - whether or not in-progress streams should be returned</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the underlying storage has an error or is otherwise
 inaccessible</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.FormatConfirmable.html#toString()">toString</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.FormatConfirmable.html" title="interface in org.apache.hadoop.hdfs.server.common">Storage.FormatConfirmable</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a string representation of the formattable item, suitable
 for display to the user inside a prompt</dd></dl>
</li>
</ul>
<a name="getLoggerSetForTests()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLoggerSetForTests</h4>
<pre><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/AsyncLoggerSet.html" title="class in org.apache.hadoop.hdfs.qjournal.client">AsyncLoggerSet</a>&nbsp;getLoggerSetForTests()</pre>
</li>
</ul>
<a name="doPreUpgrade()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doPreUpgrade</h4>
<pre>public&nbsp;void&nbsp;doPreUpgrade()
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#doPreUpgrade()">JournalManager</a></code></strong></div>
<div class="block">Perform any steps that must succeed across all JournalManagers involved in
 an upgrade before proceeding onto the actual upgrade stage. If a call to
 any JM's doPreUpgrade method fails, then doUpgrade will not be called for
 any JM.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#doPreUpgrade()">doPreUpgrade</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doUpgrade(org.apache.hadoop.hdfs.server.common.Storage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doUpgrade</h4>
<pre>public&nbsp;void&nbsp;doUpgrade(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="class in org.apache.hadoop.hdfs.server.common">Storage</a>&nbsp;storage)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#doUpgrade(org.apache.hadoop.hdfs.server.common.Storage)">JournalManager</a></code></strong></div>
<div class="block">Perform the actual upgrade of the JM. After this is completed, the NN can
 begin to use the new upgraded metadata. This metadata may later be either
 finalized or rolled back to the previous state.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#doUpgrade(org.apache.hadoop.hdfs.server.common.Storage)">doUpgrade</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>storage</code> - info about the new upgraded versions.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doFinalize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doFinalize</h4>
<pre>public&nbsp;void&nbsp;doFinalize()
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#doFinalize()">JournalManager</a></code></strong></div>
<div class="block">Finalize the upgrade. JMs should purge any state that they had been keeping
 around during the upgrade process. After this is completed, rollback is no
 longer allowed.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#doFinalize()">doFinalize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="canRollBack(org.apache.hadoop.hdfs.server.common.StorageInfo, org.apache.hadoop.hdfs.server.common.StorageInfo, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canRollBack</h4>
<pre>public&nbsp;boolean&nbsp;canRollBack(<a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;storage,
                  <a href="../../../../../../org/apache/hadoop/hdfs/server/common/StorageInfo.html" title="class in org.apache.hadoop.hdfs.server.common">StorageInfo</a>&nbsp;prevStorage,
                  int&nbsp;targetLayoutVersion)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#canRollBack(org.apache.hadoop.hdfs.server.common.StorageInfo,%20org.apache.hadoop.hdfs.server.common.StorageInfo,%20int)">JournalManager</a></code></strong></div>
<div class="block">Return true if this JM can roll back to the previous storage state, false
 otherwise. The NN will refuse to run the rollback operation unless at least
 one JM or fsimage storage directory can roll back.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#canRollBack(org.apache.hadoop.hdfs.server.common.StorageInfo,%20org.apache.hadoop.hdfs.server.common.StorageInfo,%20int)">canRollBack</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>storage</code> - the storage info for the current state</dd><dd><code>prevStorage</code> - the storage info for the previous (unupgraded) state</dd><dd><code>targetLayoutVersion</code> - the layout version we intend to roll back to</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if this JM can roll back, false otherwise.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doRollback()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doRollback</h4>
<pre>public&nbsp;void&nbsp;doRollback()
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#doRollback()">JournalManager</a></code></strong></div>
<div class="block">Perform the rollback to the previous FS state. JMs which do not need to
 roll back their state should just return without error.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#doRollback()">doRollback</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getJournalCTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJournalCTime</h4>
<pre>public&nbsp;long&nbsp;getJournalCTime()
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#getJournalCTime()">getJournalCTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the CTime of the journal manager.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="discardSegments(long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>discardSegments</h4>
<pre>public&nbsp;void&nbsp;discardSegments(long&nbsp;startTxId)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#discardSegments(long)">JournalManager</a></code></strong></div>
<div class="block">Discard the segments whose first txid is >= the given txid.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html#discardSegments(long)">discardSegments</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.html" title="interface in org.apache.hadoop.hdfs.server.namenode">JournalManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>startTxId</code> - The given txid should be right at the segment boundary, 
 i.e., it should be the first txid of some segment, if segment corresponding
 to the txid exists.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/QuorumJournalManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumException.html" title="class in org.apache.hadoop.hdfs.qjournal.client"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hdfs/qjournal/client/QuorumOutputStream.html" title="class in org.apache.hadoop.hdfs.qjournal.client"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hdfs/qjournal/client/QuorumJournalManager.html" target="_top">Frames</a></li>
<li><a href="QuorumJournalManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
