<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:40:13 EDT 2015 -->
<title>ShortCircuitReplica</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ShortCircuitReplica";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ShortCircuitReplica.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitCache.SlotReleaser.html" title="class in org.apache.hadoop.hdfs.shortcircuit"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplicaInfo.html" title="class in org.apache.hadoop.hdfs.shortcircuit"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html" target="_top">Frames</a></li>
<li><a href="ShortCircuitReplica.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs.shortcircuit</div>
<h2 title="Class ShortCircuitReplica" class="title">Class ShortCircuitReplica</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.shortcircuit.ShortCircuitReplica</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@InterfaceAudience.Private
public class <span class="strong">ShortCircuitReplica</span>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A ShortCircuitReplica object contains file descriptors for a block that
 we are reading via short-circuit local reads.

 The file descriptors can be shared between multiple threads because
 all the operations we perform are stateless-- i.e., we use pread
 instead of read, to avoid using the shared position state.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitCache.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitCache</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#cache">cache</a></strong></code>
<div class="block">The cache we belong to.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#creationTimeMs">creationTimeMs</a></strong></code>
<div class="block">Monotonic time at which the replica was created.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#dataStream">dataStream</a></strong></code>
<div class="block">The block data input stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#evictableTimeNs">evictableTimeNs</a></strong></code>
<div class="block">The monotonic time in nanoseconds at which the replica became evictable, or
 null if it is not evictable.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../org/apache/hadoop/hdfs/ExtendedBlockId.html" title="class in org.apache.hadoop.hdfs">ExtendedBlockId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#key">key</a></strong></code>
<div class="block">Identifies this ShortCircuitReplica object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/hadoop/hdfs/server/datanode/BlockMetadataHeader.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockMetadataHeader</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#metaHeader">metaHeader</a></strong></code>
<div class="block">Block metadata header.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#metaStream">metaStream</a></strong></code>
<div class="block">The block metadata input stream.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#mmapData">mmapData</a></strong></code>
<div class="block">Current mmap state.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#purged">purged</a></strong></code>
<div class="block">True if this replica has been purged from the cache; false otherwise.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#refCount">refCount</a></strong></code>
<div class="block">Number of external references to this replica.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm.Slot.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitShm.Slot</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#slot">slot</a></strong></code>
<div class="block">If non-null, the shared memory slot associated with this replica.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#ShortCircuitReplica(org.apache.hadoop.hdfs.ExtendedBlockId,%20java.io.FileInputStream,%20java.io.FileInputStream,%20org.apache.hadoop.hdfs.shortcircuit.ShortCircuitCache,%20long,%20org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm.Slot)">ShortCircuitReplica</a></strong>(<a href="../../../../../org/apache/hadoop/hdfs/ExtendedBlockId.html" title="class in org.apache.hadoop.hdfs">ExtendedBlockId</a>&nbsp;key,
                   <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;dataStream,
                   <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;metaStream,
                   <a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitCache.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitCache</a>&nbsp;cache,
                   long&nbsp;creationTimeMs,
                   <a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm.Slot.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitShm.Slot</a>&nbsp;slot)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#addNoChecksumAnchor()">addNoChecksumAnchor</a></strong>()</code>
<div class="block">Try to add a no-checksum anchor to our shared memory slot.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#close()">close</a></strong>()</code>
<div class="block">Close the replica.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#getDataStream()">getDataStream</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#getEvictableTimeNs()">getEvictableTimeNs</a></strong>()</code>
<div class="block">Get the evictable time in nanoseconds.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/hadoop/hdfs/ExtendedBlockId.html" title="class in org.apache.hadoop.hdfs">ExtendedBlockId</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#getKey()">getKey</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/hadoop/hdfs/server/datanode/BlockMetadataHeader.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockMetadataHeader</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#getMetaHeader()">getMetaHeader</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#getMetaStream()">getMetaStream</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ClientMmap.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ClientMmap</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#getOrCreateClientMmap(boolean)">getOrCreateClientMmap</a></strong>(boolean&nbsp;anchor)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm.Slot.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitShm.Slot</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#getSlot()">getSlot</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#hasMmap()">hasMmap</a></strong>()</code>
<div class="block">Check if the replica has an associated mmap that has been fully loaded.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#isStale()">isStale</a></strong>()</code>
<div class="block">Check if the replica is stale.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html?is-external=true" title="class or interface in java.nio">MappedByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#loadMmapInternal()">loadMmapInternal</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#munmap()">munmap</a></strong>()</code>
<div class="block">Free the mmap associated with this replica.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#removeNoChecksumAnchor()">removeNoChecksumAnchor</a></strong>()</code>
<div class="block">Remove a no-checksum anchor for our shared memory slot.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#setEvictableTimeNs(java.lang.Long)">setEvictableTimeNs</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;evictableTimeNs)</code>
<div class="block">Set the evictable time in nanoseconds.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#toString()">toString</a></strong>()</code>
<div class="block">Convert the replica to a string for debugging purposes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html#unref()">unref</a></strong>()</code>
<div class="block">Decrement the reference count.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>public static final&nbsp;org.apache.commons.logging.Log LOG</pre>
</li>
</ul>
<a name="key">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>key</h4>
<pre>final&nbsp;<a href="../../../../../org/apache/hadoop/hdfs/ExtendedBlockId.html" title="class in org.apache.hadoop.hdfs">ExtendedBlockId</a> key</pre>
<div class="block">Identifies this ShortCircuitReplica object.</div>
</li>
</ul>
<a name="dataStream">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataStream</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a> dataStream</pre>
<div class="block">The block data input stream.</div>
</li>
</ul>
<a name="metaStream">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>metaStream</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a> metaStream</pre>
<div class="block">The block metadata input stream.

 TODO: make this nullable if the file has no checksums on disk.</div>
</li>
</ul>
<a name="metaHeader">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>metaHeader</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/hadoop/hdfs/server/datanode/BlockMetadataHeader.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockMetadataHeader</a> metaHeader</pre>
<div class="block">Block metadata header.</div>
</li>
</ul>
<a name="cache">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cache</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitCache.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitCache</a> cache</pre>
<div class="block">The cache we belong to.</div>
</li>
</ul>
<a name="creationTimeMs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>creationTimeMs</h4>
<pre>private final&nbsp;long creationTimeMs</pre>
<div class="block">Monotonic time at which the replica was created.</div>
</li>
</ul>
<a name="slot">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slot</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm.Slot.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitShm.Slot</a> slot</pre>
<div class="block">If non-null, the shared memory slot associated with this replica.</div>
</li>
</ul>
<a name="mmapData">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mmapData</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a> mmapData</pre>
<div class="block">Current mmap state.

 Protected by the cache lock.</div>
</li>
</ul>
<a name="purged">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purged</h4>
<pre>boolean purged</pre>
<div class="block">True if this replica has been purged from the cache; false otherwise.

 Protected by the cache lock.</div>
</li>
</ul>
<a name="refCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refCount</h4>
<pre>int refCount</pre>
<div class="block">Number of external references to this replica.  Replicas are referenced
 by the cache, BlockReaderLocal instances, and by ClientMmap instances.
 The number starts at 2 because when we create a replica, it is referenced
 by both the cache and the requester.

 Protected by the cache lock.</div>
</li>
</ul>
<a name="evictableTimeNs">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>evictableTimeNs</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a> evictableTimeNs</pre>
<div class="block">The monotonic time in nanoseconds at which the replica became evictable, or
 null if it is not evictable.

 Protected by the cache lock.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ShortCircuitReplica(org.apache.hadoop.hdfs.ExtendedBlockId, java.io.FileInputStream, java.io.FileInputStream, org.apache.hadoop.hdfs.shortcircuit.ShortCircuitCache, long, org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm.Slot)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ShortCircuitReplica</h4>
<pre>public&nbsp;ShortCircuitReplica(<a href="../../../../../org/apache/hadoop/hdfs/ExtendedBlockId.html" title="class in org.apache.hadoop.hdfs">ExtendedBlockId</a>&nbsp;key,
                   <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;dataStream,
                   <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;metaStream,
                   <a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitCache.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitCache</a>&nbsp;cache,
                   long&nbsp;creationTimeMs,
                   <a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm.Slot.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitShm.Slot</a>&nbsp;slot)
                    throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="unref()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unref</h4>
<pre>public&nbsp;void&nbsp;unref()</pre>
<div class="block">Decrement the reference count.</div>
</li>
</ul>
<a name="isStale()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isStale</h4>
<pre>boolean&nbsp;isStale()</pre>
<div class="block">Check if the replica is stale.

 Must be called with the cache lock held.</div>
</li>
</ul>
<a name="addNoChecksumAnchor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addNoChecksumAnchor</h4>
<pre>public&nbsp;boolean&nbsp;addNoChecksumAnchor()</pre>
<div class="block">Try to add a no-checksum anchor to our shared memory slot.

 It is only possible to add this anchor when the block is mlocked on the Datanode.
 The DataNode will not munlock the block until the number of no-checksum anchors
 for the block reaches zero.
 
 This method does not require any synchronization.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>True if we successfully added a no-checksum anchor.</dd></dl>
</li>
</ul>
<a name="removeNoChecksumAnchor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeNoChecksumAnchor</h4>
<pre>public&nbsp;void&nbsp;removeNoChecksumAnchor()</pre>
<div class="block">Remove a no-checksum anchor for our shared memory slot.

 This method does not require any synchronization.</div>
</li>
</ul>
<a name="hasMmap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasMmap</h4>
<pre>public&nbsp;boolean&nbsp;hasMmap()</pre>
<div class="block">Check if the replica has an associated mmap that has been fully loaded.

 Must be called with the cache lock held.</div>
</li>
</ul>
<a name="munmap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>munmap</h4>
<pre>void&nbsp;munmap()</pre>
<div class="block">Free the mmap associated with this replica.

 Must be called with the cache lock held.</div>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>void&nbsp;close()</pre>
<div class="block">Close the replica.

 Must be called after there are no more references to the replica in the
 cache or elsewhere.</div>
</li>
</ul>
<a name="getDataStream()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataStream</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;getDataStream()</pre>
</li>
</ul>
<a name="getMetaStream()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetaStream</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;getMetaStream()</pre>
</li>
</ul>
<a name="getMetaHeader()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetaHeader</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/hadoop/hdfs/server/datanode/BlockMetadataHeader.html" title="class in org.apache.hadoop.hdfs.server.datanode">BlockMetadataHeader</a>&nbsp;getMetaHeader()</pre>
</li>
</ul>
<a name="getKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKey</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/hadoop/hdfs/ExtendedBlockId.html" title="class in org.apache.hadoop.hdfs">ExtendedBlockId</a>&nbsp;getKey()</pre>
</li>
</ul>
<a name="getOrCreateClientMmap(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrCreateClientMmap</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ClientMmap.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ClientMmap</a>&nbsp;getOrCreateClientMmap(boolean&nbsp;anchor)</pre>
</li>
</ul>
<a name="loadMmapInternal()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadMmapInternal</h4>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html?is-external=true" title="class or interface in java.nio">MappedByteBuffer</a>&nbsp;loadMmapInternal()</pre>
</li>
</ul>
<a name="getEvictableTimeNs()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEvictableTimeNs</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;getEvictableTimeNs()</pre>
<div class="block">Get the evictable time in nanoseconds.

 Note: you must hold the cache lock to call this function.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the evictable time in nanoseconds.</dd></dl>
</li>
</ul>
<a name="setEvictableTimeNs(java.lang.Long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEvictableTimeNs</h4>
<pre>void&nbsp;setEvictableTimeNs(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;evictableTimeNs)</pre>
<div class="block">Set the evictable time in nanoseconds.

 Note: you must hold the cache lock to call this function.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>evictableTimeNs</code> - The evictable time in nanoseconds, or null
                          to set no evictable time.</dd></dl>
</li>
</ul>
<a name="getSlot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlot</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm.Slot.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitShm.Slot</a>&nbsp;getSlot()</pre>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<div class="block">Convert the replica to a string for debugging purposes.
 Note that we can't take the lock here.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ShortCircuitReplica.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitCache.SlotReleaser.html" title="class in org.apache.hadoop.hdfs.shortcircuit"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplicaInfo.html" title="class in org.apache.hadoop.hdfs.shortcircuit"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html" target="_top">Frames</a></li>
<li><a href="ShortCircuitReplica.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
