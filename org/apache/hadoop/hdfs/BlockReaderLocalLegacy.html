<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:40:27 EDT 2015 -->
<title>BlockReaderLocalLegacy</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BlockReaderLocalLegacy";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlockReaderLocalLegacy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.Builder.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.LocalDatanodeInfo.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html" target="_top">Frames</a></li>
<li><a href="BlockReaderLocalLegacy.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs</div>
<h2 title="Class BlockReaderLocalLegacy" class="title">Class BlockReaderLocalLegacy</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.BlockReaderLocalLegacy</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.apache.hadoop.fs.ByteBufferReadable, <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></dd>
</dl>
<hr>
<br>
<pre> class <span class="strong">BlockReaderLocalLegacy</span>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></pre>
<div class="block">BlockReaderLocalLegacy enables local short circuited reads. If the DFS client is on
 the same machine as the datanode, then the client can read files directly
 from the local file system rather than going through the datanode for better
 performance. <br>

 This is the legacy implementation based on HDFS-2246, which requires
 permissions on the datanode to be set so that clients can directly access the
 blocks. The new implementation based on HDFS-347 should be preferred on UNIX
 systems where the required native code has been implemented.<br>

 <a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html" title="class in org.apache.hadoop.hdfs"><code>BlockReaderLocalLegacy</code></a> works as follows:
 <ul>
 <li>The client performing short circuit reads must be configured at the
 datanode.</li>
 <li>The client gets the path to the file where block is stored using
 <a href="../../../../org/apache/hadoop/hdfs/protocol/ClientDatanodeProtocol.html#getBlockLocalPathInfo(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.security.token.Token)"><code>ClientDatanodeProtocol.getBlockLocalPathInfo(ExtendedBlock, Token)</code></a>
 RPC call</li>
 <li>Client uses kerberos authentication to connect to the datanode over RPC,
 if security is enabled.</li>
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.LocalDatanodeInfo.html" title="class in org.apache.hadoop.hdfs">BlockReaderLocalLegacy.LocalDatanodeInfo</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#blockId">blockId</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static org.apache.hadoop.util.DirectBufferPool</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#bufferPool">bufferPool</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#bytesPerChecksum">bytesPerChecksum</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.hadoop.util.DataChecksum</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#checksum">checksum</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#checksumBuff">checksumBuff</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#checksumIn">checksumIn</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#checksumSize">checksumSize</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#dataIn">dataIn</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#filename">filename</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.LocalDatanodeInfo.html" title="class in org.apache.hadoop.hdfs">BlockReaderLocalLegacy.LocalDatanodeInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#localDatanodeInfoMap">localDatanodeInfoMap</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#offsetFromChunkBoundary">offsetFromChunkBoundary</a></strong></code>
<div class="block">Offset from the most recent chunk boundary at which the next read should
 take place.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#skipBuf">skipBuf</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#slowReadBuff">slowReadBuff</a></strong></code>
<div class="block">Used for checksummed reads that need to be staged before copying to their
 output buffer because they are either a) smaller than the checksum chunk
 size or b) issued by the slower read(byte[]...) path</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#startOffset">startOffset</a></strong></code>
<div class="block">offset in block where reader wants to actually read</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#verifyChecksum">verifyChecksum</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#BlockReaderLocalLegacy(org.apache.hadoop.hdfs.DFSClient.Conf,%20java.lang.String,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.security.token.Token,%20long,%20long,%20org.apache.hadoop.hdfs.protocol.BlockLocalPathInfo,%20org.apache.hadoop.util.DataChecksum,%20boolean,%20java.io.FileInputStream,%20long,%20java.io.FileInputStream)">BlockReaderLocalLegacy</a></strong>(<a href="../../../../org/apache/hadoop/hdfs/DFSClient.Conf.html" title="class in org.apache.hadoop.hdfs">DFSClient.Conf</a>&nbsp;conf,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;hdfsfile,
                      <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                      org.apache.hadoop.security.token.Token&lt;<a href="../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenIdentifier.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenIdentifier</a>&gt;&nbsp;token,
                      long&nbsp;startOffset,
                      long&nbsp;length,
                      <a href="../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol">BlockLocalPathInfo</a>&nbsp;pathinfo,
                      org.apache.hadoop.util.DataChecksum&nbsp;checksum,
                      boolean&nbsp;verifyChecksum,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;dataIn,
                      long&nbsp;firstChunkOffset,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;checksumIn)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private </code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#BlockReaderLocalLegacy(org.apache.hadoop.hdfs.DFSClient.Conf,%20java.lang.String,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.security.token.Token,%20long,%20long,%20org.apache.hadoop.hdfs.protocol.BlockLocalPathInfo,%20java.io.FileInputStream)">BlockReaderLocalLegacy</a></strong>(<a href="../../../../org/apache/hadoop/hdfs/DFSClient.Conf.html" title="class in org.apache.hadoop.hdfs">DFSClient.Conf</a>&nbsp;conf,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;hdfsfile,
                      <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                      org.apache.hadoop.security.token.Token&lt;<a href="../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenIdentifier.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenIdentifier</a>&gt;&nbsp;token,
                      long&nbsp;startOffset,
                      long&nbsp;length,
                      <a href="../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol">BlockLocalPathInfo</a>&nbsp;pathinfo,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;dataIn)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#available()">available</a></strong>()</code>
<div class="block">Returns an estimate of the number of bytes that can be read
 (or skipped over) from this input stream without performing
 network I/O.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#close()">close</a></strong>()</code>
<div class="block">Close the block reader.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#doByteBufferRead(java.nio.ByteBuffer)">doByteBufferRead</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>
<div class="block">Tries to read as many bytes as possible into supplied buffer, checksumming
 each chunk if needed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#fillBuffer(java.io.FileInputStream,%20java.nio.ByteBuffer)">fillBuffer</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;stream,
          <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>
<div class="block">Reads bytes into a buffer until EOF or the buffer's limit is reached</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#fillSlowReadBuffer(int)">fillSlowReadBuffer</a></strong>(int&nbsp;len)</code>
<div class="block">Ensures that up to len bytes are available and checksummed in the slow read
 buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol">BlockLocalPathInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#getBlockPathInfo(org.apache.hadoop.security.UserGroupInformation,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.hdfs.protocol.DatanodeInfo,%20org.apache.hadoop.conf.Configuration,%20int,%20org.apache.hadoop.security.token.Token,%20boolean,%20org.apache.hadoop.fs.StorageType)">getBlockPathInfo</a></strong>(org.apache.hadoop.security.UserGroupInformation&nbsp;ugi,
                <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;blk,
                <a href="../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;node,
                org.apache.hadoop.conf.Configuration&nbsp;conf,
                int&nbsp;timeout,
                org.apache.hadoop.security.token.Token&lt;<a href="../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenIdentifier.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenIdentifier</a>&gt;&nbsp;token,
                boolean&nbsp;connectToDnViaHostname,
                org.apache.hadoop.fs.StorageType&nbsp;storageType)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/hadoop/hdfs/shortcircuit/ClientMmap.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ClientMmap</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#getClientMmap(java.util.EnumSet)">getClientMmap</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html?is-external=true" title="class or interface in java.util">EnumSet</a>&lt;org.apache.hadoop.fs.ReadOption&gt;&nbsp;opts)</code>
<div class="block">Get a ClientMmap object for this BlockReader.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.LocalDatanodeInfo.html" title="class in org.apache.hadoop.hdfs">BlockReaderLocalLegacy.LocalDatanodeInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#getLocalDatanodeInfo(int)">getLocalDatanodeInfo</a></strong>(int&nbsp;port)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#getSlowReadBufferNumChunks(int,%20int)">getSlowReadBufferNumChunks</a></strong>(int&nbsp;bufferSizeBytes,
                          int&nbsp;bytesPerChecksum)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#isLocal()">isLocal</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#isShortCircuit()">isShortCircuit</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html" title="class in org.apache.hadoop.hdfs">BlockReaderLocalLegacy</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#newBlockReader(org.apache.hadoop.hdfs.DFSClient.Conf,%20org.apache.hadoop.security.UserGroupInformation,%20org.apache.hadoop.conf.Configuration,%20java.lang.String,%20org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.security.token.Token,%20org.apache.hadoop.hdfs.protocol.DatanodeInfo,%20long,%20long,%20org.apache.hadoop.fs.StorageType)">newBlockReader</a></strong>(<a href="../../../../org/apache/hadoop/hdfs/DFSClient.Conf.html" title="class in org.apache.hadoop.hdfs">DFSClient.Conf</a>&nbsp;conf,
              org.apache.hadoop.security.UserGroupInformation&nbsp;userGroupInformation,
              org.apache.hadoop.conf.Configuration&nbsp;configuration,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;file,
              <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;blk,
              org.apache.hadoop.security.token.Token&lt;<a href="../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenIdentifier.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenIdentifier</a>&gt;&nbsp;token,
              <a href="../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;node,
              long&nbsp;startOffset,
              long&nbsp;length,
              org.apache.hadoop.fs.StorageType&nbsp;storageType)</code>
<div class="block">The only way this object can be instantiated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#read(byte[],%20int,%20int)">read</a></strong>(byte[]&nbsp;buf,
    int&nbsp;off,
    int&nbsp;len)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#read(java.nio.ByteBuffer)">read</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#readAll(byte[],%20int,%20int)">readAll</a></strong>(byte[]&nbsp;buf,
       int&nbsp;offset,
       int&nbsp;len)</code>
<div class="block">Similar to <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)"><code>BlockReader.readFully(byte[], int, int)</code></a> except that it will
 not throw an exception on EOF.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#readFully(byte[],%20int,%20int)">readFully</a></strong>(byte[]&nbsp;buf,
         int&nbsp;off,
         int&nbsp;len)</code>
<div class="block">Read exactly the given amount of data, throwing an exception
 if EOF is reached before that amount</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#skip(long)">skip</a></strong>(long&nbsp;n)</code>
<div class="block">Skip the given number of bytes</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html#writeSlice(java.nio.ByteBuffer,%20java.nio.ByteBuffer,%20int)">writeSlice</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;from,
          <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;to,
          int&nbsp;length)</code>
<div class="block">Utility method used by read(ByteBuffer) to partially copy a ByteBuffer into
 another.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>private static final&nbsp;org.apache.commons.logging.Log LOG</pre>
</li>
</ul>
<a name="localDatanodeInfoMap">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>localDatanodeInfoMap</h4>
<pre>private static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.LocalDatanodeInfo.html" title="class in org.apache.hadoop.hdfs">BlockReaderLocalLegacy.LocalDatanodeInfo</a>&gt; localDatanodeInfoMap</pre>
</li>
</ul>
<a name="dataIn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataIn</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a> dataIn</pre>
</li>
</ul>
<a name="checksumIn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksumIn</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a> checksumIn</pre>
</li>
</ul>
<a name="offsetFromChunkBoundary">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>offsetFromChunkBoundary</h4>
<pre>private&nbsp;int offsetFromChunkBoundary</pre>
<div class="block">Offset from the most recent chunk boundary at which the next read should
 take place. Is only set to non-zero at construction time, and is
 decremented (usually to 0) by subsequent reads. This avoids having to do a
 checksum read at construction to position the read cursor correctly.</div>
</li>
</ul>
<a name="skipBuf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>skipBuf</h4>
<pre>private&nbsp;byte[] skipBuf</pre>
</li>
</ul>
<a name="slowReadBuff">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slowReadBuff</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a> slowReadBuff</pre>
<div class="block">Used for checksummed reads that need to be staged before copying to their
 output buffer because they are either a) smaller than the checksum chunk
 size or b) issued by the slower read(byte[]...) path</div>
</li>
</ul>
<a name="checksumBuff">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksumBuff</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a> checksumBuff</pre>
</li>
</ul>
<a name="checksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksum</h4>
<pre>private&nbsp;org.apache.hadoop.util.DataChecksum checksum</pre>
</li>
</ul>
<a name="verifyChecksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyChecksum</h4>
<pre>private final&nbsp;boolean verifyChecksum</pre>
</li>
</ul>
<a name="bufferPool">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bufferPool</h4>
<pre>private static final&nbsp;org.apache.hadoop.util.DirectBufferPool bufferPool</pre>
</li>
</ul>
<a name="bytesPerChecksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bytesPerChecksum</h4>
<pre>private final&nbsp;int bytesPerChecksum</pre>
</li>
</ul>
<a name="checksumSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksumSize</h4>
<pre>private final&nbsp;int checksumSize</pre>
</li>
</ul>
<a name="startOffset">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startOffset</h4>
<pre>private&nbsp;long startOffset</pre>
<div class="block">offset in block where reader wants to actually read</div>
</li>
</ul>
<a name="filename">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filename</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> filename</pre>
</li>
</ul>
<a name="blockId">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>blockId</h4>
<pre>private&nbsp;long blockId</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BlockReaderLocalLegacy(org.apache.hadoop.hdfs.DFSClient.Conf, java.lang.String, org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.security.token.Token, long, long, org.apache.hadoop.hdfs.protocol.BlockLocalPathInfo, java.io.FileInputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BlockReaderLocalLegacy</h4>
<pre>private&nbsp;BlockReaderLocalLegacy(<a href="../../../../org/apache/hadoop/hdfs/DFSClient.Conf.html" title="class in org.apache.hadoop.hdfs">DFSClient.Conf</a>&nbsp;conf,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;hdfsfile,
                      <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                      org.apache.hadoop.security.token.Token&lt;<a href="../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenIdentifier.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenIdentifier</a>&gt;&nbsp;token,
                      long&nbsp;startOffset,
                      long&nbsp;length,
                      <a href="../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol">BlockLocalPathInfo</a>&nbsp;pathinfo,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;dataIn)
                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="BlockReaderLocalLegacy(org.apache.hadoop.hdfs.DFSClient.Conf, java.lang.String, org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.security.token.Token, long, long, org.apache.hadoop.hdfs.protocol.BlockLocalPathInfo, org.apache.hadoop.util.DataChecksum, boolean, java.io.FileInputStream, long, java.io.FileInputStream)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BlockReaderLocalLegacy</h4>
<pre>private&nbsp;BlockReaderLocalLegacy(<a href="../../../../org/apache/hadoop/hdfs/DFSClient.Conf.html" title="class in org.apache.hadoop.hdfs">DFSClient.Conf</a>&nbsp;conf,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;hdfsfile,
                      <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;block,
                      org.apache.hadoop.security.token.Token&lt;<a href="../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenIdentifier.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenIdentifier</a>&gt;&nbsp;token,
                      long&nbsp;startOffset,
                      long&nbsp;length,
                      <a href="../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol">BlockLocalPathInfo</a>&nbsp;pathinfo,
                      org.apache.hadoop.util.DataChecksum&nbsp;checksum,
                      boolean&nbsp;verifyChecksum,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;dataIn,
                      long&nbsp;firstChunkOffset,
                      <a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;checksumIn)
                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="newBlockReader(org.apache.hadoop.hdfs.DFSClient.Conf, org.apache.hadoop.security.UserGroupInformation, org.apache.hadoop.conf.Configuration, java.lang.String, org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.security.token.Token, org.apache.hadoop.hdfs.protocol.DatanodeInfo, long, long, org.apache.hadoop.fs.StorageType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newBlockReader</h4>
<pre>static&nbsp;<a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html" title="class in org.apache.hadoop.hdfs">BlockReaderLocalLegacy</a>&nbsp;newBlockReader(<a href="../../../../org/apache/hadoop/hdfs/DFSClient.Conf.html" title="class in org.apache.hadoop.hdfs">DFSClient.Conf</a>&nbsp;conf,
                                    org.apache.hadoop.security.UserGroupInformation&nbsp;userGroupInformation,
                                    org.apache.hadoop.conf.Configuration&nbsp;configuration,
                                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;file,
                                    <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;blk,
                                    org.apache.hadoop.security.token.Token&lt;<a href="../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenIdentifier.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenIdentifier</a>&gt;&nbsp;token,
                                    <a href="../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;node,
                                    long&nbsp;startOffset,
                                    long&nbsp;length,
                                    org.apache.hadoop.fs.StorageType&nbsp;storageType)
                                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">The only way this object can be instantiated.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getLocalDatanodeInfo(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalDatanodeInfo</h4>
<pre>private static&nbsp;<a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.LocalDatanodeInfo.html" title="class in org.apache.hadoop.hdfs">BlockReaderLocalLegacy.LocalDatanodeInfo</a>&nbsp;getLocalDatanodeInfo(int&nbsp;port)</pre>
</li>
</ul>
<a name="getBlockPathInfo(org.apache.hadoop.security.UserGroupInformation, org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.hdfs.protocol.DatanodeInfo, org.apache.hadoop.conf.Configuration, int, org.apache.hadoop.security.token.Token, boolean, org.apache.hadoop.fs.StorageType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockPathInfo</h4>
<pre>private static&nbsp;<a href="../../../../org/apache/hadoop/hdfs/protocol/BlockLocalPathInfo.html" title="class in org.apache.hadoop.hdfs.protocol">BlockLocalPathInfo</a>&nbsp;getBlockPathInfo(org.apache.hadoop.security.UserGroupInformation&nbsp;ugi,
                                  <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a>&nbsp;blk,
                                  <a href="../../../../org/apache/hadoop/hdfs/protocol/DatanodeInfo.html" title="class in org.apache.hadoop.hdfs.protocol">DatanodeInfo</a>&nbsp;node,
                                  org.apache.hadoop.conf.Configuration&nbsp;conf,
                                  int&nbsp;timeout,
                                  org.apache.hadoop.security.token.Token&lt;<a href="../../../../org/apache/hadoop/hdfs/security/token/block/BlockTokenIdentifier.html" title="class in org.apache.hadoop.hdfs.security.token.block">BlockTokenIdentifier</a>&gt;&nbsp;token,
                                  boolean&nbsp;connectToDnViaHostname,
                                  org.apache.hadoop.fs.StorageType&nbsp;storageType)
                                            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getSlowReadBufferNumChunks(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlowReadBufferNumChunks</h4>
<pre>private static&nbsp;int&nbsp;getSlowReadBufferNumChunks(int&nbsp;bufferSizeBytes,
                             int&nbsp;bytesPerChecksum)</pre>
</li>
</ul>
<a name="fillBuffer(java.io.FileInputStream, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fillBuffer</h4>
<pre>private&nbsp;int&nbsp;fillBuffer(<a href="https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html?is-external=true" title="class or interface in java.io">FileInputStream</a>&nbsp;stream,
             <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Reads bytes into a buffer until EOF or the buffer's limit is reached</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="writeSlice(java.nio.ByteBuffer, java.nio.ByteBuffer, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeSlice</h4>
<pre>private&nbsp;void&nbsp;writeSlice(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;from,
              <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;to,
              int&nbsp;length)</pre>
<div class="block">Utility method used by read(ByteBuffer) to partially copy a ByteBuffer into
 another.</div>
</li>
</ul>
<a name="read(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;read(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)
         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>read</code>&nbsp;in interface&nbsp;<code>org.apache.hadoop.fs.ByteBufferReadable</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doByteBufferRead(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doByteBufferRead</h4>
<pre>private&nbsp;int&nbsp;doByteBufferRead(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Tries to read as many bytes as possible into supplied buffer, checksumming
 each chunk if needed.

 <b>Preconditions:</b>
 <ul>
 <li>
 If checksumming is enabled, buf.remaining must be a multiple of
 bytesPerChecksum. Note that this is not a requirement for clients of
 read(ByteBuffer) - in the case of non-checksum-sized read requests,
 read(ByteBuffer) will substitute a suitably sized buffer to pass to this
 method.
 </li>
 </ul>
 <b>Postconditions:</b>
 <ul>
 <li>buf.limit and buf.mark are unchanged.</li>
 <li>buf.position += min(offsetFromChunkBoundary, totalBytesRead) - so the
 requested bytes can be read straight from the buffer</li>
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buf</code> - byte buffer to write bytes to. If checksums are not required, buf
          can have any number of bytes remaining, otherwise there must be a
          multiple of the checksum chunk size remaining.</dd>
<dt><span class="strong">Returns:</span></dt><dd><tt>max(min(totalBytesRead, len) - offsetFromChunkBoundary, 0)</tt>
         that is, the the number of useful bytes (up to the amount
         requested) readable from the buffer by the client.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="fillSlowReadBuffer(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fillSlowReadBuffer</h4>
<pre>private&nbsp;int&nbsp;fillSlowReadBuffer(int&nbsp;len)
                        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Ensures that up to len bytes are available and checksummed in the slow read
 buffer. The number of bytes available to read is returned. If the buffer is
 not already empty, the number of remaining bytes is returned and no actual
 read happens.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>len</code> - the maximum number of bytes to make available. After len bytes
          are read, the underlying bytestream <b>must</b> be at a checksum
          boundary, or EOF. That is, (len + currentPosition) %
          bytesPerChecksum == 0.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of bytes available to read, or -1 if EOF.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="read(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;read(byte[]&nbsp;buf,
       int&nbsp;off,
       int&nbsp;len)
         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#read(byte[],%20int,%20int)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="skip(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>skip</h4>
<pre>public&nbsp;long&nbsp;skip(long&nbsp;n)
          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#skip(long)">BlockReader</a></code></strong></div>
<div class="block">Skip the given number of bytes</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#skip(long)">skip</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#close()">BlockReader</a></code></strong></div>
<div class="block">Close the block reader.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readAll(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readAll</h4>
<pre>public&nbsp;int&nbsp;readAll(byte[]&nbsp;buf,
          int&nbsp;offset,
          int&nbsp;len)
            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readAll(byte[],%20int,%20int)">BlockReader</a></code></strong></div>
<div class="block">Similar to <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)"><code>BlockReader.readFully(byte[], int, int)</code></a> except that it will
 not throw an exception on EOF. However, it differs from the simple
 <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#read(byte[],%20int,%20int)"><code>BlockReader.read(byte[], int, int)</code></a> call in that it is guaranteed to
 read the data if it is available. In other words, if this call
 does not throw an exception, then either the buffer has been
 filled or the next call will return EOF.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readAll(byte[],%20int,%20int)">readAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readFully(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFully</h4>
<pre>public&nbsp;void&nbsp;readFully(byte[]&nbsp;buf,
             int&nbsp;off,
             int&nbsp;len)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)">BlockReader</a></code></strong></div>
<div class="block">Read exactly the given amount of data, throwing an exception
 if EOF is reached before that amount</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)">readFully</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="available()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>available</h4>
<pre>public&nbsp;int&nbsp;available()
              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#available()">BlockReader</a></code></strong></div>
<div class="block">Returns an estimate of the number of bytes that can be read
 (or skipped over) from this input stream without performing
 network I/O.
 This may return more than what is actually present in the block.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#available()">available</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="isLocal()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLocal</h4>
<pre>public&nbsp;boolean&nbsp;isLocal()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#isLocal()">isLocal</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true only if this is a local read.</dd></dl>
</li>
</ul>
<a name="isShortCircuit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isShortCircuit</h4>
<pre>public&nbsp;boolean&nbsp;isShortCircuit()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#isShortCircuit()">isShortCircuit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true only if this is a short-circuit read.
                      All short-circuit reads are also local.</dd></dl>
</li>
</ul>
<a name="getClientMmap(java.util.EnumSet)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getClientMmap</h4>
<pre>public&nbsp;<a href="../../../../org/apache/hadoop/hdfs/shortcircuit/ClientMmap.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ClientMmap</a>&nbsp;getClientMmap(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html?is-external=true" title="class or interface in java.util">EnumSet</a>&lt;org.apache.hadoop.fs.ReadOption&gt;&nbsp;opts)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#getClientMmap(java.util.EnumSet)">BlockReader</a></code></strong></div>
<div class="block">Get a ClientMmap object for this BlockReader.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#getClientMmap(java.util.EnumSet)">getClientMmap</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>opts</code> - The read options to use.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The ClientMmap object, or null if mmap is not
                      supported.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlockReaderLocalLegacy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.Builder.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocalLegacy.LocalDatanodeInfo.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/hdfs/BlockReaderLocalLegacy.html" target="_top">Frames</a></li>
<li><a href="BlockReaderLocalLegacy.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
