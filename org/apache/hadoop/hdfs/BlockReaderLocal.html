<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 23:53:47 EDT 2015 -->
<title>BlockReaderLocal</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BlockReaderLocal";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlockReaderLocal.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/hadoop/hdfs/BlockReaderFactory.FailureInjector.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.Builder.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/hdfs/BlockReaderLocal.html" target="_top">Frames</a></li>
<li><a href="BlockReaderLocal.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hdfs</div>
<h2 title="Class BlockReaderLocal" class="title">Class BlockReaderLocal</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hdfs.BlockReaderLocal</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.apache.hadoop.fs.ByteBufferReadable, <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></dd>
</dl>
<hr>
<br>
<pre> class <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.60">BlockReaderLocal</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></pre>
<div class="block">BlockReaderLocal enables local short circuited reads. If the DFS client is on
 the same machine as the datanode, then the client can read files directly
 from the local file system rather than going through the datanode for better
 performance. <br>
 <a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html" title="class in org.apache.hadoop.hdfs"><code>BlockReaderLocal</code></a> works as follows:
 <ul>
 <li>The client performing short circuit reads must be configured at the
 datanode.</li>
 <li>The client gets the file descriptors for the metadata file and the data 
 file for the block using
 <a href="../../../../org/apache/hadoop/hdfs/server/datanode/DataXceiver.html#requestShortCircuitFds(org.apache.hadoop.hdfs.protocol.ExtendedBlock,%20org.apache.hadoop.security.token.Token,%20org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm.SlotId,%20int,%20boolean)"><code>DataXceiver.requestShortCircuitFds(org.apache.hadoop.hdfs.protocol.ExtendedBlock, org.apache.hadoop.security.token.Token&lt;org.apache.hadoop.hdfs.security.token.block.BlockTokenIdentifier&gt;, org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm.SlotId, int, boolean)</code></a>.
 </li>
 <li>The client reads the file descriptors.</li>
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.Builder.html" title="class in org.apache.hadoop.hdfs">BlockReaderLocal.Builder</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#block">block</a></strong></code>
<div class="block">Block ID and Block Pool ID.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static org.apache.hadoop.util.DirectBufferPool</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#bufferPool">bufferPool</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#bytesPerChecksum">bytesPerChecksum</a></strong></code>
<div class="block">Cache of Checksum#bytesPerChecksum.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.hadoop.util.DataChecksum</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#checksum">checksum</a></strong></code>
<div class="block">Checksum type and size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#checksumBuf">checksumBuf</a></strong></code>
<div class="block">Buffers checksums starting at the current checksumPos and extending on
 for checksumBuf.limit().</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels">FileChannel</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#checksumIn">checksumIn</a></strong></code>
<div class="block">The Checksum FileChannel.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#checksumSize">checksumSize</a></strong></code>
<div class="block">Cache of Checksum#checksumSize.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#closed">closed</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#dataBuf">dataBuf</a></strong></code>
<div class="block">Buffers data starting at the current dataPos and extending on
 for dataBuf.limit().</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels">FileChannel</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#dataIn">dataIn</a></strong></code>
<div class="block">The data FileChannel.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#dataPos">dataPos</a></strong></code>
<div class="block">The next place we'll read from in the block data FileChannel.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#filename">filename</a></strong></code>
<div class="block">Name of the block, for logging purposes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#maxAllocatedChunks">maxAllocatedChunks</a></strong></code>
<div class="block">Maximum number of chunks to allocate.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#maxReadaheadLength">maxReadaheadLength</a></strong></code>
<div class="block">Maximum amount of readahead we'll do.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitReplica</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#replica">replica</a></strong></code>
<div class="block">Pair of streams for this block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.hadoop.fs.StorageType</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#storageType">storageType</a></strong></code>
<div class="block">StorageType of replica on DataNode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#verifyChecksum">verifyChecksum</a></strong></code>
<div class="block">If false, we will always skip the checksum.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#zeroReadaheadRequested">zeroReadaheadRequested</a></strong></code>
<div class="block">True if zero readahead was requested.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#BlockReaderLocal(org.apache.hadoop.hdfs.BlockReaderLocal.Builder)">BlockReaderLocal</a></strong>(<a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.Builder.html" title="class in org.apache.hadoop.hdfs">BlockReaderLocal.Builder</a>&nbsp;builder)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#available()">available</a></strong>()</code>
<div class="block">Returns an estimate of the number of bytes that can be read
 (or skipped over) from this input stream without performing
 network I/O.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#close()">close</a></strong>()</code>
<div class="block">Close the block reader.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#createChecksumBufIfNeeded()">createChecksumBufIfNeeded</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#createDataBufIfNeeded()">createDataBufIfNeeded</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#createNoChecksumContext()">createNoChecksumContext</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#drainDataBuf(java.nio.ByteBuffer)">drainDataBuf</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#fillBuffer(java.nio.ByteBuffer,%20boolean)">fillBuffer</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf,
                    boolean&nbsp;canSkipChecksum)</code>
<div class="block">Read from the block file into a buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#fillDataBuf(boolean)">fillDataBuf</a></strong>(boolean&nbsp;canSkipChecksum)</code>
<div class="block">Fill the data buffer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#forceAnchorable()">forceAnchorable</a></strong>()</code>
<div class="block">Make the replica anchorable.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#forceUnanchorable()">forceUnanchorable</a></strong>()</code>
<div class="block">Make the replica unanchorable.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#freeChecksumBufIfExists()">freeChecksumBufIfExists</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#freeDataBufIfExists()">freeDataBufIfExists</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/hadoop/hdfs/shortcircuit/ClientMmap.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ClientMmap</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#getClientMmap(java.util.EnumSet)">getClientMmap</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html?is-external=true" title="class or interface in java.util">EnumSet</a>&lt;org.apache.hadoop.fs.ReadOption&gt;&nbsp;opts)</code>
<div class="block">Get or create a memory map for this replica.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#getMaxReadaheadLength()">getMaxReadaheadLength</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#getVerifyChecksum()">getVerifyChecksum</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#isLocal()">isLocal</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#isShortCircuit()">isShortCircuit</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#read(byte[],%20int,%20int)">read</a></strong>(byte[]&nbsp;arr,
        int&nbsp;off,
        int&nbsp;len)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#read(java.nio.ByteBuffer)">read</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#readAll(byte[],%20int,%20int)">readAll</a></strong>(byte[]&nbsp;buf,
              int&nbsp;off,
              int&nbsp;len)</code>
<div class="block">Similar to <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)"><code>BlockReader.readFully(byte[], int, int)</code></a> except that it will
 not throw an exception on EOF.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#readFully(byte[],%20int,%20int)">readFully</a></strong>(byte[]&nbsp;arr,
                  int&nbsp;off,
                  int&nbsp;len)</code>
<div class="block">Read exactly the given amount of data, throwing an exception
 if EOF is reached before that amount</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#readWithBounceBuffer(byte[],%20int,%20int,%20boolean)">readWithBounceBuffer</a></strong>(byte[]&nbsp;arr,
                                        int&nbsp;off,
                                        int&nbsp;len,
                                        boolean&nbsp;canSkipChecksum)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#readWithBounceBuffer(java.nio.ByteBuffer,%20boolean)">readWithBounceBuffer</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf,
                                        boolean&nbsp;canSkipChecksum)</code>
<div class="block">Read using the bounce buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#readWithoutBounceBuffer(byte[],%20int,%20int)">readWithoutBounceBuffer</a></strong>(byte[]&nbsp;arr,
                                              int&nbsp;off,
                                              int&nbsp;len)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#readWithoutBounceBuffer(java.nio.ByteBuffer)">readWithoutBounceBuffer</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#releaseNoChecksumContext()">releaseNoChecksumContext</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#skip(long)">skip</a></strong>(long&nbsp;n)</code>
<div class="block">Skip the given number of bytes</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>static final&nbsp;org.apache.commons.logging.Log <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.61">LOG</a></pre>
</li>
</ul>
<a name="bufferPool">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bufferPool</h4>
<pre>private static final&nbsp;org.apache.hadoop.util.DirectBufferPool <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.63">bufferPool</a></pre>
</li>
</ul>
<a name="closed">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closed</h4>
<pre>private&nbsp;boolean <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.125">closed</a></pre>
</li>
</ul>
<a name="replica">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replica</h4>
<pre>private final&nbsp;<a href="../../../../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitReplica.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ShortCircuitReplica</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.130">replica</a></pre>
<div class="block">Pair of streams for this block.</div>
</li>
</ul>
<a name="dataIn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataIn</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels">FileChannel</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.135">dataIn</a></pre>
<div class="block">The data FileChannel.</div>
</li>
</ul>
<a name="dataPos">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataPos</h4>
<pre>private&nbsp;long <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.143">dataPos</a></pre>
<div class="block">The next place we'll read from in the block data FileChannel.

 If data is buffered in dataBuf, this offset will be larger than the
 offset of the next byte which a read() operation will give us.</div>
</li>
</ul>
<a name="checksumIn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksumIn</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels">FileChannel</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.148">checksumIn</a></pre>
<div class="block">The Checksum FileChannel.</div>
</li>
</ul>
<a name="checksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksum</h4>
<pre>private final&nbsp;org.apache.hadoop.util.DataChecksum <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.153">checksum</a></pre>
<div class="block">Checksum type and size.</div>
</li>
</ul>
<a name="verifyChecksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyChecksum</h4>
<pre>private final&nbsp;boolean <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.158">verifyChecksum</a></pre>
<div class="block">If false, we will always skip the checksum.</div>
</li>
</ul>
<a name="filename">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filename</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.163">filename</a></pre>
<div class="block">Name of the block, for logging purposes.</div>
</li>
</ul>
<a name="block">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>block</h4>
<pre>private final&nbsp;<a href="../../../../org/apache/hadoop/hdfs/protocol/ExtendedBlock.html" title="class in org.apache.hadoop.hdfs.protocol">ExtendedBlock</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.168">block</a></pre>
<div class="block">Block ID and Block Pool ID.</div>
</li>
</ul>
<a name="bytesPerChecksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bytesPerChecksum</h4>
<pre>private final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.173">bytesPerChecksum</a></pre>
<div class="block">Cache of Checksum#bytesPerChecksum.</div>
</li>
</ul>
<a name="checksumSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksumSize</h4>
<pre>private final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.178">checksumSize</a></pre>
<div class="block">Cache of Checksum#checksumSize.</div>
</li>
</ul>
<a name="maxAllocatedChunks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxAllocatedChunks</h4>
<pre>private final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.186">maxAllocatedChunks</a></pre>
<div class="block">Maximum number of chunks to allocate.

 This is used to allocate dataBuf and checksumBuf, in the event that
 we need them.</div>
</li>
</ul>
<a name="zeroReadaheadRequested">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zeroReadaheadRequested</h4>
<pre>private final&nbsp;boolean <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.191">zeroReadaheadRequested</a></pre>
<div class="block">True if zero readahead was requested.</div>
</li>
</ul>
<a name="maxReadaheadLength">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxReadaheadLength</h4>
<pre>private final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.204">maxReadaheadLength</a></pre>
<div class="block">Maximum amount of readahead we'll do.  This will always be at least the,
 size of a single chunk, even if <a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.html#zeroReadaheadRequested"><code>zeroReadaheadRequested</code></a> is true.
 The reason is because we need to do a certain amount of buffering in order
 to do checksumming.
 
 This determines how many bytes we'll use out of dataBuf and checksumBuf.
 Why do we allocate buffers, and then (potentially) only use part of them?
 The rationale is that allocating a lot of buffers of different sizes would
 make it very difficult for the DirectBufferPool to re-use buffers.</div>
</li>
</ul>
<a name="dataBuf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataBuf</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.212">dataBuf</a></pre>
<div class="block">Buffers data starting at the current dataPos and extending on
 for dataBuf.limit().

 This may be null if we don't need it.</div>
</li>
</ul>
<a name="checksumBuf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksumBuf</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a> <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.220">checksumBuf</a></pre>
<div class="block">Buffers checksums starting at the current checksumPos and extending on
 for checksumBuf.limit().

 This may be null if we don't need it.</div>
</li>
</ul>
<a name="storageType">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>storageType</h4>
<pre>private&nbsp;org.apache.hadoop.fs.StorageType <a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.225">storageType</a></pre>
<div class="block">StorageType of replica on DataNode.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BlockReaderLocal(org.apache.hadoop.hdfs.BlockReaderLocal.Builder)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BlockReaderLocal</h4>
<pre>private&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.227">BlockReaderLocal</a>(<a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.Builder.html" title="class in org.apache.hadoop.hdfs">BlockReaderLocal.Builder</a>&nbsp;builder)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createDataBufIfNeeded()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDataBufIfNeeded</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.258">createDataBufIfNeeded</a>()</pre>
</li>
</ul>
<a name="freeDataBufIfExists()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freeDataBufIfExists</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.266">freeDataBufIfExists</a>()</pre>
</li>
</ul>
<a name="createChecksumBufIfNeeded()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createChecksumBufIfNeeded</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.277">createChecksumBufIfNeeded</a>()</pre>
</li>
</ul>
<a name="freeChecksumBufIfExists()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freeChecksumBufIfExists</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.285">freeChecksumBufIfExists</a>()</pre>
</li>
</ul>
<a name="drainDataBuf(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drainDataBuf</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.293">drainDataBuf</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</pre>
</li>
</ul>
<a name="fillBuffer(java.nio.ByteBuffer, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fillBuffer</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.321">fillBuffer</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf,
             boolean&nbsp;canSkipChecksum)
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Read from the block file into a buffer.

 This function overwrites checksumBuf.  It will increment dataPos.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buf</code> - The buffer to read into.  May be dataBuf.
              The position and limit of this buffer should be set to
              multiples of the checksum size.</dd><dd><code>canSkipChecksum</code> - True if we can skip checksumming.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Total bytes read.  0 on EOF.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="createNoChecksumContext()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNoChecksumContext</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.373">createNoChecksumContext</a>()</pre>
</li>
</ul>
<a name="releaseNoChecksumContext()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseNoChecksumContext</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.388">releaseNoChecksumContext</a>()</pre>
</li>
</ul>
<a name="read(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.397">read</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)
         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>read</code>&nbsp;in interface&nbsp;<code>org.apache.hadoop.fs.ByteBufferReadable</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readWithoutBounceBuffer(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readWithoutBounceBuffer</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.433">readWithoutBounceBuffer</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="fillDataBuf(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fillDataBuf</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.462">fillDataBuf</a>(boolean&nbsp;canSkipChecksum)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Fill the data buffer.  If necessary, validate the data against the
 checksums.
 
 We always want the offsets of the data contained in dataBuf to be
 aligned to the chunk boundary.  If we are validating checksums, we
 accomplish this by seeking backwards in the file until we're on a
 chunk boundary.  (This is necessary because we can't checksum a
 partial chunk.)  If we are not validating checksums, we simply only
 fill the latter part of dataBuf.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>canSkipChecksum</code> - true if we can skip checksumming.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if we hit EOF.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readWithBounceBuffer(java.nio.ByteBuffer, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readWithBounceBuffer</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.503">readWithBounceBuffer</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf,
                       boolean&nbsp;canSkipChecksum)
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Read using the bounce buffer.

 A 'direct' read actually has three phases. The first drains any
 remaining bytes from the slow read buffer. After this the read is
 guaranteed to be on a checksum chunk boundary. If there are still bytes
 to read, the fast direct path is used for as many remaining bytes as
 possible, up to a multiple of the checksum chunk size. Finally, any
 'odd' bytes remaining at the end of the read cause another slow read to
 be issued, which involves an extra copy.

 Every 'slow' read tries to fill the slow read buffer in one go for
 efficiency's sake. As described above, all non-checksum-chunk-aligned
 reads will be served from the slower read path.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buf</code> - The buffer to read into.</dd><dd><code>canSkipChecksum</code> - True if we can skip checksums.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="read(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.548">read</a>(byte[]&nbsp;arr,
       int&nbsp;off,
       int&nbsp;len)
         throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#read(byte[],%20int,%20int)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readWithoutBounceBuffer(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readWithoutBounceBuffer</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.586">readWithoutBounceBuffer</a>(byte[]&nbsp;arr,
                          int&nbsp;off,
                          int&nbsp;len)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readWithBounceBuffer(byte[], int, int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readWithBounceBuffer</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.599">readWithBounceBuffer</a>(byte[]&nbsp;arr,
                       int&nbsp;off,
                       int&nbsp;len,
                       boolean&nbsp;canSkipChecksum)
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="skip(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>skip</h4>
<pre>public&nbsp;long&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.614">skip</a>(long&nbsp;n)
          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#skip(long)">BlockReader</a></code></strong></div>
<div class="block">Skip the given number of bytes</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#skip(long)">skip</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="available()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>available</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.632">available</a>()
              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#available()">BlockReader</a></code></strong></div>
<div class="block">Returns an estimate of the number of bytes that can be read
 (or skipped over) from this input stream without performing
 network I/O.
 This may return more than what is actually present in the block.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#available()">available</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.638">close</a>()
           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#close()">BlockReader</a></code></strong></div>
<div class="block">Close the block reader.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readFully(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFully</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.650">readFully</a>(byte[]&nbsp;arr,
             int&nbsp;off,
             int&nbsp;len)
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)">BlockReader</a></code></strong></div>
<div class="block">Read exactly the given amount of data, throwing an exception
 if EOF is reached before that amount</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)">readFully</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readAll(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readAll</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.656">readAll</a>(byte[]&nbsp;buf,
          int&nbsp;off,
          int&nbsp;len)
            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readAll(byte[],%20int,%20int)">BlockReader</a></code></strong></div>
<div class="block">Similar to <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readFully(byte[],%20int,%20int)"><code>BlockReader.readFully(byte[], int, int)</code></a> except that it will
 not throw an exception on EOF. However, it differs from the simple
 <a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#read(byte[],%20int,%20int)"><code>BlockReader.read(byte[], int, int)</code></a> call in that it is guaranteed to
 read the data if it is available. In other words, if this call
 does not throw an exception, then either the buffer has been
 filled or the next call will return EOF.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#readAll(byte[],%20int,%20int)">readAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="isLocal()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLocal</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.662">isLocal</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#isLocal()">isLocal</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true only if this is a local read.</dd></dl>
</li>
</ul>
<a name="isShortCircuit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isShortCircuit</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.667">isShortCircuit</a>()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#isShortCircuit()">isShortCircuit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true only if this is a short-circuit read.
                      All short-circuit reads are also local.</dd></dl>
</li>
</ul>
<a name="getClientMmap(java.util.EnumSet)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClientMmap</h4>
<pre>public&nbsp;<a href="../../../../org/apache/hadoop/hdfs/shortcircuit/ClientMmap.html" title="class in org.apache.hadoop.hdfs.shortcircuit">ClientMmap</a>&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.688">getClientMmap</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html?is-external=true" title="class or interface in java.util">EnumSet</a>&lt;org.apache.hadoop.fs.ReadOption&gt;&nbsp;opts)</pre>
<div class="block">Get or create a memory map for this replica.
 
 There are two kinds of ClientMmap objects we could fetch here: one that 
 will always read pre-checksummed data, and one that may read data that
 hasn't been checksummed.

 If we fetch the former, "safe" kind of ClientMmap, we have to increment
 the anchor count on the shared memory slot.  This will tell the DataNode
 not to munlock the block until this ClientMmap is closed.
 If we fetch the latter, we don't bother with anchoring.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html#getClientMmap(java.util.EnumSet)">getClientMmap</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/hadoop/hdfs/BlockReader.html" title="interface in org.apache.hadoop.hdfs">BlockReader</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>opts</code> - The options to use, such as SKIP_CHECKSUMS.</dd>
<dt><span class="strong">Returns:</span></dt><dd>null on failure; the ClientMmap otherwise.</dd></dl>
</li>
</ul>
<a name="getVerifyChecksum()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVerifyChecksum</h4>
<pre>boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.713">getVerifyChecksum</a>()</pre>
</li>
</ul>
<a name="getMaxReadaheadLength()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxReadaheadLength</h4>
<pre>int&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.718">getMaxReadaheadLength</a>()</pre>
</li>
</ul>
<a name="forceAnchorable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceAnchorable</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.727">forceAnchorable</a>()</pre>
<div class="block">Make the replica anchorable.  Normally this can only be done by the
 DataNode.  This method is only for testing.</div>
</li>
</ul>
<a name="forceUnanchorable()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>forceUnanchorable</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/hdfs/BlockReaderLocal.html#line.736">forceUnanchorable</a>()</pre>
<div class="block">Make the replica unanchorable.  Normally this can only be done by the
 DataNode.  This method is only for testing.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BlockReaderLocal.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/hadoop/hdfs/BlockReaderFactory.FailureInjector.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/hadoop/hdfs/BlockReaderLocal.Builder.html" title="class in org.apache.hadoop.hdfs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/hdfs/BlockReaderLocal.html" target="_top">Frames</a></li>
<li><a href="BlockReaderLocal.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
